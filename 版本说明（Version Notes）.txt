æœ¬ç‰ˆæœ¬æ˜¯åœ¨åŸç‰ˆv1.93åŸºç¡€ä¸Šè¿›è¡Œä¿®å¤ï¼Œä¼˜åŒ–å’Œå‡çº§è€Œæ¥ï¼Œè¿›è¡Œäº†å¤šé¡¹ä¿®å¤å’Œæ”¹è¿›ï¼Œä¹Ÿæ·»åŠ äº†ä¸€äº›æ–°åŠŸèƒ½ï¼š

 ä¸€ï¼ŒåŠŸèƒ½é‡å†™ï¼š

   1. è’™ç‰ˆ
       å¯¹è’™ç‰ˆï¼ˆmask)çš„è·å–ä»£ç è¿›è¡Œäº†é‡å†™ï¼Œè®©å®ƒå¯ä»¥æ”¯æŒpsæœ€æ–°ç‰ˆæœ¬ã€‚æ”¯æŒps2024-ps2026,è¾“å‡ºæ ‡å‡†çš„é»‘ç™½è’™ç‰ˆ

    2. rgthreeèŠ‚ç‚¹æ”¯æŒæœ€æ–°ç‰ˆæœ¬ï¼š
       å¯¹å·¥ä½œæµåˆ†ç»„èŠ‚ç‚¹åŒæ­¥ä»£ç è¿›è¡Œäº†é‡å†™ï¼Œå¯ä»¥æ”¯æŒæœ€æ–°ç‰ˆæœ¬çš„rgthree,ä»£ç ä¸Šå¢åŠ æ›´å¤šçš„é¢œè‰²åŒ¹é…æ–¹å¼ï¼Œæ›´å®¹æ˜“åŒæ­¥å·¥ä½œæµï¼ˆå¦‚æœä½ è¿˜åœ¨ä½¿ç”¨è€æ¿æœ¬å·¥ä½œçš„è¯ï¼‰ã€‚

    3. å›¾ç‰‡ä¼ è¾“ä¼˜åŒ–
      å¯¹å›¾ç‰‡ï¼ˆè’™ç‰ˆé™¤å¤–ï¼‰çš„ä¼ è¾“æ–¹å¼è¿›è¡Œäº†é‡å†™ï¼ŒåŒ…æ‹¬ä»psè·å–å›¾ç‰‡ï¼Œæˆ–comfyuiç”Ÿæˆçš„å›¾ç‰‡å‘é€åˆ°PS,å¼ƒç”¨äº†åŸæ¥çš„ç¼–ç æ–¹å¼ï¼ˆbase64ç¼–ç ï¼‰ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼æ¥ä¼ é€ï¼Œè·å–æœ€å¿«çš„ä¼ è¾“é€Ÿç‡ã€‚

    4. å›¾ç‰‡æ¸…æ™°åº¦ä¼˜åŒ–ã€‚
       é¦–å…ˆæ˜¯ä»PSè·å–å›¾ç‰‡ï¼ŒåŸç‰ˆæœ¬è·å–çš„æ˜¯PSçš„é¢„è§ˆï¼Œç”±äºå›¾ç‰‡è¾ƒå°ï¼ˆ1024x1021ï¼‰åªæœ‰50-80kb,å›¾ç‰‡è´¨é‡è¾ƒä½ï¼Œæ”¾å¤§ä¼šæ¨¡ç³Šï¼Œæœ‰ä¼ªå½±ã€‚ç°å·²å¯¹è·å–å‡½æ•°è¿›è¡Œäº†é‡å†™ï¼Œç›´æ¥è·å–PSå…ƒå›¾ç‰‡ï¼Œæ¸…æ™°åº¦å’ŒPSä¸€è‡´ï¼Œæ–‡æ¡£è¾ƒå¤§ï¼Œä¸€èˆ¬1Kçš„å›¾ç‰‡ åœ¨3M-4Mï¼Œ2Kçš„å›¾ç‰‡å¤§å°10-20Må·¦å³ï¼Œ4Kçš„å›¾ç‰‡ 30-40Må·¦å³ã€‚ç›®å‰èƒ½æ”¯æŒ5400x5400åˆ†è¾«ç‡çš„é«˜æ¸…è·å–ï¼Œè¶…å‡ºä¼šå‹ç¼©ã€‚
      å¦å¤–ï¼Œä»comfyuiä¼ é€å›¾ç‰‡åˆ°psä¸å†å‹ç¼©ï¼Œä¿æŒcomfyuiç”Ÿæˆå›¾ç‰‡æ—¶çš„æ¸…æ™°åº¦å’Œæ–‡ä»¶å¤§å°ã€‚

    5. PSç«¯å›¾ç‰‡å®¹å™¨é‡å†™ï¼ˆæœ€å¤§æ”¯æŒ9å¼ å›¾ç‰‡ï¼‰
       åŸç‰ˆæœ¬åªæ”¯æŒ1å¼ å›¾ç‰‡ï¼ˆ1x1ï¼‰æ˜¾ç¤ºã€‚ç°åœ¨å¯¹å®¹å™¨è¿›è¡Œäº†é‡å†™ï¼Œå¢åŠ äº†2x2 å’Œ3x3çš„å›¾ç‰‡ç½‘æ ¼ï¼Œæ”¯æŒä»comfyuiå‘é€åˆ°PSçš„å›¾ç‰‡æ•°é‡æ˜¯1-9å¼ ï¼Œæ ¹æ®å›¾ç‰‡æ•°é‡ä½¿ç”¨ä¸åŒçš„ç½‘æ ¼ã€‚ï¼ˆPSç«¯æ¥æ”¶å›¾ç‰‡çš„é€»è¾‘æ˜¯å›¾ç‰‡ç»„ï¼ˆimage batchï¼‰,æ— è®ºç”¨ä½•ç§æ–¹å¼ç”Ÿæˆçš„batchéƒ½å¯ä»¥è¾“é€åˆ°psä¸­ï¼‰
 
äºŒï¼Œç•Œé¢æˆ–UIä¿®å¤ã€‚
   1.  PSæ’ä»¶ç«¯å·¦ä¸Šè§’çš„ä¸‰ä¸ªå›¾æ ‡ç¼©å°åˆ°åŸæ¥çš„2/3,å³è¾¹çš„æ»‘å—æ”¹ä¸ºç»†æ¡å‹ï¼Œè¿™æ ·å¯ä»¥æ˜¾ç¤ºæ›´å¤šçš„å›¾ç‰‡å…ƒç´ ã€‚

   2 .ç§å­æ¡†ï¼Œæç¤ºè¯æ¡†ï¼ŒåŒç®­å¤´åŠŸèƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¯ä»¥åŒæ­¥æ˜¾ç¤ºç§å­ï¼Œæç¤ºè¯ï¼Œå¦å¤–ä¹ŸåŒ…æ‹¬è®¾ç½®é¢æ¿ä¸­çš„ç§å­å’Œæç¤ºè¯

   3. å‰é¢ç‰ˆä¸­çš„æç¤ºè¯è¾“å…¥æ¡†å¯ä»¥è¾“å…¥ä¸­æ–‡äº†ï¼Œå¢åŠ äº†å»¶æ—¶å’Œé¼ æ ‡æ£€æµ‹äº‹ä»¶ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä¸­æ–‡å½•å…¥ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œè¾“å…¥ä¸­æ–‡æ—¶ï¼Œå°†é¼ æ ‡ç§»åˆ°æ’ä»¶å†…éƒ¨çš„ä»»æ„åœ°æ–¹ä¸è¦è®©é¼ æ ‡è½åœ¨è¾“å…¥æ³•çš„é€‰è¯æ¡†ä¸Šå³å¯ï¼Œä¸ç„¶ä¹Ÿä¼šæ„å¤–å…³é—­æç¤ºè¯è¾“å…¥æ¡†é€ æˆæ— æ³•è¾“å…¥ã€‚

   4. è®¾ç½®é¢æ¿ä¸­çš„ç¼©æ”¾å‚æ•°â€œDownScale if Biggerâ€ å’Œâ€œUpscale if Smaller.â€è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¿®æ”¹åä¸éœ€è¦é‡èµ·æ’ä»¶ï¼Œåªéœ€è¦PSç”»å¸ƒä¸­æœ‰ä»»ä½•æ”¹å˜ï¼ˆåŒ…æ‹¬é€‰åŒºï¼‰å°±ä¼šç«‹å³ç”Ÿæ•ˆã€‚

   5.è¿›åº¦æ¡è¿›è¡Œäº†æ”¹è¿›ï¼Œåªè¦æœ‰randeråŠ¨ä½œï¼Œå°±ä¼šé¢„å…ˆåŠ è½½è¿›åº¦æ¡ï¼Œè®©ä½ ç¬¬ä¸€æ—¶é—´çŸ¥é“comfyuiå·²ç»è¿è¡Œã€‚

   6. ä¿®å¤äº†ä¸€ä¸ªå¯èƒ½å‡ºç°çš„bugï¼Œå½“PSç«¯çŸ­æ—¶é—´å†…é«˜é¢‘ç‡åšæ— æ•ˆè¿æ¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šäº§ç”Ÿæ°¸ä¹…æ€§æ–­è¿ï¼Œé€ æˆæ°¸ä¹…æ€§çš„å¤±è¿ï¼Œä»¥å‰çš„æ–¹æ³•æ˜¯ï¼ŒæŠŠcomfyuiä¸­è‡ªå®šä¹‰èŠ‚ç‚¹ä¸‹çš„comfyui-photoshopæ–‡ä»¶å¤¹åˆ é™¤ï¼Œé‡æ–°å¤åˆ¶ä¸€ä¸ªæ–°çš„è€ƒè´å³å¯æ¢å¤ï¼Œç°å·²ä¿®å¤ï¼Œåº”è¯¥ä¸å†å‡ºç°ã€‚

   7.ç¤¾åŒºä¸­è§åˆ°çš„å¤§éƒ¨ä»½bugéƒ½å·²ç»ä¿®å¤ã€‚

æ€»ä¹‹ï¼Œè¿™ä¸ªç‰ˆæœ¬åº”è¯¥æ˜¯ç›®å‰æœ€å®Œæ•´çš„ç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å¾ˆå¤šåœ°æ–¹ï¼Œå¯èƒ½é€è¿‡ç•Œé¢ä½ çœ‹ä¸å‡ºæ¥ï¼Œä½†ä½ æ˜æ˜¾èƒ½æ„Ÿè§‰å¾—ä¼ è¾“é€Ÿåº¦çš„æå‡å’Œæ›´åŠ ç¨³å®šï¼Œä»¥åŠå›¾ç‰‡è´¨é‡çš„æé«˜ã€‚

-------------------------------------------------------------------------------------------
ä¼˜åŒ–æ—¥å†ï¼š

æœ€æ–°ä¼˜åŒ–ï¼š

2026.1.24ï¼š
é‡æ„äº† Photoshop â†’ ComfyUI çš„é›†æˆï¼Œä»¥å®ç°ç»†ç²’åº¦ã€ç¡®å®šæ€§çš„ç¼“å­˜ï¼ŒåŒæ—¶ä¿æŒç®€æ´ä¸”å‘åå…¼å®¹çš„å·¥ä½œæµç¨‹ã€‚ä¼˜åŒ–äº†IS_CHANGEDå‡½æ•°ï¼Œä»¥åŠç¼“å­˜æœºåˆ¶ï¼Œè®©å¤„ç†æ›´å¿«é€Ÿã€‚

 ä¸»è¦åŒ…æ‹¬ï¼š 
     1. å°†â€œğŸ”¹Photoshop ComfyUI Pluginâ€œè¿›è¡Œäº†ç»†åŒ–ï¼Œåˆ†è§£ä¸ºï¼šå›¾ç‰‡è’™ç‰ˆï¼Œç§å­ï¼Œæç¤ºè¯ï¼Œæ»‘å—å€¼ç­‰å•ç‹¬çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åç§°ä¸ºï¼š"ğŸ”¹Photoshop ComfyUI Plugin"ï¼Œ"ğŸ”¹Photoshop Seed"ï¼Œ"ğŸ”¹Photoshop Prompts"ï¼Œ"ğŸ”¹Photoshop Slider"ï¼Œæ­å»ºå·¥ä½œæµæ—¶å¯ä»¥å•ç‹¬ä½¿ç”¨å®ƒä»¬ï¼Œè®©å·¥ä½œæµå˜å¾—æ›´ç®€å•é«˜æ•ˆã€‚

     2. å…¼å®¹ä»¥å‰çš„å·¥ä½œæµï¼Œå¢åŠ æ–°èŠ‚ç‚¹çš„åŒæ—¶ï¼Œæš‚æ—¶ä¿ç•™äº†åˆå§‹èŠ‚ç‚¹ï¼ŒğŸ”¹Photoshop ComfyUI Plugin(aio),å¦‚æœä½ ä½¿ç”¨åŸç‰ˆå·¥ä½œæµï¼Œå®ƒä»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä¸éœ€åšä»»ä½•ä¿®æ”¹ã€‚
   æ„Ÿè°¢Michoko92çš„å¯¹ä»£ç çš„ä¼˜åŒ–ï¼Œæœ¬é‡æ„ä»£ç å‡ç”±ï¼šMichoko92 æä¾›ï¼

2026.1.24
Refactored the integration of Photoshop â†’ ComfyUI to achieve fine-grained, deterministic caching while maintaining a streamlined and backward-compatible workflow. Optimized the IS_CHANGED function and caching mechanism for faster processing.

Main updates include:

1.The "ğŸ”¹Photoshop ComfyUI Plugin" has been refined and broken down into separate nodes for image masks, seeds, prompts, slider values, etc. The node names are: "ğŸ”¹Photoshop ComfyUI Plugin," "ğŸ”¹Photoshop Seed," "ğŸ”¹Photoshop Prompts," "ğŸ”¹Photoshop Slider." These can be used individually when building workflows, making the workflow simpler and more efficient.
2.Compatibility with previous workflows is maintained. While new nodes have been added, the original node "ğŸ”¹Photoshop ComfyUI Plugin (aio)" is temporarily retained. If you are using the original workflow, it will continue to function normally without any modifications.
Thanks to Michoko92. The refactored code was provided by Michoko92!


----------------------------------------------------------------------------------------------------

Release Notes - Version Update

This version is built upon the original v1.93 with fixes, optimizations, and upgrades, incorporating multiple repairs and improvements along with new features:

1. Function Rewrites:

   1.1 Mask
      The code for obtaining masks has been rewritten to support the latest versions of Photoshop. It now supports PS2024â€“PS2026 and outputs standard black-and-white masks.

   1.2 rgthree Node Support for the Latest Version
      The workflow grouping node synchronization code has been rewritten to support the latest version of rgthree. More color-matching methods have been added to the code, making workflow synchronization easier (especially if you are still using older workflow versions).

   1.3 Image Transfer Optimization
      The image transfer method (excluding masks) has been rewritten, including fetching images from Photoshop or sending images generated by ComfyUI to Photoshop. The previous encoding method (base64 encoding) has been deprecated in favor of a binary approach to achieve the fastest transfer rates.

   1.4 Image Clarity Optimization
      First, the method of fetching images from Photoshop has been rewritten. The original version retrieved PSR previews, which were smaller (1024x1024) at only 50â€“80 KB, resulting in lower image quality, blurriness when enlarged, and artifacts. The new function directly retrieves the original Photoshop images, maintaining the same clarity as in Photoshop. File sizes are larger, typically 3â€“4 MB for 1K images, 10â€“20 MB for 2K images, and 30â€“40 MB for 4K images. The system now supports high-definition retrieval up to 5400x5400 resolution; anything beyond this will be compressed.
      Additionally, images transferred from ComfyUI to Photoshop are no longer compressed, preserving the clarity and file size of the images generated by ComfyUI.

   1.5 Photoshop Image Container Rewrite (Supports Up to 9 Images)
      The original version only supported displaying one image (1x1). The container has been rewritten to include 2x2 and 3x3 image grids, supporting 1â€“9 images sent from ComfyUI to Photoshop. Different grids are used depending on the number of images. (The logic for receiving images on the Photoshop side is image batches, meaning batches generated in any way can be sent to Photoshop.)

2. Interface or UI Fixes:

   2.1 The three icons in the upper-left corner of the Photoshop plugin have been reduced to two-thirds of their original size, and the slider on the right has been changed to a thin bar to display more image elements.

   2.2 The seed box, prompt box, and double-arrow functionality have been optimized to synchronize and display seeds and prompts, including those in the settings panel.

   2.3 The prompt input box in the front panel now supports Chinese input. Delayed and mouse detection events have been added to allow direct Chinese input. Note: When inputting Chinese, ensure the mouse is placed anywhere inside the plugin and not on the input method candidate box, as this could unexpectedly close the prompt input box and prevent input.

   2.4 The scaling parameters "DownScale if Bigger" and "Upscale if Smaller" in the settings panel have been optimized. Changes now take effect immediately without restarting the plugin, as long as there is any change (including selections) in the Photoshop canvas.

   2.5 The progress bar has been improved to preload whenever a render action occurs, allowing users to immediately know when ComfyUI is running.

   2.6 Fixed a potential bug where frequent invalid connections from Photoshop in a short period could cause a permanent disconnection on the server, leading to persistent loss of connectivity. Previously, the solution was to delete the `comfyui-photoshop` folder under the custom node in ComfyUI and replace it with a new copy. This issue has been resolved and should no longer occur.

   2.7 Most bugs reported in the community have been fixed.

In summary, this version is currently the most comprehensive one, with many optimizations that may not be visible through the interface. However, users will clearly notice improvements in transfer speed, stability, and image quality.
   



