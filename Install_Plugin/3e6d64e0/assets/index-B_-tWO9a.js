(function(){var t;null==window.MutationObserver&&(t=function(){function t(t){this.callBack=t}return t.prototype.observe=function(t,e){var n;return this.element=t,this.interval=setInterval((n=this,function(){var t;if((t=n.element.innerHTML)!==n.oldHtml)return n.oldHtml=t,n.callBack.apply(null)}),200)},t.prototype.disconnect=function(){return window.clearInterval(this.interval)},t}(),window.MutationObserver=t)}).call(this);var Na=Object.defineProperty,za=(t,e,n)=>e in t?Na(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Be=(t,e,n)=>za(t,"symbol"!=typeof e?e+"":e,n);const Xs=require("photoshop");function le(){}function at(t,e){for(const n in e)t[n]=e[n];return t}window.__imageFitMode="cover";let hs,singleImageFitMode="cover",currentImageCount=1;function co(t){return t()}function mr(){return Object.create(null)}function lt(t){t.forEach(co)}function tt(t){return"function"==typeof t}function be(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function ho(t,e){return t===e||(hs||(hs=document.createElement("a")),hs.href=e,t===hs.href)}function Fa(t){return 0===Object.keys(t).length}function po(t,...e){if(null==t){for(const t of e)t(void 0);return le}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Qe(t){let e;return po(t,(t=>e=t))(),e}function Y(t,e,n){t.$$.on_destroy.push(po(e,n))}function jt(t,e,n,i){if(t){const r=go(t,e,n,i);return t[0](r)}}function go(t,e,n,i){return t[1]&&i?at(n.ctx.slice(),t[1](i(e))):n.ctx}function qt(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|r[i];return t}return e.dirty|r}return e.dirty}function Wt(t,e,n,i,r,s){if(r){const o=go(e,n,i,s);t.p(o,r)}}function Gt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function Cs(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function Pn(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&"$"!==i[0]&&(n[i]=t[i]);return n}function Et(t){return t??""}function Ve(t,e,n){return t.set(n),e}function $(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function Hs(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function Wi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t){return document.createTextNode(t)}function N(){return K(" ")}function bt(){return K("")}function ie(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Ba=["width","height"];function An(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set&&-1===Ba.indexOf(i)?t[i]=e[i]:O(t,i,e[i])}function _r(t,e){for(const n in e)O(t,n,e[n])}function oe(t,e,n){const i=e.toLowerCase();i in t?t[i]="boolean"==typeof t[i]&&""===n||n:e in t?t[e]="boolean"==typeof t[e]&&""===n||n:O(t,e,n)}function Va(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function es(t,e){t.value=e??""}function te(t,e,n,i){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function mt(t,e,n){t.classList.toggle(e,!!n)}function Ha(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Ua{constructor(t=!1){Be(this,"is_svg",!1),Be(this,"e"),Be(this,"n"),Be(this,"t"),Be(this,"a"),this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=Wi(e.nodeName):this.e=L(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)R(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}let ts;function Gn(t){ts=t}function Us(){if(!ts)throw new Error("Function called outside component initialization");return ts}function yt(t){Us().$$.on_mount.push(t)}function ja(t){Us().$$.after_update.push(t)}function mo(t){Us().$$.on_destroy.push(t)}function js(){const t=Us();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Ha(e,n,{cancelable:i});return r.slice().forEach((e=>{e.call(t,s)})),!s.defaultPrevented}return!0}}const _n=[],Q=[];let wn=[];const gi=[],qa=Promise.resolve();let mi=!1;function Wa(){mi||(mi=!0,qa.then(_o))}function _i(t){wn.push(t)}function me(t){gi.push(t)}const ei=new Set;let dn=0;function _o(){if(0!==dn)return;const t=ts;do{try{for(;dn<_n.length;){const t=_n[dn];dn++,Gn(t),Ga(t.$$)}}catch(t){throw _n.length=0,dn=0,t}for(Gn(null),_n.length=0,dn=0;Q.length;)Q.pop()();for(let t=0;t<wn.length;t+=1){const e=wn[t];ei.has(e)||(ei.add(e),e())}wn.length=0}while(_n.length);for(;gi.length;)gi.pop()();mi=!1,ei.clear(),Gn(t)}function Ga(t){if(null!==t.fragment){t.update(),lt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_i)}}function Ka(t){const e=[],n=[];wn.forEach((i=>-1===t.indexOf(i)?e.push(i):n.push(i))),n.forEach((t=>t())),wn=e}const ms=new Set;let Zt;function At(){Zt={r:0,c:[],p:Zt}}function Ot(){Zt.r||lt(Zt.c),Zt=Zt.p}function T(t,e){t&&t.i&&(ms.delete(t),t.i(e))}function I(t,e,n,i){if(t&&t.o){if(ms.has(t))return;ms.add(t),Zt.c.push((()=>{ms.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}function Bt(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function qs(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const t in o)t in a||(i[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[s]=a}else for(const t in o)r[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function _e(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function V(t){t&&t.c()}function F(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),_i((()=>{const e=t.$$.on_mount.map(co).filter(tt);t.$$.on_destroy?t.$$.on_destroy.push(...e):lt(e),t.$$.on_mount=[]})),r.forEach(_i)}function B(t,e){const n=t.$$;null!==n.fragment&&(Ka(n.after_update),lt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ya(t,e){-1===t.$$.dirty[0]&&(_n.push(t),Wa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,n,i,r,s,o=null,a=[-1]){const l=ts;Gn(t);const c=t.$$={fragment:null,ctx:[],props:s,update:le,not_equal:r,bound:mr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:mr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},((e,n,...i)=>{const s=i.length?i[0]:n;return c.ctx&&r(c.ctx[e],c.ctx[e]=s)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](s),u&&Ya(t,e)),n})):[],c.update(),u=!0,lt(c.before_update),c.fragment=!!i&&i(c.ctx),e.target){if(e.hydrate){const t=Va(e.target);c.fragment&&c.fragment.l(t),t.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&T(t.$$.fragment),F(t,e.target,e.anchor),_o()}Gn(l)}class $e{constructor(){Be(this,"$$"),Be(this,"$$set")}$destroy(){B(this,1),this.$destroy=le}$on(t,e){if(!tt(e))return le;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!Fa(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ja="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ja);const hn=[];function Ge(t,e=le){let n;const i=new Set;function r(e){if(be(t,e)&&(t=e,n)){const e=!hn.length;for(const e of i)e[1](),hn.push(e,t);if(e){for(let t=0;t<hn.length;t+=2)hn[t][0](hn[t+1]);hn.length=0}}}function s(e){r(e(t))}return{set:r,update:s,subscribe:function(o,a=le){const l=[o,a];return i.add(l),1===i.size&&(n=e(r,s)||le),o(t),()=>{i.delete(l),0===i.size&&n&&(n(),n=null)}}}}const vo="/assets/defaultImg-BcFEYa9o.jpg",{app:he,core:Vt}=require("photoshop"),{localFileSystem:Gi}=require("uxp").storage,Ss=require("uxp").storage.localFileSystem,vr=require("photoshop").imaging,{batchPlay:_t}=require("photoshop").action;let Ki;const Qa=require("uxp").shell,Yi=require("uxp").host,Za=Yi.uiLocale;Yi.name,Yi.version,(async()=>{Ki=await Gi.getDataFolder()})();var bo=(t=>(t.ERROR="ERROR",t.WARN="WARN",t.INFO="INFO",t.DEBUG="DEBUG",t))(bo||{});const Xa=15360;let el=class{constructor(t="logs",e=5,n="INFO"){Be(this,"logDirectory"),Be(this,"maxRuntimes"),Be(this,"currentLogFile"),Be(this,"currentLogLevel"),Be(this,"runtimeId"),Be(this,"runtimeStarted",!1),this.logDirectory=t,this.maxRuntimes=e,this.currentLogLevel=n,this.runtimeId=`runtime_${Date.now()}`,this.initializeLogger()}async initializeLogger(){await this.cleanupOldRuntimes(),await this.startNewRuntime()}async startNewRuntime(){try{const t=await Ss.getDataFolder();this.currentLogFile=await t.createFile(`${this.runtimeId}.log`,{overwrite:!0}),this.runtimeStarted=!0}catch(t){}}async log(t,...e){if(!this.shouldLog(t))return;const n=`${(new Date).toISOString()} [${t}]: ${e.map((t=>{if("object"==typeof t){const e=JSON.stringify(t);return e.length>102400?"over 100kb":e}return t})).join(" ")}`;if(this.runtimeStarted)try{await this.currentLogFile.write(n+"\n",{append:!0})}catch(t){}}formatMessage(t){let e=t.map((t=>"object"==typeof t?JSON.stringify(t):t)).join(" ");return Buffer.byteLength(e,"utf8")>Xa?"over 100kb":e}shouldLog(t){const e=Object.values(bo);return e.indexOf(t)<=e.indexOf(this.currentLogLevel)}async cleanupOldRuntimes(){try{const t=(await(await Gi.getDataFolder()).getEntries()).filter((t=>t.name.startsWith("log_"))).sort(((t,e)=>parseInt(t.name?.split("_")[1]?.split(".")[0])-parseInt(e.name?.split("_")[1]?.split(".")[0])));t.length>=this.maxRuntimes&&await t.shift().delete()}catch(t){}}async error(...t){await this.log("ERROR",...t)}async warn(...t){await this.log("WARN",...t)}async info(...t){await this.log("INFO",...t)}async debug(...t){await this.log("DEBUG",...t)}};const ne=new el,tl={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]}};class ks{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||tl,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new ks(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new ks(this.logger,t)}}var ht=new ks;class Ws{constructor(){this.observers={}}on(t,e){return t?.split(" ").forEach((t=>{this.observers[t]||(this.observers[t]=new Map);const n=this.observers[t].get(e)||0;this.observers[t].set(e,n+1)})),this}off(t,e){if(this.observers[t]){if(!e)return void delete this.observers[t];this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach((t=>{let[e,i]=t;for(let t=0;t<i;t++)e(...n)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((e=>{let[i,r]=e;for(let e=0;e<r;e++)i.apply(i,[t,...n])}))}}const Hn=()=>{let t,e;const n=new Promise(((n,i)=>{t=n,e=i}));return n.resolve=t,n.reject=e,n},br=t=>null==t?"":""+t,nl=(t,e,n)=>{t.forEach((t=>{e[t]&&(n[t]=e[t])}))},sl=/###/g,yr=t=>t&&t.indexOf("###")>-1?t.replace(sl,"."):t,wr=t=>!t||"string"==typeof t,Kn=(t,e,n)=>{const i="string"!=typeof e?e:e?.split(".");let r=0;for(;r<i.length-1;){if(wr(t))return{};const e=yr(i[r]);!t[e]&&n&&(t[e]=new n),t=Object.prototype.hasOwnProperty.call(t,e)?t[e]:{},++r}return wr(t)?{}:{obj:t,k:yr(i[r])}},$r=(t,e,n)=>{const{obj:i,k:r}=Kn(t,e,Object);if(void 0!==i||1===e.length)return void(i[r]=n);let s=e[e.length-1],o=e.slice(0,e.length-1),a=Kn(t,o,Object);for(;void 0===a.obj&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Kn(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},il=(t,e,n,i)=>{const{obj:r,k:s}=Kn(t,e,Object);r[s]=r[s]||[],r[s].push(n)},Ps=(t,e)=>{const{obj:n,k:i}=Kn(t,e);if(n)return n[i]},rl=(t,e,n)=>{const i=Ps(t,n);return void 0!==i?i:Ps(e,n)},yo=(t,e,n)=>{for(const i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):yo(t[i],e[i],n):t[i]=e[i]);return t},pn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ol={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const al=t=>"string"==typeof t?t.replace(/[&<>"'\/]/g,(t=>ol[t])):t;class ll{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(void 0!==e)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const ul=[" ",",","?","!",";"],fl=new ll(20),cl=(t,e,n)=>{e=e||"",n=n||"";const i=ul.filter((t=>e.indexOf(t)<0&&n.indexOf(t)<0));if(0===i.length)return!0;const r=fl.getRegExp(`(${i.map((t=>"?"===t?"\\?":t)).join("|")})`);let s=!r.test(t);if(!s){const e=t.indexOf(n);e>0&&!r.test(t.substring(0,e))&&(s=!0)}return s},vi=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!t)return;if(t[e])return t[e];const i=e?.split(n);let r=t;for(let t=0;t<i.length;){if(!r||"object"!=typeof r)return;let e,s="";for(let o=t;o<i.length;++o)if(o!==t&&(s+=n),s+=i[o],e=r[s],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<i.length-1)continue;t+=o-t+1;break}r=e}return r},As=t=>t&&t.indexOf("_")>0?t.replace("_","-"):t;class Cr extends Ws{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t?.split("."):(o=[t,e],n&&(Array.isArray(n)?o.push(...n):"string"==typeof n&&r?o.push(...n?.split(r)):o.push(n)));const a=Ps(this.data,o);return!a&&!e&&!n&&t.indexOf(".")>-1&&(t=o[0],e=o[1],n=o.slice(2).join(".")),a||!s||"string"!=typeof n?a:vi(this.data&&this.data[t]&&this.data[t][e],n,r)}addResource(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let o=[t,e];n&&(o=o.concat(s?n?.split(s):n)),t.indexOf(".")>-1&&(o=t?.split("."),i=e,e=o[1]),this.addNamespaces(e),$r(this.data,o,i),r.silent||this.emit("added",t,e,n,i)}addResources(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)("string"==typeof n[i]||Array.isArray(n[i]))&&this.addResource(t,e,i,n[i],{silent:!0});i.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[t,e];t.indexOf(".")>-1&&(o=t?.split("."),i=n,n=e,e=o[1]),this.addNamespaces(e);let a=Ps(this.data,o)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?yo(a,n,r):a={...a,...n},$r(this.data,o,a),s.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return void 0!==this.getResource(t,e)}getResourceBundle(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((t=>e[t]&&Object.keys(e[t]).length>0))}toJSON(){return this.data}}var wo={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,i,r){return t.forEach((t=>{this.processors[t]&&(e=this.processors[t].process(e,n,i,r))})),e}};const Sr={};class Os extends Ws{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),nl(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=ht.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;const n=this.resolve(t,e);return n&&void 0!==n.res}extractFromKey(t,e){let n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator;let r=e.ns||this.options.defaultNS||[];const s=n&&t.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||cl(t,n,i));if(s&&!o){const e=t.match(this.interpolator.nestingRegexp);if(e&&e.length>0)return{key:t,namespaces:r};const s=t?.split(n);(n!==i||n===i&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),t=s.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}translate(t,e,n){if("object"!=typeof e&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof e&&(e={...e}),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);const i=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(t[t.length-1],e),a=o[o.length-1],l=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const t=e.nsSeparator||this.options.nsSeparator;return i?{res:`${a}${t}${s}`,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(e)}:`${a}${t}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(e)}:s}const u=this.resolve(t,e);let d=u&&u.res;const p=u&&u.usedKey||s,h=u&&u.exactUsedKey||s,f=Object.prototype.toString.apply(d),g=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject;if(m&&d&&"string"!=typeof d&&"boolean"!=typeof d&&"number"!=typeof d&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!=typeof g||!Array.isArray(d))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const t=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...e,ns:o}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(u.res=t,u.usedParams=this.getUsedParamsDetails(e),u):t}if(r){const t=Array.isArray(d),n=t?[]:{},i=t?h:p;for(const t in d)if(Object.prototype.hasOwnProperty.call(d,t)){const s=`${i}${r}${t}`;n[t]=this.translate(s,{...e,joinArrays:!1,ns:o}),n[t]===s&&(n[t]=d[t])}d=n}}else if(m&&"string"==typeof g&&Array.isArray(d))d=d.join(g),d&&(d=this.extendTranslation(d,t,e,n));else{let i=!1,o=!1;const c=void 0!==e.count&&"string"!=typeof e.count,p=Os.hasDefaultValue(e),h=c?this.pluralResolver.getSuffix(l,e.count,e):"",f=e.ordinal&&c?this.pluralResolver.getSuffix(l,e.count,{ordinal:!1}):"",g=c&&!e.ordinal&&0===e.count&&this.pluralResolver.shouldUseIntlApi(),m=g&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${h}`]||e[`defaultValue${f}`]||e.defaultValue;!this.isValidLookup(d)&&p&&(i=!0,d=m),this.isValidLookup(d)||(o=!0,d=s);const v=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:d,$=p&&m!==d&&this.options.updateMissing;if(o||i||$){if(this.logger.log($?"updateKey":"missingKey",l,a,s,$?m:d),r){const t=this.resolve(s,{...e,keySeparator:!1});t&&t.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let t=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let e=0;e<n.length;e++)t.push(n[e]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(e.lng||this.language):t.push(e.lng||this.language);const i=(t,n,i)=>{const r=p&&i!==d?i:v;this.options.missingKeyHandler?this.options.missingKeyHandler(t,a,n,r,$,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(t,a,n,r,$,e),this.emit("missingKey",t,a,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?t.forEach((t=>{const n=this.pluralResolver.getSuffixes(t,e);g&&e[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{i([t],s+n,e[`defaultValue${n}`]||m)}))})):i(t,s,m))}d=this.extendTranslation(d,t,e,u,n),o&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${s}`),(o||i)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${s}`:s,i?d:void 0):this.options.parseMissingKeyHandler(d))}return i?(u.res=d,u.usedParams=this.getUsedParamsDetails(e),u):d}extendTranslation(t,e,n,i,r){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o="string"==typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(o){const e=t.match(this.interpolator.nestingRegexp);a=e&&e.length}let l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,n.lng||this.language||i.usedLng,n),o){const e=t.match(this.interpolator.nestingRegexp);a<(e&&e.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r&&r[0]===i[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${i[0]} in key: ${e[0]}`),null):s.translate(...i,e)}),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,a="string"==typeof o?[o]:o;return null!=t&&a&&a.length&&!1!==n.applyPostProcessor&&(t=wo.handle(a,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let e,n,i,r,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((t=>{if(this.isValidLookup(e))return;const a=this.extractFromKey(t,o),l=a.key;n=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==o.count&&"string"!=typeof o.count,d=u&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),p=void 0!==o.context&&("string"==typeof o.context||"number"==typeof o.context)&&""!==o.context,h=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);c.forEach((t=>{this.isValidLookup(e)||(s=t,!Sr[`${h[0]}-${t}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Sr[`${h[0]}-${t}`]=!0,this.logger.warn(`key "${n}" for languages "${h.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((n=>{if(this.isValidLookup(e))return;r=n;const s=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,n,t,o);else{let t;u&&(t=this.pluralResolver.getSuffix(n,o.count,o));const e=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(s.push(l+t),o.ordinal&&0===t.indexOf(i)&&s.push(l+t.replace(i,this.options.pluralSeparator)),d&&s.push(l+e)),p){const n=`${l}${this.options.contextSeparator}${o.context}`;s.push(n),u&&(s.push(n+t),o.ordinal&&0===t.indexOf(i)&&s.push(n+t.replace(i,this.options.pluralSeparator)),d&&s.push(n+e))}}let a;for(;a=s.pop();)this.isValidLookup(e)||(i=a,e=this.getResource(n,t,a,o))})))}))})),{res:e,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:s}}isValidLookup(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}getResource(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}getUsedParamsDetails(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&"string"!=typeof t.replace;let i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const t of e)delete i[t]}return i}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}const ti=t=>t.charAt(0).toUpperCase()+t.slice(1);class kr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ht.create("languageUtils")}getScriptPartFromCode(t){if(!(t=As(t))||t.indexOf("-")<0)return null;const e=t?.split("-");return 2===e.length||(e.pop(),"x"===e[e.length-1].toLowerCase())?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(!(t=As(t))||t.indexOf("-")<0)return t;const e=t?.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if("string"==typeof t&&t.indexOf("-")>-1){const e=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t?.split("-");return this.options.lowerCaseLng?n=n.map((t=>t.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=ti(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=ti(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=ti(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach((t=>{if(e)return;const n=this.formatLanguageCode(t);(!this.options.supportedLngs||this.isSupportedCode(n))&&(e=n)})),!e&&this.options.supportedLngs&&t.forEach((t=>{if(e)return;const n=this.getLanguagePartFromCode(t);if(this.isSupportedCode(n))return e=n;e=this.options.supportedLngs.find((t=>t===n?t:t.indexOf("-")<0&&n.indexOf("-")<0||!(t.indexOf("-")>0&&n.indexOf("-")<0&&t.substring(0,t.indexOf("-"))===n||0===t.indexOf(n)&&n.length>1)?void 0:t))})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],r=t=>{t&&(this.isSupportedCode(t)?i.push(t):this.logger.warn(`rejecting language code not found in supportedLngs: ${t}`))};return"string"==typeof t&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):"string"==typeof t&&r(this.formatLanguageCode(t)),n.forEach((t=>{i.indexOf(t)<0&&r(this.formatLanguageCode(t))})),i}}let dl=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],hl={1:t=>+(t>1),2:t=>+(1!=t),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>1==t?0:t>=2&&t<=4?1:2,7:t=>1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>1==t?0:2==t?1:8!=t&&11!=t?2:3,9:t=>+(t>=2),10:t=>1==t?0:2==t?1:t<7?2:t<11?3:4,11:t=>1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(0!==t),14:t=>1==t?0:2==t?1:3==t?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:0!==t?1:2,17:t=>1==t||t%10==1&&t%100!=11?0:1,18:t=>0==t?0:1==t?1:2,19:t=>1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>1==t?0:0==t||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3};const pl=["v1","v2","v3"],gl=["v4"],Pr={zero:0,one:1,two:2,few:3,many:4,other:5},ml=()=>{const t={};return dl.forEach((e=>{e.lngs.forEach((n=>{t[n]={numbers:e.nr,plurals:hl[e.fc]}}))})),t};class _l{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=ht.create("pluralResolver"),(!this.options.compatibilityJSON||gl.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ml(),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{const n=As("dev"===t?"en":t),i=e.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];const s=new Intl.PluralRules(n,{type:i});return this.pluralRulesCache[r]=s,s}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((t=>`${e}${t}`))}getSuffixes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(t,e);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((t,e)=>Pr[t]-Pr[e])).map((t=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${t}`)):n.numbers.map((n=>this.getSuffix(t,n,e))):[]}getSuffix(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(t,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(e)}`:this.getSuffixRetroCompatible(i,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const n=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let i=t.numbers[n];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?`_plural_${i.toString()}`:r():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!pl.includes(this.options.compatibilityJSON)}}const Ar=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=rl(t,e,n);return!s&&r&&"string"==typeof n&&(s=vi(t,n,i),void 0===s&&(s=vi(e,n,i))),s},ni=t=>t.replace(/\$/g,"$$$$");class vl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ht.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(t=>t),this.init(t)}init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:s,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:f,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:v}=t.interpolation;this.escape=void 0!==e?e:al,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=r?pn(r):s||"{{",this.suffix=o?pn(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?pn(d):p||pn("$t("),this.nestingSuffix=h?pn(h):f||pn(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(t,e)=>t&&t.source===e?(t.lastIndex=0,t):new RegExp(e,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,n,i){let r,s,o;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=t=>{if(t.indexOf(this.formatSeparator)<0){const r=Ar(e,a,t,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...i,...e,interpolationkey:t}):r}const r=t?.split(this.formatSeparator),s=r.shift().trim(),o=r.join(this.formatSeparator).trim();return this.format(Ar(e,a,s,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...i,...e,interpolationkey:s})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,u=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:t=>ni(t)},{regex:this.regexp,safeValue:t=>this.escapeValue?ni(this.escape(t)):ni(t)}].forEach((e=>{for(o=0;r=e.regex.exec(t);){const n=r[1].trim();if(s=l(n),void 0===s)if("function"==typeof c){const e=c(t,r,i);s="string"==typeof e?e:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))s="";else{if(u){s=r[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${t}`),s=""}else"string"!=typeof s&&!this.useRawValueToEscape&&(s=br(s));const a=e.safeValue(s);if(t=t.replace(r[0],a),u?(e.regex.lastIndex+=s.length,e.regex.lastIndex-=r[0].length):e.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),t}nest(t,e){let n,i,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(t,e)=>{const n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;const i=t?.split(new RegExp(`${n}[ ]*{`));let s=`{${i[1]}`;t=i[0],s=this.interpolate(s,r);const o=s.match(/'/g),a=s.match(/"/g);(o&&o.length%2==0&&!a||a.length%2!=0)&&(s=s.replace(/'/g,'"'));try{r=JSON.parse(s),e&&(r={...e,...r})}catch(e){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,e),`${t}${n}${s}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,t};for(;n=this.nestingRegexp.exec(t);){let a=[];r={...s},r=r.replace&&"string"!=typeof r.replace?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const t=n[1]?.split(this.formatSeparator).map((t=>t.trim()));n[1]=t.shift(),a=t,l=!0}if(i=e(o.call(this,n[1].trim(),r),r),i&&n[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=br(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),i=""),l&&(i=a.reduce(((t,e)=>this.format(t,e,s.lng,{...s,interpolationkey:n[1].trim()})),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}const bl=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t?.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);"currency"===e&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r?.split(";").forEach((t=>{if(t){const[e,...i]=t?.split(":"),r=i.join(":").trim().replace(/^'+|'+$/g,""),s=e.trim();n[s]||(n[s]=r),"false"===r&&(n[s]=!1),"true"===r&&(n[s]=!0),isNaN(r)||(n[s]=parseInt(r,10))}}))}return{formatName:e,formatOptions:n}},gn=t=>{const e={};return(n,i,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const o=i+JSON.stringify(s);let a=e[o];return a||(a=t(As(i),r),e[o]=a),a(n)}};class yl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ht.create("formatter"),this.options=t,this.formats={number:gn(((t,e)=>{const n=new Intl.NumberFormat(t,{...e});return t=>n.format(t)})),currency:gn(((t,e)=>{const n=new Intl.NumberFormat(t,{...e,style:"currency"});return t=>n.format(t)})),datetime:gn(((t,e)=>{const n=new Intl.DateTimeFormat(t,{...e});return t=>n.format(t)})),relativetime:gn(((t,e)=>{const n=new Intl.RelativeTimeFormat(t,{...e});return t=>n.format(t,e.range||"day")})),list:gn(((t,e)=>{const n=new Intl.ListFormat(t,{...e});return t=>n.format(t)}))},this.init(t)}init(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=gn(e)}format(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e?.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find((t=>t.indexOf(")")>-1))){const t=r.findIndex((t=>t.indexOf(")")>-1));r[0]=[r[0],...r.splice(1,t)].join(this.formatSeparator)}return r.reduce(((t,e)=>{const{formatName:r,formatOptions:s}=bl(e);if(this.formats[r]){let e=t;try{const o=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},a=o.locale||o.lng||i.locale||i.lng||n;e=this.formats[r](t,a,{...s,...i,...o})}catch(t){this.logger.warn(t)}return e}return this.logger.warn(`there was no format function for ${r}`),t}),t)}}const wl=(t,e)=>{void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)};class $l extends Ws{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=ht.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(t,e,n,i){const r={},s={},o={},a={};return t.forEach((t=>{let i=!0;e.forEach((e=>{const o=`${t}|${e}`;!n.reload&&this.store.hasResourceBundle(t,e)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===s[o]&&(s[o]=!0):(this.state[o]=1,i=!1,void 0===s[o]&&(s[o]=!0),void 0===r[o]&&(r[o]=!0),void 0===a[e]&&(a[e]=!0)))})),i||(o[t]=!0)})),(Object.keys(r).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(t,e,n){const i=t?.split("|"),r=i[0],s=i[1];e&&this.emit("failedLoading",r,s,e),!e&&n&&this.store.addResourceBundle(r,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const o={};this.queue.forEach((n=>{il(n.loaded,[r],s),wl(n,t),e&&n.errors.push(e),0===n.pendingCount&&!n.done&&(Object.keys(n.loaded).forEach((t=>{o[t]||(o[t]={});const e=n.loaded[t];e.length&&e.forEach((e=>{void 0===o[t][e]&&(o[t][e]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((t=>!t.done))}read(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:i,wait:r,callback:s});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const t=this.waitingReads.shift();this.read(t.lng,t.ns,t.fcName,t.tried,t.wait,t.callback)}o&&a&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,t,e,n,i+1,2*r,s)}),r):s(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(t,e,o);try{const n=a(t,e);n&&"function"==typeof n.then?n.then((t=>o(null,t))).catch(o):o(null,n)}catch(t){o(t)}}prepareLoading(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);const r=this.queueLoad(t,e,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach((t=>{this.loadOne(t)}))}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=t?.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,((n,s)=>{n&&this.logger.warn(`${e}loading namespace ${r} for language ${i} failed`,n),!n&&s&&this.logger.log(`${e}loaded namespace ${r} for language ${i}`,s),this.loaded(t,n,s)}))}saveMissing(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e))this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const a={...s,isUpdate:r},l=this.backend.create.bind(this.backend);if(l.length<6)try{let r;r=5===l.length?l(t,e,n,i,a):l(t,e,n,i),r&&"function"==typeof r.then?r.then((t=>o(null,t))).catch(o):o(null,r)}catch(t){o(t)}else l(t,e,n,i,o,a)}!t||!t[0]||this.store.addResource(t[0],e,n,i)}}}const Or=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if("object"==typeof t[1]&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"==typeof t[2]||"object"==typeof t[3]){const n=t[3]||t[2];Object.keys(n).forEach((t=>{e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Tr=t=>("string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),ps=()=>{},Cl=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((e=>{"function"==typeof t[e]&&(t[e]=t[e].bind(t))}))};class ns extends Ws{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Tr(t),this.services={},this.logger=ht,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((t=>{"function"==typeof n[t]&&(n[t]=n[t].bind(n))})),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout((()=>{this.init(t,e)}),0)}var n}init(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof e&&(n=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=Or();this.options={...i,...this.options,...Tr(e)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=t=>t?"function"==typeof t?new t:t:null;if(!this.options.isClone){let e;this.modules.logger?ht.init(r(this.modules.logger),this.options):ht.init(null,this.options),this.modules.formatter?e=this.modules.formatter:typeof Intl<"u"&&(e=yl);const n=new kr(this.options);this.store=new Cr(this.options.resources,this.options);const s=this.services;s.logger=ht,s.resourceStore=this.store,s.languageUtils=n,s.pluralResolver=new _l(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),e&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(s.formatter=r(e),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new vl(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new $l(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit(e,...i)})),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Os(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit(e,...i)})),this.modules.external.forEach((t=>{t.init&&t.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=ps),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.length>0&&"dev"!==t[0]&&(this.options.lng=t[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((e=>{this[e]=function(){return t.store[e](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((e=>{this[e]=function(){return t.store[e](...arguments),t}}));const s=Hn(),o=()=>{const t=(t,e)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(e),n(t,e)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return t(null,this.t.bind(this));this.changeLanguage(this.options.lng,t)};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),s}loadResources(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps;const n="string"==typeof t?t:this.language;if("function"==typeof t&&(e=t),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return e();const t=[],i=e=>{e&&"cimode"!==e&&this.services.languageUtils.toResolveHierarchy(e).forEach((e=>{"cimode"!==e&&t.indexOf(e)<0&&t.push(e)}))};n?i(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((t=>i(t))),this.options.preload&&this.options.preload.forEach((t=>i(t))),this.services.backendConnector.load(t,this.options.ns,(t=>{!t&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),e(t)}))}else e(null)}reloadResources(t,e,n){const i=Hn();return"function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=ps),this.services.backendConnector.reload(t,e,(t=>{i.resolve(),n(t)})),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&wo.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}setResolvedLanguage(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(t,e){var n=this;this.isLanguageChangingTo=t;const i=Hn();this.emit("languageChanging",t);const r=t=>{this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.resolvedLanguage=void 0,this.setResolvedLanguage(t)},s=(t,s)=>{s?(r(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,i.resolve((function(){return n.t(...arguments)})),e&&e(t,(function(){return n.t(...arguments)}))},o=e=>{!t&&!e&&this.services.languageDetector&&(e=[]);const n="string"==typeof e?e:this.services.languageUtils.getBestMatchFromCodes(e);n&&(this.language||r(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(t=>{s(t,n)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t):o(this.services.languageDetector.detect()),i}getFixedT(t,e,n){var i=this;const r=function(t,e){let s;if("object"!=typeof e){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];s=i.options.overloadTranslationOptionHandler([t,e].concat(a))}else s={...e};s.lng=s.lng||r.lng,s.lngs=s.lngs||r.lngs,s.ns=s.ns||r.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||r.keyPrefix);const c=i.options.keySeparator||".";let u;return u=s.keyPrefix&&Array.isArray(t)?t.map((t=>`${s.keyPrefix}${c}${t}`)):s.keyPrefix?`${s.keyPrefix}${c}${t}`:t,i.t(u,s)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=n,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(t,e)=>{const n=this.services.backendConnector.state[`${t}|${e}`];return-1===n||0===n||2===n};if(e.precheck){const t=e.precheck(this,s);if(void 0!==t)return t}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!i||s(r,t)))}loadNamespaces(t,e){const n=Hn();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((t=>{this.options.ns.indexOf(t)<0&&this.options.ns.push(t)})),this.loadResources((t=>{n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=Hn();"string"==typeof t&&(t=[t]);const i=this.options.preload||[],r=t.filter((t=>i.indexOf(t)<0&&this.services.languageUtils.isSupportedCode(t)));return r.length?(this.options.preload=i.concat(r),this.loadResources((t=>{n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=this.services&&this.services.languageUtils||new kr(Or());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(e.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ns(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new ns(i);return(void 0!==t.debug||void 0!==t.prefix)&&(r.logger=r.logger.clone(t)),["store","services","language"].forEach((t=>{r[t]=this[t]})),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n&&(r.store=new Cr(this.store.data,i),r.services.resourceStore=r.store),r.translator=new Os(r.services,i),r.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.emit(t,...n)})),r.init(i,e),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ie=ns.createInstance();Ie.createInstance=ns.createInstance,Ie.createInstance,Ie.dir,Ie.init,Ie.loadResources,Ie.reloadResources,Ie.use,Ie.changeLanguage,Ie.getFixedT,Ie.t,Ie.exists,Ie.setDefaultNamespace,Ie.hasLoadedNamespace,Ie.loadNamespaces,Ie.loadLanguages;const si=Ge(!0);class Sl{constructor(t){this.i18n=this.createInstance(t),this.isLoading=this.createLoadingInstance(t)}createInstance(t){const e=Ge(t);return t.on("initialized",(()=>{e.set(t)})),t.on("loaded",(()=>{e.set(t)})),t.on("added",(()=>e.set(t))),t.on("languageChanged",(()=>{e.set(t)})),e}createLoadingInstance(t){return t.on("loaded",(t=>{0!==Object.keys(t).length&&si.set(!1)})),t.on("failedLoading",(()=>{})),si}}const kl=t=>new Sl(t).i18n,Pl="Sponsored by",Al="PHOTOSHOP<br />to COMFYUI",Ol="Buy a Coffee ",Tl="V{{version}} - By NimaNzrii",Ll="Get Started",Il=" Request new features!",El="Have an Idea?",Dl=" Report bugs here!",Ml="Report",Rl=" Collaborate with us!",xl="Collab",Nl="Let's Collaborate!",zl="If you'd like to work together, feel free to reach out via email.",Fl="Email me at:",Bl="Preset",Vl="Positive Prompt:",Hl="Negative Prompt:",Ul="Slider Value",jl="Randomize",ql="IP Address",Wl="Reset",Gl="Apply",Kl="Image Processing",Yl="DownScale if Bigger:",Jl="Upscale if Smaller:",Ql="Fix Mask Edge (feather mask)",Zl="Force Resize Layer To Doc Size",Xl="Crop Padding (%):",eu="Padding will only work when is enabled.",tu="General",nu="Show Negative Prompt in AI Panel",su="Keep Bottom Controller Visible",iu="Keep Everything Visible (Reload Required)",ru="Disable All Animations",ou="Reload Plugin",au="Logs",lu="Render on PS Changes",uu="Crop to selection area.\n(set padding in settings)",fu="R-Click: Randomize",cu="Render",du="Add to Layer",hu="click empty Area",pu="Install",gu="Added New Features!",mu=" DO IT!",_u="Workflow",vu="Render Mode",bu="Render On Changes",yu="Prompt",wu=" Auto Randomize each time",$u="ComfyUI Photoshop Plugin Panel",Cu="Save as PNG",Su="Connect",ku="Send Latest IMG & MASK etc to comfy",Pu="ComfyUI IP Address",Au="make it empty to reset",Ou="DownScale if Bigger",Tu="Upscale if Smaller",Lu="is enabled.",Iu={sponsoredBy:Pl,title:Al,buyACoffee:Ol,version:Tl,getStarted:Ll,requestFeatures:Il,haveAnIdea:El,reportBugs:Dl,report:Ml,collaborate:Rl,collab:xl,modalTitle:Nl,modalDescription:zl,emailMe:Fl,preset:Bl,positivePrompt:Vl,negativePrompt:Hl,sliderValue:Ul,randomize:jl,ipAddress:ql,reset:Wl,apply:Gl,imageProcessing:Kl,downScaleIfBigger:Yl,upScaleIfSmaller:Jl,fixMaskEdge:Ql,forceResize:Zl,cropPadding:Xl,paddingInfo:eu,general:tu,showNegativeInput:nu,keepBottomControllerVisible:su,keepEverythingVisible:iu,disableAllAnimations:ru,reloadPlugin:ou,logs:au,renderOnPSChanges:lu,cropToSelectionArea:uu,randomizeHint:fu,render:cu,addToLayer:du,clickEmptyArea:hu,install:pu,newFeatures:gu,installHint:mu,workflow:_u,renderMode:vu,renderOnChanges:bu,prompt:yu,autoRandomizeHint:wu,panelTitle:$u,saveAsPng:Cu,connect:Su,sendLatestImgAndMask:ku,comfyUIIP:Pu,resetStatus:Au,downscaleIfBigger:Ou,upscaleIfSmaller:Tu,enabled:Lu},Eu="",Du="PHOTOSHOP<br /> COMFYUI",Mu=" ",Ru="{{version}} -  NimaNzrii ",xu="",Nu=" !",zu="?",Fu=" !",Bu="",Vu=" !",Hu="",Uu="!",ju="",qu=":",Wu="",Gu=":",Ku=":",Yu="",Ju="",Qu="IP ",Zu="",Xu="",ef="",tf=":",nf=":",sf=" ()",rf="",of=" (%):",af=" ",lf="",uf=" AI ",ff="",cf=" ()",df="",hf="",pf="",gf=" PS ",mf="\n()",_f=" : ",vf="",bf="",yf="",wf="",$f="!",Cf=" !",Sf="",kf="",Pf="",Af="",Of=" ",Tf="ComfyUI Photoshop ",Lf=" PNG",If="",Ef=" comfy",Df="ComfyUI IP ",Mf="",Rf="",xf="",Nf="",zf={sponsoredBy:Eu,title:Du,buyACoffee:Mu,version:Ru,getStarted:xu,requestFeatures:Nu,haveAnIdea:zu,reportBugs:Fu,report:Bu,collaborate:Vu,collab:Hu,modalTitle:Uu,modalDescription:ju,emailMe:qu,preset:Wu,positivePrompt:Gu,negativePrompt:Ku,sliderValue:Yu,randomize:Ju,ipAddress:Qu,reset:Zu,apply:Xu,imageProcessing:ef,downScaleIfBigger:tf,upScaleIfSmaller:nf,fixMaskEdge:sf,forceResize:rf,cropPadding:of,paddingInfo:af,general:lf,showNegativeInput:uf,keepBottomControllerVisible:ff,keepEverythingVisible:cf,disableAllAnimations:df,reloadPlugin:hf,logs:pf,renderOnPSChanges:gf,cropToSelectionArea:mf,randomizeHint:_f,render:vf,addToLayer:bf,clickEmptyArea:yf,install:wf,newFeatures:$f,installHint:Cf,workflow:Sf,renderMode:kf,renderOnChanges:Pf,prompt:Af,autoRandomizeHint:Of,panelTitle:Tf,saveAsPng:Lf,connect:If,sendLatestImgAndMask:Ef,comfyUIIP:Df,resetStatus:Mf,downscaleIfBigger:Rf,upscaleIfSmaller:xf,enabled:Nf},Ff="",Bf="PHOTOSHOP<br /> COMFYUI",Vf=" ",Hf="{{version}} -  NimaNzrii ",Uf="",jf=" !",qf="?",Wf=" !",Gf="",Kf=" !",Yf="",Jf="!",Qf="",Zf=":",Xf="",ec=":",tc=":",nc="",sc="",ic="IP ",rc="",oc="",ac="",lc=":",uc=":",fc=" ()",cc="",dc=" (%):",hc="",pc="",gc=" AI ",mc="",_c=" ()",vc="",bc="",yc="",wc=" PS ",$c="\n()",Cc=" : ",Sc="",kc="",Pc="",Ac="",Oc="!",Tc=" !",Lc="",Ic="",Ec="",Dc="",Mc=" ",Rc="ComfyUI Photoshop ",xc=" PNG",Nc="",zc=" comfy",Fc="ComfyUI IP ",Bc="",Vc="",Hc="",Uc="",jc={sponsoredBy:Ff,title:Bf,buyACoffee:Vf,version:Hf,getStarted:Uf,requestFeatures:jf,haveAnIdea:qf,reportBugs:Wf,report:Gf,collaborate:Kf,collab:Yf,modalTitle:Jf,modalDescription:Qf,emailMe:Zf,preset:Xf,positivePrompt:ec,negativePrompt:tc,sliderValue:nc,randomize:sc,ipAddress:ic,reset:rc,apply:oc,imageProcessing:ac,downScaleIfBigger:lc,upScaleIfSmaller:uc,fixMaskEdge:fc,forceResize:cc,cropPadding:dc,paddingInfo:hc,general:pc,showNegativeInput:gc,keepBottomControllerVisible:mc,keepEverythingVisible:_c,disableAllAnimations:vc,reloadPlugin:bc,logs:yc,renderOnPSChanges:wc,cropToSelectionArea:$c,randomizeHint:Cc,render:Sc,addToLayer:kc,clickEmptyArea:Pc,install:Ac,newFeatures:Oc,installHint:Tc,workflow:Lc,renderMode:Ic,renderOnChanges:Ec,prompt:Dc,autoRandomizeHint:Mc,panelTitle:Rc,saveAsPng:xc,connect:Nc,sendLatestImgAndMask:zc,comfyUIIP:Fc,resetStatus:Bc,downscaleIfBigger:Vc,upscaleIfSmaller:Hc,enabled:Uc},qc=":",Wc="<br /> COMFYUI",Gc="    ",Kc="{{version}} - NimaNzrii ",Yc="",Jc="   !",Qc=" ?",Zc="  !",Xc="",ed=" !",td="",nd="!",sd="    .",id=" :",rd="",od=" :",ad=" :",ld=" ",ud="",fd="IP ",cd="",dd="",hd=" ",pd=" :",gd=" :",md="   ( )",_d="     ",vd="  (%):",bd="     .",yd="",wd="AI    ",$d="   ",Cd="  ( )",Sd="  ",kd=" ",Pd="",Ad="PS   ",Od="  .\n(  )",Td=" : ",Ld="",Id=" ",Ed="  ",Dd="",Md="  !",Rd=" !",xd="",Nd=" ",zd="  ",Fd="",Bd="   ",Vd="ComfyUI   ",Hd="PNG ",Ud="",jd="    comfy ",qd="ComfyUI IP ",Wd=" ",Gd="   ",Kd="   ",Yd="",Jd={sponsoredBy:qc,title:Wc,buyACoffee:Gc,version:Kc,getStarted:Yc,requestFeatures:Jc,haveAnIdea:Qc,reportBugs:Zc,report:Xc,collaborate:ed,collab:td,modalTitle:nd,modalDescription:sd,emailMe:id,preset:rd,positivePrompt:od,negativePrompt:ad,sliderValue:ld,randomize:ud,ipAddress:fd,reset:cd,apply:dd,imageProcessing:hd,downScaleIfBigger:pd,upScaleIfSmaller:gd,fixMaskEdge:md,forceResize:_d,cropPadding:vd,paddingInfo:bd,general:yd,showNegativeInput:wd,keepBottomControllerVisible:$d,keepEverythingVisible:Cd,disableAllAnimations:Sd,reloadPlugin:kd,logs:Pd,renderOnPSChanges:Ad,cropToSelectionArea:Od,randomizeHint:Td,render:Ld,addToLayer:Id,clickEmptyArea:Ed,install:Dd,newFeatures:Md,installHint:Rd,workflow:xd,renderMode:Nd,renderOnChanges:zd,prompt:Fd,autoRandomizeHint:Bd,panelTitle:Vd,saveAsPng:Hd,connect:Ud,sendLatestImgAndMask:jd,comfyUIIP:qd,resetStatus:Wd,downscaleIfBigger:Gd,upscaleIfSmaller:Kd,enabled:Yd},Qd="",Zd="PHOTOSHOP<br /> COMFYUI ",Xd=" ",e1="{{version}} - NimaNzrii",t1="",n1=" !",s1="?",i1=" !",r1="",o1=" !",a1="",l1="!",u1="",f1=":",c1="",d1=":",h1=":",p1="",g1="",m1="IP",_1="",v1="",b1="",y1=":",w1=":",$1=" ()",C1="",S1=" (%):",k1="",P1="",A1="AI",O1="",T1=" ()",L1="",I1="",E1="",D1="PS",M1="\n()",R1=": ",x1="",N1="",z1="",F1="",B1="!",V1=" !",H1="",U1="",j1="",q1="",W1=" ",G1="ComfyUI Photoshop ",K1="PNG",Y1="",J1=" comfy ",Q1="ComfyUI IP ",Z1="",X1="",eh="",th="",nh={sponsoredBy:Qd,title:Zd,buyACoffee:Xd,version:e1,getStarted:t1,requestFeatures:n1,haveAnIdea:s1,reportBugs:i1,report:r1,collaborate:o1,collab:a1,modalTitle:l1,modalDescription:u1,emailMe:f1,preset:c1,positivePrompt:d1,negativePrompt:h1,sliderValue:p1,randomize:g1,ipAddress:m1,reset:_1,apply:v1,imageProcessing:b1,downScaleIfBigger:y1,upScaleIfSmaller:w1,fixMaskEdge:$1,forceResize:C1,cropPadding:S1,paddingInfo:k1,general:P1,showNegativeInput:A1,keepBottomControllerVisible:O1,keepEverythingVisible:T1,disableAllAnimations:L1,reloadPlugin:I1,logs:E1,renderOnPSChanges:D1,cropToSelectionArea:M1,randomizeHint:R1,render:x1,addToLayer:N1,clickEmptyArea:z1,install:F1,newFeatures:B1,installHint:V1,workflow:H1,renderMode:U1,renderOnChanges:j1,prompt:q1,autoRandomizeHint:W1,panelTitle:G1,saveAsPng:K1,connect:Y1,sendLatestImgAndMask:J1,comfyUIIP:Q1,resetStatus:Z1,downscaleIfBigger:X1,upscaleIfSmaller:eh,enabled:th},Ts={1:{name:"English",short:"en_US"},2:{name:"",short:"zh_CN"},3:{name:"",short:"zh_TW"},4:{name:"",short:"ko_KR"},5:{name:"",short:"ja_JP"}},sh=Object.entries(Ts).map((([t,e])=>({id:t,...e}))),Lr=sh.find((t=>t.short===Za)),Ls=Ee("pluginlang",Lr?Lr.id:"1"),ih=require("uxp").host.uiLocale,rh="en_US";function $o(t){var e;const n=(null==(e=Ts[t])?void 0:e.short)||ih,i=Object.values(Ts).some((t=>t.short===n))?n:rh;Ie.init({lng:i,resources:{en_US:{translation:Iu},zh_CN:{translation:zf},zh_TW:{translation:jc},ko_KR:{translation:Jd},ja_JP:{translation:nh}}})}Ls.subscribe((t=>{$o(t)}));const un=kl(Ie);$o(Qe(Ls));const ss=require("uxp").versions.plugin;function Ee(t,e,n=e){const i=localStorage.getItem(t);const r=Ge(i?JSON.parse(i):e);return r.subscribe((e=>{try{localStorage.setItem(t,JSON.stringify(e)),(""===e||null==e)&&e!=n&&(ne.warn(`Value for key "${t}" is invalid, resetting to default.`),r.set(n))}catch(e){ne.error(`Failed to update localStorage for key "${t}":`,e)}})),r}const Co=Ee("imageMode","cover"),On=Ee("positivePrompt","",""),Tn=Ee("negativePrompt","",""),Nt=Ee("sliderValue","32","0"),Is=Ee("cropPad","32",""),Dt=Ee("seed","1379","1"),bi=Ee("maxRes","1024","1024"),yi=Ee("minRes","512","512"),wi=Ee("fixMaskEdge",!0,!0),$i=Ee("showNegativeInput",!1),Ln=Ee("NoAnim",!1),on=Ee("cropToBounding",!1),Es=Ee("StaticPanel",!0),_s=Ee("DontHideController",!0),Ci=Ee("ForceResize",!1),Si=Ee("bgImg",vo),is=Ge(!0),Xt=Ge(!0),Un=Ge(!0),ki=Ge(!1),Pi=Ge(!1),Yn=Ge(!1),Jn=Ge(!1),So=Ge(""),rt=Ge("http://127.0.0.1:8188"),Ds=Ge(null),ko=Ge({status:"Not Connected",color:"red"});function St(t,e){let n=null;t instanceof MouseEvent?n=t.currentTarget:t instanceof CustomEvent&&(n=t.detail.target||t.target),n instanceof HTMLElement?(Ds.set(n),So.set(e)):Ds.set(null)}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * 
 *    1. PS2025-2026
 *    2. rgthree,rgthree
 *    4.AUTO Randomize eache timerandercomfyui
 *    
 *    5.PSPNG5400X5400JPG
 *    6.comfyui14
 *    4.comfyui to ps BASE64
 *    8.
 *    9.
 */var Ji,Re,pe,ge,ct,Ti,Xi,Eo,Ro,bn,ls,Ze={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},In={duration:.5,overwrite:!1,delay:0},nt=1e8,ce=1/nt,Ai=2*Math.PI,oh=Ai/4,ah=0,Ao=Math.sqrt,lh=Math.cos,uh=Math.sin,Te=function(t){return"string"==typeof t},ye=function(t){return"function"==typeof t},kt=function(t){return"number"==typeof t},Qi=function(t){return typeof t>"u"},vt=function(t){return"object"==typeof t},He=function(t){return!1!==t},Zi=function(){return typeof window<"u"},gs=function(t){return ye(t)||Te(t)},Oo="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},xe=Array.isArray,Oi=/(?:-?\.?\d|\.)+/gi,To=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ii=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Lo=/[+-]=-?[.\d]+/,Io=/[^,'"\[\]\s]+/gi,fh=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xe={},Ms={},Do=function(t){return(Ms=an(t,Xe))&&We},er=function(t,e){},rs=function(t,e){return!e&&void 0},Mo=function(t,e){return t&&(Xe[t]=e)&&Ms&&(Ms[t]=e)||Xe},os=function(){return 0},ch={suppressEvents:!0,isStart:!0,kill:!1},vs={suppressEvents:!0,kill:!1},dh={suppressEvents:!0},tr={},zt=[],Li={},Ke={},ri={},Ir=30,bs=[],nr="",sr=function(t){var e,n,i=t[0];if(vt(i)||ye(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=bs.length;n--&&!bs[n].targetTest(i););e=bs[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ra(t[n],e)))||t.splice(n,1);return t},tn=function(t){return t._gsap||sr(st(t))[0]._gsap},xo=function(t,e,n){return(n=t[e])&&ye(n)?t[e]():Qi(n)&&t.getAttribute&&t.getAttribute(e)||n},Ue=function(t,e){return(t=t?.split(",")).forEach(e)||t},Se=function(t){return Math.round(1e5*t)/1e5||0},Ae=function(t){return Math.round(1e7*t)/1e7||0},$n=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},hh=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Rs=function(){var t,e,n=zt.length,i=zt.slice(0);for(Li={},zt.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},No=function(t,e,n,i){zt.length&&!Re&&Rs(),t.render(e,n,Re&&e<0&&(t._initted||t._startAt)),zt.length&&!Re&&Rs()},zo=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Io).length<2?e:Te(t)?t.trim():t},Fo=function(t){return t},it=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},ph=function(t){return function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}},an=function(t,e){for(var n in e)t[n]=e[n];return t},Er=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=vt(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},xs=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},Qn=function(t){var e=t.parent||ge,n=t.keyframes?ph(xe(t.keyframes)):it;if(He(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},gh=function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0},Bo=function(t,e,n,i,r){var s,o=t[i];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e},Gs=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},Ht=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},nn=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},mh=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Ii=function(t,e,n,i){return t._startAt&&(Re?t._startAt.revert(vs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},_h=function t(e){return!e||e._ts&&t(e.parent)},Dr=function(t){return t._repeat?En(t._tTime,t=t.duration()+t._rDelay)*t:0},En=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Ns=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ks=function(t){return t._end=Ae(t._start+(t._tDur/Math.abs(t._ts||t._rts||ce)||0))},Ys=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Ae(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ks(t),n._dirty||nn(n,t)),t},Vo=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Ns(t.rawTime(),e),(!e._dur||ds(0,e.totalDuration(),n)-e._tTime>ce)&&e.render(n,!0)),nn(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-ce}},dt=function(t,e,n,i){return e.parent&&Ht(e),e._start=Ae((kt(n)?n:n||t!==ge?et(t,n,e):t._time)+e._delay),e._end=Ae(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Bo(t,e,"_first","_last",t._sort?"_start":0),Ei(e)||(t._recent=e),i||Vo(t,e),t._ts<0&&Ys(t,t._tTime),t},Ho=function(t,e){return(Xe.ScrollTrigger||er("scrollTrigger",e))&&Xe.ScrollTrigger.create(e,t)},Uo=function(t,e,n,i,r){return rr(t,e,r),t._initted?!n&&t._pt&&!Re&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Ro!==Ye.frame?(zt.push(t),t._lazy=[r,i],1):void 0:1},vh=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Ei=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},bh=function(t,e,n,i){var r,s,o,a=t.ratio,l=e<0||!e&&(!t._start&&vh(t)&&(t._initted||!Ei(t))||(t._ts<0||t._dp._ts<0)&&!Ei(t))?0:1,c=t._rDelay,u=0;if(c&&t._repeat&&(u=ds(0,t._tDur,e),s=En(u,c),t._yoyo&&1&s&&(l=1-l),s!==En(t._tTime,c)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||Re||i||t._zTime===ce||!e&&t._zTime){if(!t._initted&&Uo(t,e,i,n,u))return;for(o=t._zTime,t._zTime=e||(n?ce:0),n||(n=e&&!o),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&Ii(t,e,n,!0),t._onUpdate&&!n&&Je(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Je(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Ht(t,1),!n&&!Re&&(Je(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},yh=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}},Dn=function(t,e,n,i){var r=t._repeat,s=Ae(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:Ae(s*(r+1)+t._rDelay*r):s,o>0&&!i&&Ys(t,t._tTime=t._tDur*o),t.parent&&Ks(t),n||nn(t.parent,t),t},Mr=function(t){return t instanceof ze?nn(t):Dn(t,t._dur)},wh={_start:0,endTime:os,totalDuration:os},et=function t(e,n,i){var r,s,o,a=e.labels,l=e._recent||wh,c=e.duration()>=nt?l.endTime(!1):e._dur;return Te(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(r<0?l:i).totalDuration()/100:1)):r<0?(n in a||(a[n]=c),a[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),o&&i&&(s=s/100*(xe(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},Zn=function(t,e,n){var i,r,s=kt(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=n,t){for(i=a,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=He(r.vars.inherit)&&r.parent;a.immediateRender=He(i.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new ke(e[0],a,e[o+1])},Kt=function(t,e){return t||0===t?e(t):e},ds=function(t,e,n){return n<t?t:n>e?e:n},Me=function(t,e){return Te(t)&&(e=fh.exec(t))?e[1]:""},$h=function(t,e,n){return Kt(n,(function(n){return ds(t,e,n)}))},Di=[].slice,jo=function(t,e){return t&&vt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&vt(t[0]))&&!t.nodeType&&t!==ct},Ch=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return Te(t)&&!e||jo(t,1)?(i=n).push.apply(i,st(t)):n.push(t)}))||n},st=function(t,e,n){return pe&&!e&&pe.selector?pe.selector(t):!Te(t)||n||!Ti&&Mn()?xe(t)?Ch(t,n):jo(t)?Di.call(t,0):t?[t]:[]:Di.call((e||Xi).querySelectorAll(t),0)},Mi=function(t){return t=st(t)[0]||rs("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return st(e,n.querySelectorAll?n:n===t?rs("Invalid scope")||Xi.createElement("div"):t)}},qo=function(t){return t.sort((function(){return.5-Math.random()}))},Wo=function(t){if(ye(t))return t;var e=vt(t)?t:{each:t},n=sn(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,l=e.axis,c=i,u=i;return Te(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(c=i[0],u=i[1]),function(t,o,d){var p,h,f,g,m,v,$,y,_,w=(d||e).length,b=s[w];if(!b){if(!(_="auto"===e.grid?0:(e.grid||[1,nt])[1])){for($=-nt;$<($=d[_++].getBoundingClientRect().left)&&_<w;);_<w&&_--}for(b=s[w]=[],p=a?Math.min(_,w)*c-.5:i%_,h=_===nt?0:a?w*u/_-.5:i/_|0,$=0,y=nt,v=0;v<w;v++)f=v%_-p,g=h-(v/_|0),b[v]=m=l?Math.abs("y"===l?g:f):Ao(f*f+g*g),m>$&&($=m),m<y&&(y=m);"random"===i&&qo(b),b.max=$-y,b.min=y,b.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(_>w?w-1:l?"y"===l?w/_:_:Math.max(_,w/_))||0)*("edges"===i?-1:1),b.b=w<0?r-w:r,b.u=Me(e.amount||e.each)||0,n=n&&w<0?na(n):n}return w=(b[t]-b.min)/b.max||0,Ae(b.b+(n?n(w):w)*b.v)+b.u}},Ri=function(t){var e=Math.pow(10,((t+"")?.split(".")[1]||"").length);return function(n){var i=Ae(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(kt(n)?0:Me(n))}},Go=function(t,e){var n,i,r=xe(t);return!r&&vt(t)&&(n=r=t.radius||nt,t.values?(t=st(t.values),(i=!kt(t[0]))&&(n*=n)):t=Ri(t.increment)),Kt(e,r?ye(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),l=nt,c=0,u=t.length;u--;)i?r=(r=t[u].x-o)*r+(s=t[u].y-a)*s:r=Math.abs(t[u]-o),r<l&&(l=r,c=u);return c=!n||l<=n?t[c]:e,i||c===e||kt(e)?c:c+Me(e)}:Ri(t))},Ko=function(t,e,n,i){return Kt(xe(t)?!e:!0===n?!!(n=0):!i,(function(){return xe(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))},Sh=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},kh=function(t,e){return function(n){return t(parseFloat(n))+(e||Me(n))}},Ph=function(t,e,n){return Jo(t,e,0,1,n)},Yo=function(t,e,n){return Kt(n,(function(n){return t[~~e(n)]}))},Ah=function t(e,n,i){var r=n-e;return xe(e)?Yo(e,t(0,e.length),n):Kt(i,(function(t){return(r+(t-e)%r)%r+e}))},Oh=function t(e,n,i){var r=n-e,s=2*r;return xe(e)?Yo(e,t(0,e.length-1),n):Kt(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},as=function(t){for(var e,n,i,r,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?Io:Oi),o+=t.substr(s,e-s)+Ko(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},Jo=function(t,e,n,i,r){var s=e-t,o=i-n;return Kt(r,(function(e){return n+((e-t)/s*o||0)}))},Th=function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,a,l,c,u,d=Te(e),p={};if(!0===i&&(r=1)&&(i=null),d)e={p:e},n={p:n};else if(xe(e)&&!xe(n)){for(l=[],c=e.length,u=c-2,a=1;a<c;a++)l.push(t(e[a-1],e[a]));c--,s=function(t){t*=c;var e=Math.min(u,~~t);return l[e](t-e)},i=n}else r||(e=an(xe(e)?[]:{},e));if(!l){for(o in n)ir.call(p,e,o,"get",n[o]);s=function(t){return lr(t,p)||(d?e.p:e)}}}return Kt(i,s)},Rr=function(t,e,n){var i,r,s,o=t.labels,a=nt;for(i in o)(r=o[i]-e)<0==!!n&&r&&a>(r=Math.abs(r))&&(s=i,a=r);return s},Je=function(t,e,n){var i,r,s,o=t.vars,a=o[e],l=pe,c=t._ctx;if(a)return i=o[e+"Params"],r=o.callbackScope||t,n&&zt.length&&Rs(),c&&(pe=c),s=i?a.apply(r,i):a.call(r),pe=l,s},qn=function(t){return Ht(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Re),t.progress()<1&&Je(t,"onInterrupt"),t},Qo=[],Zo=function(t){if(t)if(t=!t.name&&t.default||t,Zi()||t.headless){var e=t.name,n=ye(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:os,render:lr,add:ir,kill:qh,modifier:jh,rawVars:0},s={targetTest:0,get:0,getSetter:ar,aliases:{},register:0};if(Mn(),t!==i){if(Ke[e])return;it(i,it(xs(t,r),s)),an(i.prototype,an(r,xs(t,s))),Ke[i.prop=e]=i,t.targetTest&&(bs.push(i),tr[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Mo(e,i),t.register&&t.register(We,i,je)}else Qo.push(t)},ue=255,Wn={aqua:[0,ue,ue],lime:[0,ue,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ue],navy:[0,0,128],white:[ue,ue,ue],olive:[128,128,0],yellow:[ue,ue,0],orange:[ue,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ue,0,0],pink:[ue,192,203],cyan:[0,ue,ue],transparent:[ue,ue,ue,0]},oi=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*ue+.5|0},Xo=function(t,e,n){var i,r,s,o,a,l,c,u,d,p,h=t?kt(t)?[t>>16,t>>8&ue,t&ue]:0:Wn.black;if(!h){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Wn[t])h=Wn[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(h=parseInt(t.substr(1,6),16))>>16,h>>8&ue,h&ue,parseInt(t.substr(7),16)/255];h=[(t=parseInt(t.substr(1),16))>>16,t>>8&ue,t&ue]}else if("hsl"===t.substr(0,3))if(h=p=t.match(Oi),e){if(~t.indexOf("="))return h=t.match(To),n&&h.length<4&&(h[3]=1),h}else o=+h[0]%360/360,a=+h[1]/100,i=2*(l=+h[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),h.length>3&&(h[3]*=1),h[0]=oi(o+1/3,i,r),h[1]=oi(o,i,r),h[2]=oi(o-1/3,i,r);else h=t.match(Oi)||Wn.transparent;h=h.map(Number)}return e&&!p&&(i=h[0]/ue,r=h[1]/ue,s=h[2]/ue,l=((c=Math.max(i,r,s))+(u=Math.min(i,r,s)))/2,c===u?o=a=0:(d=c-u,a=l>.5?d/(2-c-u):d/(c+u),o=c===i?(r-s)/d+(r<s?6:0):c===r?(s-i)/d+2:(i-r)/d+4,o*=60),h[0]=~~(o+.5),h[1]=~~(100*a+.5),h[2]=~~(100*l+.5)),n&&h.length<4&&(h[3]=1),h},ea=function(t){var e=[],n=[],i=-1;return t?.split(Ft).forEach((function(t){var r=t.match(vn)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},xr=function(t,e,n){var i,r,s,o,a="",l=(t+a).match(Ft),c=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map((function(t){return(t=Xo(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(s=ea(t),(i=n.c).join(a)!==s.c.join(a)))for(r=t.replace(Ft,"1")?.split(vn),o=r.length-1;u<o;u++)a+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(r=t?.split(Ft),o=r.length-1;u<o;u++)a+=r[u]+l[u];return a+r[o]},Ft=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Wn)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Lh=/hsl[a]?\(/,ta=function(t){var e,n=t.join(" ");if(Ft.lastIndex=0,Ft.test(n))return e=Lh.test(n),t[1]=xr(t[1],e),t[0]=xr(t[0],e,ea(t[1])),!0},Ye=function(){var t,e,n,i,r,s,o=Date.now,a=500,l=33,c=o(),u=c,d=1e3/240,p=d,h=[],f=function n(f){var g,m,v,$,y=o()-u,_=!0===f;if((y>a||y<0)&&(c+=y-l),((g=(v=(u+=y)-c)-p)>0||_)&&($=++i.frame,r=v-1e3*i.time,i.time=v/=1e3,p+=g+(g>=d?4:d-g),m=1),_||(t=e(n)),m)for(s=0;s<h.length;s++)h[s](v,r,$,f)};return i={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(t){return r/(1e3/(t||60))},wake:function(){Eo&&(!Ti&&Zi()&&(ct=Ti=window,Xi=ct.document||{},Xe.gsap=We,(ct.gsapVersions||(ct.gsapVersions=[])).push(We.version),Do(Ms||ct.GreenSockGlobals||!ct.gsap&&ct||{}),Qo.forEach(Zo)),n=typeof requestAnimationFrame<"u"&&requestAnimationFrame,t&&i.sleep(),e=n||function(t){return setTimeout(t,p-1e3*i.time+1|0)},ls=1,f(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),ls=0,e=os},lagSmoothing:function(t,e){a=t||1/0,l=Math.min(e||33,a)},fps:function(t){d=1e3/(t||240),p=1e3*i.time+d},add:function(t,e,n){var r=e?function(e,n,s,o){t(e,n,s,o),i.remove(r)}:t;return i.remove(t),h[n?"unshift":"push"](r),Mn(),r},remove:function(t,e){~(e=h.indexOf(t))&&h.splice(e,1)&&s>=e&&s--},_listeners:h}}(),Mn=function(){return!ls&&Ye.wake()},re={},Ih=/^[\d.\-M][\d.\-,\s]/,Eh=/["']/g,Dh=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3)?.split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],e=a!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(Eh,"").trim():+i,o=n.substr(e+1).trim();return r},Mh=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)},Rh=function(t){var e=(t+"")?.split("("),n=re[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Dh(e[1])]:Mh(t)?.split(",").map(zo)):re._CE&&Ih.test(t)?re._CE("",t):n},na=function(t){return function(e){return 1-t(1-e)}},sa=function t(e,n){for(var i,r=e._first;r;)r instanceof ze?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},sn=function(t,e){return t&&(ye(t)?t:re[t]||Rh(t))||e},fn=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return Ue(t,(function(t){for(var e in re[t]=Xe[t]=s,re[r=t.toLowerCase()]=n,s)re[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=re[t+"."+e]=s[e]})),s},ia=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},ai=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),o=s/Ai*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*uh((t-o)*s)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:ia(a);return s=Ai/s,l.config=function(n,i){return t(e,n,i)},l},li=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:ia(i);return r.config=function(n){return t(e,n)},r};Ue("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;fn(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),re.Linear.easeNone=re.none=re.Linear.easeIn,fn("Elastic",ai("in"),ai("out"),ai()),function(t,e){var n=1/e,i=function(i){return i<n?t*i*i:i<.7272727272727273?t*Math.pow(i-1.5/e,2)+.75:i<.9090909090909092?t*(i-=2.25/e)*i+.9375:t*Math.pow(i-2.625/e,2)+.984375};fn("Bounce",(function(t){return 1-i(1-t)}),i)}(7.5625,2.75),fn("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),fn("Circ",(function(t){return-(Ao(1-t*t)-1)})),fn("Sine",(function(t){return 1===t?1:1-lh(t*oh)})),fn("Back",li("in"),li("out"),li()),re.SteppedEase=re.steps=Xe.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,s=1-ce;return function(t){return((i*ds(0,s,t)|0)+r)*n}}},In.ease=re["quad.out"],Ue("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return nr+=t+","+t+"Params,"}));var ra=function(t,e){this.id=ah++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:xo,this.set=e?e.getSetter:ar},us=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Dn(this,+t.duration,1,1),this.data=t.data,pe&&(this._ctx=pe,pe.data.push(this)),ls||Ye.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Dn(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Mn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ys(this,t),!n._dp||n.parent||Vo(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&dt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===ce||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),No(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Dr(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Dr(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?En(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return this._rts===-ce?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?Ns(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-ce?0:this._rts,this.totalTime(ds(-Math.abs(this._delay),this._tDur,n),!1!==e),Ks(this),mh(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ce&&(this._tTime-=ce)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&dt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(He(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ns(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=dh);var e=Re;return Re=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),Re=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Mr(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Mr(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(et(this,t),He(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,He(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-ce:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ce,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-ce))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=ye(t)?t:Fo,r=function(){var t=e.then;e.then=null,ye(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){qn(this)},t}();it(us.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ce,_prom:0,_ps:!1,_rts:1});var ze=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=He(e.sortChildren),ge&&dt(e.parent||ge,$t(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&Ho($t(i),e.scrollTrigger),i}Po(e,t);var n=e.prototype;return n.to=function(t,e,n){return Zn(0,arguments,this),this},n.from=function(t,e,n){return Zn(1,arguments,this),this},n.fromTo=function(t,e,n,i){return Zn(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Qn(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ke(t,e,et(this,n),1),this},n.call=function(t,e,n){return dt(this,ke.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new ke(t,n,et(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,o){return n.runBackwards=1,Qn(n).immediateRender=He(n.immediateRender),this.staggerTo(t,e,n,i,r,s,o)},n.staggerFromTo=function(t,e,n,i,r,s,o,a){return i.startAt=n,Qn(i).immediateRender=He(i.immediateRender),this.staggerTo(t,e,i,r,s,o,a)},n.render=function(t,e,n){var i,r,s,o,a,l,c,u,d,p,h,f,g=this._time,m=this._dirty?this.totalDuration():this._tDur,v=this._dur,$=t<=0?0:Ae(t),y=this._zTime<0!=t<0&&(this._initted||!v);if(this!==ge&&$>m&&t>=0&&($=m),$!==this._tTime||n||y){if(g!==this._time&&v&&($+=this._time-g,t+=this._time-g),i=$,d=this._start,l=!(u=this._ts),y&&(v||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(h=this._yoyo,a=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(i=Ae($%a),$===m?(o=this._repeat,i=v):((o=~~($/a))&&o===$/a&&(i=v,o--),i>v&&(i=v)),p=En(this._tTime,a),!g&&this._tTime&&p!==o&&this._tTime-p*a-this._dur<=0&&(p=o),h&&1&o&&(i=v-i,f=1),o!==p&&!this._lock){var _=h&&1&p,w=_===(h&&1&o);if(o<p&&(_=!_),g=_?0:$%v?v:$,this._lock=1,this.render(g||(f?0:Ae(o*a)),e,!v)._lock=0,this._tTime=$,!e&&this.parent&&Je(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),g&&g!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,m=this._tDur,w&&(this._lock=2,g=_?v:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;sa(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&((c=yh(this,Ae(g),Ae(i)))&&($-=i-(i=c._start))),this._tTime=$,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,g=0),!g&&i&&!e&&!o&&(Je(this,"onStart"),this._tTime!==$))return this;if(i>=g&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,s&&($+=this._zTime=-ce);break}}r=s}else{r=this._last;for(var b=t<0?t:i;r;){if(s=r._prev,(r._act||b<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(b-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(b-r._start)*r._ts,e,n||Re&&(r._initted||r._startAt)),i!==this._time||!this._ts&&!l){c=0,s&&($+=this._zTime=b?-ce:ce);break}}r=s}}if(c&&!e&&(this.pause(),c.render(i>=g?0:-ce)._zTime=i>=g?1:-1,this._ts))return this._start=d,Ks(this),this.render(t,e,n);this._onUpdate&&!e&&Je(this,"onUpdate",!0),($===m&&this._tTime>=this.totalDuration()||!$&&g)&&(d===this._start||Math.abs(u)!==Math.abs(this._ts))&&(this._lock||((t||!v)&&($===m&&this._ts>0||!$&&this._ts<0)&&Ht(this,1),!e&&(!(t<0)||g)&&($||g||!m)&&(Je(this,$===m&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!($<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(kt(e)||(e=et(this,e,t)),!(t instanceof us)){if(xe(t))return t.forEach((function(t){return n.add(t,e)})),this;if(Te(t))return this.addLabel(t,e);if(!ye(t))return this;t=ke.delayedCall(0,t)}return this!==t?dt(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-nt);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof ke?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Te(t)?this.removeLabel(t):ye(t)?this.killTweensOf(t):(Gs(this,t),t===this._recent&&(this._recent=this._last),nn(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ae(Ye.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=et(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=ke.delayedCall(0,e||os,n);return i.data="isPause",this._hasPause=1,dt(this,i,et(this,t))},n.removePause=function(t){var e=this._first;for(t=et(this,t);e;)e._start===t&&"isPause"===e.data&&Ht(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)Mt!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=st(t),s=this._first,o=kt(e);s;)s instanceof ke?hh(s._targets,r)&&(o?(!Mt||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=et(i,t),s=e,o=s.startAt,a=s.onStart,l=s.onStartParams,c=s.immediateRender,u=ke.to(i,it({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||ce,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale());u._dur!==t&&Dn(u,t,0,1).render(u._time,!0,!0),n=1}a&&a.apply(u,l||[])}},e));return c?u.render(0):u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,it({startAt:{time:et(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Rr(this,et(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Rr(this,et(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+ce)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return nn(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),nn(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,o=s._last,a=nt;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,dt(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=e;Dn(s,s===ge&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(ge._ts&&(No(ge,Ns(t,ge)),Ro=Ye.frame),Ye.frame>=Ir){Ir+=Ze.autoSleep||120;var e=ge._first;if((!e||!e._ts)&&Ze.autoSleep&&Ye._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ye.sleep()}}},e}(us);it(ze.prototype,{_lock:0,_hasPause:0,_forcing:0});var Mt,xi,xh=function(t,e,n,i,r,s,o){var a,l,c,u,d,p,h,f,g=new je(this._pt,t,e,0,1,ca,null,r),m=0,v=0;for(g.b=n,g.e=i,n+="",(h=~(i+="").indexOf("random("))&&(i=as(i)),s&&(s(f=[n,i],t,e),n=f[0],i=f[1]),l=n.match(ii)||[];a=ii.exec(i);)u=a[0],d=i.substring(m,a.index),c?c=(c+1)%5:"rgba("===d.substr(-5)&&(c=1),u!==l[v++]&&(p=parseFloat(l[v-1])||0,g._pt={_next:g._pt,p:d||1===v?d:",",s:p,c:"="===u.charAt(1)?$n(p,u)-p:parseFloat(u)-p,m:c&&c<4?Math.round:0},m=ii.lastIndex);return g.c=m<i.length?i.substring(m,i.length):"",g.fp=o,(Lo.test(i)||h)&&(g.e=0),this._pt=g,g},ir=function(t,e,n,i,r,s,o,a,l,c){ye(i)&&(i=i(r||0,t,s));var u,d=t[e],p="get"!==n?n:ye(d)?l?t[e.indexOf("set")||!ye(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,h=ye(d)?l?Vh:ua:or;if(Te(i)&&(~i.indexOf("random(")&&(i=as(i)),"="===i.charAt(1)&&(((u=$n(p,i)+(Me(p)||0))||0===u)&&(i=u))),!c||p!==i||xi)return isNaN(p*i)||""===i?(!d&&!(e in t)&&er(e,i),xh.call(this,t,e,p,i,h,a||Ze.stringFilter,l)):(u=new je(this._pt,t,e,+p||0,i-(p||0),"boolean"==typeof d?Uh:fa,0,h),l&&(u.fp=l),o&&u.modifier(o,this,t),this._pt=u)},Nh=function(t,e,n,i,r){if(ye(t)&&(t=Xn(t,r,e,n,i)),!vt(t)||t.style&&t.nodeType||xe(t)||Oo(t))return Te(t)?Xn(t,r,e,n,i):t;var s,o={};for(s in t)o[s]=Xn(t[s],r,e,n,i);return o},oa=function(t,e,n,i,r,s){var o,a,l,c;if(Ke[t]&&!1!==(o=new Ke[t]).init(r,o.rawVars?e[t]:Nh(e[t],i,r,s,n),n,i,s)&&(n._pt=a=new je(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==bn))for(l=n._ptLookup[n._targets.indexOf(r)],c=o._props.length;c--;)l[o._props[c]]=a;return o},rr=function t(e,n,i){var r,s,o,a,l,c,u,d,p,h,f,g,m,v=e.vars,$=v.ease,y=v.startAt,_=v.immediateRender,w=v.lazy,b=v.onUpdate,x=v.runBackwards,C=v.yoyoEase,A=v.keyframes,T=v.autoRevert,k=e._dur,S=e._startAt,O=e._targets,I=e.parent,L=I&&"nested"===I.data?I.vars.targets:O,M="auto"===e._overwrite&&!Ji,E=e.timeline;if(E&&(!A||!$)&&($="none"),e._ease=sn($,In.ease),e._yEase=C?na(sn(!0===C?$:C,In.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!E&&!!v.runBackwards,!E||A&&!v.stagger){if(g=(d=O[0]?tn(O[0]).harness:0)&&v[d.prop],r=xs(v,tr),S&&(S._zTime<0&&S.progress(1),n<0&&x&&_&&!T?S.render(-1,!0):S.revert(x&&k?vs:ch),S._lazy=0),y){if(Ht(e._startAt=ke.set(O,it({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!S&&He(w),startAt:null,delay:0,onUpdate:b&&function(){return Je(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Re||!_&&!T)&&e._startAt.revert(vs),_&&k&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(x&&k&&!S)if(n&&(_=!1),o=it({overwrite:!1,data:"isFromStart",lazy:_&&!S&&He(w),immediateRender:_,stagger:0,parent:I},r),g&&(o[d.prop]=g),Ht(e._startAt=ke.set(O,o)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Re?e._startAt.revert(vs):e._startAt.render(-1,!0)),e._zTime=n,_){if(!n)return}else t(e._startAt,ce,ce);for(e._pt=e._ptCache=0,w=k&&He(w)||w&&!k,s=0;s<O.length;s++){if(u=(l=O[s])._gsap||sr(O)[s]._gsap,e._ptLookup[s]=h={},Li[u.id]&&zt.length&&Rs(),f=L===O?s:L.indexOf(l),d&&!1!==(p=new d).init(l,g||r,e,f,L)&&(e._pt=a=new je(e._pt,l,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){h[t]=a})),p.priority&&(c=1)),!d||g)for(o in r)Ke[o]&&(p=oa(o,r,e,f,l,L))?p.priority&&(c=1):h[o]=a=ir.call(e,l,o,"get",r[o],f,L,0,v.stringFilter);e._op&&e._op[s]&&e.kill(l,e._op[s]),M&&e._pt&&(Mt=e,ge.killTweensOf(l,h,e.globalTime(n)),m=!e.parent,Mt=0),e._pt&&w&&(Li[u.id]=1)}c&&da(e),e._onInit&&e._onInit(e)}e._onUpdate=b,e._initted=(!e._op||e._pt)&&!m,A&&n<=0&&E.render(nt,!0,!0)},zh=function(t,e,n,i,r,s,o,a){var l,c,u,d,p=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!p)for(p=t._ptCache[e]=[],u=t._ptLookup,d=t._targets.length;d--;){if((l=u[d][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return xi=1,t.vars[e]="+=0",rr(t,o),xi=0,a?rs(e+" not eligible for reset"):1;p.push(l)}for(d=p.length;d--;)(l=(c=p[d])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+s*l.c:i,l.c=n-l.s,c.e&&(c.e=Se(n)+Me(c.e)),c.b&&(c.b=l.s+Me(c.b))},Fh=function(t,e){var n,i,r,s,o=t[0]?tn(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in n=an({},e),a)if(i in n)for(s=a[i]?.split(","),r=s.length;r--;)n[s[r]]=n[i];return n},Bh=function(t,e,n,i){var r,s,o=e.ease||i||"power1.inOut";if(xe(e))s=n[t]||(n[t]=[]),e.forEach((function(t,n){return s.push({t:n/(e.length-1)*100,v:t,e:o})}));else for(r in e)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},Xn=function(t,e,n,i,r){return ye(t)?t.call(e,n,i,r):Te(t)&&~t.indexOf("random(")?as(t):t},aa=nr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",la={};Ue(aa+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return la[t]=1}));var ke=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var o,a,l,c,u,d,p,h,f=(s=t.call(this,r?n:Qn(n))||this).vars,g=f.duration,m=f.delay,v=f.immediateRender,$=f.stagger,y=f.overwrite,_=f.keyframes,w=f.defaults,b=f.scrollTrigger,x=f.yoyoEase,C=n.parent||ge,A=(xe(e)||Oo(e)?kt(e[0]):"length"in n)?[e]:st(e);if(s._targets=A.length?sr(A):rs("GSAP target "+e+" not found. https://gsap.com",!Ze.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=y,_||$||gs(g)||gs(m)){if(n=s.vars,(o=s.timeline=new ze({data:"nested",defaults:w||{},targets:C&&"nested"===C.data?C.vars.targets:A})).kill(),o.parent=o._dp=$t(s),o._start=0,$||gs(g)||gs(m)){if(c=A.length,p=$&&Wo($),vt($))for(u in $)~aa.indexOf(u)&&(h||(h={}),h[u]=$[u]);for(a=0;a<c;a++)(l=xs(n,la)).stagger=0,x&&(l.yoyoEase=x),h&&an(l,h),d=A[a],l.duration=+Xn(g,$t(s),a,d,A),l.delay=(+Xn(m,$t(s),a,d,A)||0)-s._delay,!$&&1===c&&l.delay&&(s._delay=m=l.delay,s._start+=m,l.delay=0),o.to(d,l,p?p(a,d,A):0),o._ease=re.none;o.duration()?g=m=0:s.timeline=0}else if(_){Qn(it(o.vars.defaults,{ease:"none"})),o._ease=sn(_.ease||n.ease||"none");var T,k,S,O=0;if(xe(_))_.forEach((function(t){return o.to(A,t,">")})),o.duration();else{for(u in l={},_)"ease"===u||"easeEach"===u||Bh(u,_[u],l,_.easeEach);for(u in l)for(T=l[u].sort((function(t,e){return t.t-e.t})),O=0,a=0;a<T.length;a++)(S={ease:(k=T[a]).e,duration:(k.t-(a?T[a-1].t:0))/100*g})[u]=k.v,o.to(A,S,O),O+=S.duration;o.duration()<g&&o.to({},{duration:g-o.duration()})}}g||s.duration(g=o.duration())}else s.timeline=0;return!0===y&&!Ji&&(Mt=$t(s),ge.killTweensOf(A),Mt=0),dt(C,$t(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!g&&!_&&s._start===Ae(C._time)&&He(v)&&_h($t(s))&&"nested"!==C.data)&&(s._tTime=-ce,s.render(Math.max(0,-m)||0)),b&&Ho($t(s),b),s}Po(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,o,a,l,c,u,d,p=this._time,h=this._tDur,f=this._dur,g=t<0,m=t>h-ce&&!g?h:t<ce?0:t;if(f){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(i=m,u=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*o+t,e,n);if(i=Ae(m%o),m===h?(s=this._repeat,i=f):((s=~~(m/o))&&s===Ae(m/o)&&(i=f,s--),i>f&&(i=f)),(l=this._yoyo&&1&s)&&(d=this._yEase,i=f-i),a=En(this._tTime,o),i===p&&!n&&this._initted&&s===a)return this._tTime=m,this;s!==a&&(u&&this._yEase&&sa(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==o&&this._initted&&(this._lock=n=1,this.render(Ae(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(Uo(this,g?t:i,n,e,m))return this._tTime=0,this;if(!(p===this._time||n&&this.vars.repeatRefresh&&s!==a))return this;if(f!==this._dur)return this.render(t,e,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(i/f),this._from&&(this.ratio=c=1-c),i&&!p&&!e&&!s&&(Je(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(t<0?t:u._dur*u._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Ii(this,t,e,n),Je(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&Je(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(g&&!this._onUpdate&&Ii(this,t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Ht(this,1),!e&&(!g||p)&&(m||p||l)&&(Je(this,m===h?"onComplete":"onReverseComplete",!0),this._prom&&!(m<h&&this.timeScale()>0)&&this._prom()))}}else bh(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,i,r){ls||Ye.wake(),this._ts||this.play();var s,o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||rr(this,o),s=this._ease(o/this._dur),zh(this,t,e,n,i,s,o,r)?this.resetTo(t,e,n,i,1):(Ys(this,0),this.parent||Bo(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?qn(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Mt&&!0!==Mt.vars.overwrite)._first||qn(this),this.parent&&n!==this.timeline.totalDuration()&&Dn(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,o,a,l,c,u=this._targets,d=t?st(t):u,p=this._ptLookup,h=this._pt;if((!e||"all"===e)&&gh(u,d))return"all"===e&&(this._pt=0),qn(this);for(i=this._op=this._op||[],"all"!==e&&(Te(e)&&(a={},Ue(e,(function(t){return a[t]=1})),e=a),e=Fh(u,e)),c=u.length;c--;)if(~d.indexOf(u[c]))for(a in r=p[c],"all"===e?(i[c]=e,o=r,s={}):(s=i[c]=i[c]||{},o=e),o)(l=r&&r[a])&&((!("kill"in l.d)||!0===l.d.kill(a))&&Gs(this,l,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&h&&qn(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return Zn(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return Zn(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return ge.killTweensOf(t,e,n)},e}(us);it(ke.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ue("staggerTo,staggerFrom,staggerFromTo",(function(t){ke[t]=function(){var e=new ze,n=Di.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var or=function(t,e,n){return t[e]=n},ua=function(t,e,n){return t[e](n)},Vh=function(t,e,n,i){return t[e](i.fp,n)},Hh=function(t,e,n){return t.setAttribute(e,n)},ar=function(t,e){return ye(t[e])?ua:Qi(t[e])&&t.setAttribute?Hh:or},fa=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Uh=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ca=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},lr=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},jh=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},qh=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?Gs(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Wh=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},da=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},je=function(){function t(t,e,n,i,r,s,o,a,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||fa,this.d=o||this,this.set=a||or,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Wh,this.m=t,this.mt=n,this.tween=e},t}();Ue(nr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return tr[t]=1})),Xe.TweenMax=Xe.TweenLite=ke,Xe.TimelineLite=Xe.TimelineMax=ze,ge=new ze({sortChildren:!1,defaults:In,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ze.stringFilter=ta;var rn=[],ys={},Gh=[],Nr=0,Kh=0,ui=function(t){return(ys[t]||Gh).map((function(t){return t()}))},Ni=function(){var t=Date.now(),e=[];t-Nr>2&&(ui("matchMediaInit"),rn.forEach((function(t){var n,i,r,s,o=t.queries,a=t.conditions;for(i in o)(n=ct.matchMedia(o[i]).matches)&&(r=1),n!==a[i]&&(a[i]=n,s=1);s&&(t.revert(),r&&e.push(t))})),ui("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),Nr=t,ui("matchMedia"))},ha=function(){function t(t,e){this.selector=e&&Mi(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Kh++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){ye(t)&&(n=e,e=t,t=ye);var i=this,r=function(){var t,r=pe,s=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=Mi(n)),pe=i,t=e.apply(i,arguments),ye(t)&&i._r.push(t),pe=r,i.selector=s,i.isReverted=!1,t};return i.last=r,t===ye?r(i,(function(t){return i.add(null,t)})):t?i[t]=r:r},e.ignore=function(t){var e=pe;pe=null,t(this),pe=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof ke&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(e=n.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return i.splice(i.indexOf(t),1)})));for(i.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),r=n.data.length;r--;)(e=n.data[r])instanceof ze?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof ke)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var i=rn.length;i--;)rn[i].id===this.id&&rn.splice(i,1)},e.revert=function(t){this.kill(t||{})},t}(),Yh=function(){function t(t){this.contexts=[],this.scope=t,pe&&pe.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){vt(t)||(t={matches:t});var i,r,s,o=new ha(0,n||this.scope),a=o.conditions={};for(r in pe&&!o.selector&&(o.selector=pe.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===r?s=1:(i=ct.matchMedia(t[r]))&&(rn.indexOf(o)<0&&rn.push(o),(a[r]=i.matches)&&(s=1),i.addListener?i.addListener(Ni):i.addEventListener("change",Ni));return s&&e(o,(function(t){return o.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),zs={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return Zo(t)}))},timeline:function(t){return new ze(t)},getTweensOf:function(t,e){return ge.getTweensOf(t,e)},getProperty:function(t,e,n,i){Te(t)&&(t=st(t)[0]);var r=tn(t||{}).get,s=n?Fo:zo;return"native"===n&&(n=""),t&&(e?s((Ke[e]&&Ke[e].get||r)(t,e,n,i)):function(e,n,i){return s((Ke[e]&&Ke[e].get||r)(t,e,n,i))})},quickSetter:function(t,e,n){if((t=st(t)).length>1){var i=t.map((function(t){return We.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=Ke[e],o=tn(t),a=o.harness&&(o.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;bn._pt=0,i.init(t,n?e+n:e,bn,0,[t]),i.render(1,i),bn._pt&&lr(1,bn)}:o.set(t,a);return s?l:function(e){return l(t,a,n?e+n:e,o,1)}},quickTo:function(t,e,n){var i,r=We.to(t,an(((i={})[e]="+=0.1",i.paused=!0,i),n||{})),s=function(t,n,i){return r.resetTo(e,t,n,i)};return s.tween=r,s},isTweening:function(t){return ge.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=sn(t.ease,In.ease)),Er(In,t||{})},config:function(t){return Er(Ze,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"")?.split(",").forEach((function(t){return t&&!Ke[t]&&!Xe[t]&&rs(e+" effect requires "+t+" plugin.")})),ri[e]=function(t,e,i){return n(st(t),it(e||{},r),i)},s&&(ze.prototype[e]=function(t,n,i){return this.add(ri[e](t,vt(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){re[t]=sn(e)},parseEase:function(t,e){return arguments.length?sn(t,e):re},getById:function(t){return ge.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new ze(t);for(r.smoothChildTiming=He(t.smoothChildTiming),ge.remove(r),r._dp=0,r._time=r._tTime=ge._time,n=ge._first;n;)i=n._next,(e||!(!n._dur&&n instanceof ke&&n.vars.onComplete===n._targets[0]))&&dt(r,n,n._start-n._delay),n=i;return dt(ge,r,0),r},context:function(t,e){return t?new ha(t,e):pe},matchMedia:function(t){return new Yh(t)},matchMediaRefresh:function(){return rn.forEach((function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()}))||Ni()},addEventListener:function(t,e){var n=ys[t]||(ys[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=ys[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:Ah,wrapYoyo:Oh,distribute:Wo,random:Ko,snap:Go,normalize:Ph,getUnit:Me,clamp:$h,splitColor:Xo,toArray:st,selector:Mi,mapRange:Jo,pipe:Sh,unitize:kh,interpolate:Th,shuffle:qo},install:Do,effects:ri,ticker:Ye,updateRoot:ze.updateRoot,plugins:Ke,globalTimeline:ge,core:{PropTween:je,globals:Mo,Tween:ke,Timeline:ze,Animation:us,getCache:tn,_removeLinkedListItem:Gs,reverting:function(){return Re},context:function(t){return t&&pe&&(pe.data.push(t),t._ctx=pe),pe},suppressOverwrites:function(t){return Ji=t}}};Ue("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return zs[t]=ke[t]})),Ye.add(ze.updateRoot),bn=zs.to({},{duration:0});var Jh=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Qh=function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Jh(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))},fi=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(Te(n)&&(i={},Ue(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}Qh(t,n)}}}},We=zs.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,o,a;for(s in this.tween=n,e)a=t.getAttribute(s)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[s],i,r,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(t,e){for(var n=e._pt;n;)Re?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},fi("roundProps",Ri),fi("modifiers"),fi("snap",Go))||zs;ke.version=ze.version=We.version="3.12.5",Eo=1,Zi()&&Mn(),re.Power0,re.Power1,re.Power2,re.Power3,re.Power4,re.Linear,re.Quad,re.Cubic,re.Quart,re.Quint,re.Strong,re.Elastic,re.Back,re.SteppedEase,re.Bounce,re.Sine,re.Expo,re.Circ;
/*!
 Fixed the following issues:  
 *    1. Fixed: Gray mask issue. In newer versions of PS (20252026), masks were incorrectspecifically, they were not clean and contained gray tones. Fixed to produce proper black-and-white masks.  
 *    2. Fixed: Added support for newer versions of rgthree. You can now maintain compatibility with original workflows and node groups in newer rgthree versions (preserving the original group colors and titles unchanged).  
 *    4. Fixed: Synchronization of seed display, dualarrow (AUTO Randomize each time) logic, prompt synchronization display, and crop size settings in the settings panelthese now take effect without requiring a plugin restart, as long as the canvas is modified; status bar optimization; when clicking activate render, a loading progress bar now starts immediately, letting you know that ComfyUI has begun running.  
 *    
 *    5. New feature: Added support for retrieving highquality lossless PNG images from Photoshop, supporting resolutions up to 54005400. When exceeding this limit, images are compressed to JPG for transmission.  
 *    6. New feature: Increased the number of images that can be sent from ComfyUI from 1 to 4.  
 *    4. Optimization: Deprecated the ComfyUItoPS (Base64 encoding) transmission method and replaced it with a more efficient binary transmission, significantly reducing wait times during transfer, especially for large files.  
 *    8. Optimization: Scaled the size of the icon in the upperleft corner and the slider on the right side of the main interface. This maintains full functionality while allowing you to focus more on content creation.  
 *    9. Optimization: Improved Chinese text input. Added a delay and mouseevent detection to popup text boxes in the main interface, making it easier for Chineseinput users to type normally (note: when entering Chinese, avoid placing the mouse over the text area, but you can place it anywhere else inside the plugin to reduce accidental closure of the text box).  
 */
var zr,Rt,Cn,ur,en,Fr,fr,va,Zh=function(){return typeof window<"u"},Pt={},Qt=180/Math.PI,Sn=Math.PI/180,mn=Math.atan2,Br=1e8,cr=/([A-Z])/g,Xh=/(left|right|width|margin|padding|x)/i,ep=/[\s,\(]\S/,pt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},zi=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},tp=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},np=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},sp=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},pa=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},ga=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},ip=function(t,e,n){return t.style[e]=n},rp=function(t,e,n){return t.style.setProperty(e,n)},op=function(t,e,n){return t._gsap[e]=n},ap=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},lp=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},up=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},ve="transform",qe=ve+"Origin",fp=function t(e,n){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Pt&&s){if(this.tfm=this.tfm||{},"transform"===e)return pt.transform?.split(",").forEach((function(e){return t.call(i,e,n)}));if(~(e=pt[e]||e).indexOf(",")?e?.split(",").forEach((function(t){return i.tfm[t]=Ct(r,t)})):this.tfm[e]=o.x?o[e]:Ct(r,e),e===qe&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(ve)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(qe,n,"")),e=ve}(s||n)&&this.props.push(e,n,s[e])},ma=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},cp=function(){var t,e,n=this.props,i=this.target,r=i.style,s=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(cr,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(!(t=fr())||!t.isStart)&&!r[ve]&&(ma(r),s.zOrigin&&r[qe]&&(r[qe]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},_a=function(t,e){var n={target:t,props:[],revert:cp,save:fp};return t._gsap||We.core.getCache(t),e&&e?.split(",").forEach((function(t){return n.save(t)})),n},Fi=function(t,e){var n=Rt.createElementNS?Rt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Rt.createElement(t);return n&&n.style?n:Rt.createElement(t)},gt=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(cr,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Rn(n)||n,1)||""},Vr="O,Moz,ms,Ms,Webkit"?.split(","),Rn=function(t,e,n){var i=(e||en).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Vr[r]+t in i););return r<0?null:(3===r?"ms":r>=0?Vr[r]:"")+t},Bi=function(){Zh()&&window.document&&(zr=window,Rt=zr.document,Cn=Rt.documentElement,en=Fi("div")||{style:{}},Fi("div"),ve=Rn(ve),qe=ve+"Origin",en.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",va=!!Rn("perspective"),fr=We.core.reverting,ur=1)},ci=function t(e){var n,i=Fi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Cn.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch{}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),Cn.removeChild(i),this.style.cssText=o,n},Hr=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},ba=function(t){var e;try{e=t.getBBox()}catch{e=ci.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===ci||(e=ci.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Hr(t,["x","cx","x1"])||0,y:+Hr(t,["y","cy","y1"])||0,width:0,height:0}},ya=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!ba(t))},ln=function(t,e){if(e){var n,i=t.style;e in Pt&&e!==qe&&(e=ve),i.removeProperty?(("ms"===(n=e.substr(0,2))||"webkit"===e.substr(0,6))&&(e="-"+e),i.removeProperty("--"===n?e:e.replace(cr,"-$1").toLowerCase())):i.removeAttribute(e)}},xt=function(t,e,n,i,r,s){var o=new je(t._pt,e,n,0,1,s?ga:pa);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Ur={deg:1,rad:1,turn:1},dp={grid:1,flex:1},Ut=function t(e,n,i,r){var s,o,a,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",d=en.style,p=Xh.test(n),h="svg"===e.tagName.toLowerCase(),f=(h?"client":"offset")+(p?"Width":"Height"),g=100,m="px"===r,v="%"===r;if(r===u||!c||Ur[r]||Ur[u])return c;if("px"!==u&&!m&&(c=t(e,n,i,"px")),l=e.getCTM&&ya(e),(v||"%"===u)&&(Pt[n]||~n.indexOf("adius")))return s=l?e.getBBox()[p?"width":"height"]:e[f],Se(v?c/s*g:c/100*s);if(d[p?"width":"height"]=g+(m?u:r),o=~n.indexOf("adius")||"em"===r&&e.appendChild&&!h?e:e.parentNode,l&&(o=(e.ownerSVGElement||{}).parentNode),(!o||o===Rt||!o.appendChild)&&(o=Rt.body),(a=o._gsap)&&v&&a.width&&p&&a.time===Ye.time&&!a.uncache)return Se(c/a.width*g);if(!v||"height"!==n&&"width"!==n)(v||"%"===u)&&!dp[gt(o,"display")]&&(d.position=gt(e,"position")),o===e&&(d.position="static"),o.appendChild(en),s=en[f],o.removeChild(en),d.position="absolute";else{var $=e.style[n];e.style[n]=g+r,s=e[f],$?e.style[n]=$:ln(e,n)}return p&&v&&((a=tn(o)).time=Ye.time,a.width=o[f]),Se(m?s*c/g:s&&c?g/s*c:0)},Ct=function(t,e,n,i){var r;return ur||Bi(),e in pt&&"transform"!==e&&(~(e=pt[e]).indexOf(",")&&(e=e?.split(",")[0])),Pt[e]&&"transform"!==e?(r=cs(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Bs(gt(t,qe))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Fs[e]&&Fs[e](t,e,n)||gt(t,e)||xo(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?Ut(t,e,r,n)+n:r},hp=function(t,e,n,i){if(!n||"none"===n){var r=Rn(e,t,1),s=r&&gt(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=gt(t,"borderTopColor"))}var o,a,l,c,u,d,p,h,f,g,m,v=new je(this._pt,t.style,e,0,1,ca),$=0,y=0;if(v.b=n,v.e=i,n+="","auto"===(i+="")&&(d=t.style[e],t.style[e]=i,i=gt(t,e)||i,d?t.style[e]=d:ln(t,e)),ta(o=[n,i]),i=o[1],l=(n=o[0]).match(vn)||[],(i.match(vn)||[]).length){for(;a=vn.exec(i);)p=a[0],f=i.substring($,a.index),u?u=(u+1)%5:("rgba("===f.substr(-5)||"hsla("===f.substr(-5))&&(u=1),p!==(d=l[y++]||"")&&(c=parseFloat(d)||0,m=d.substr((c+"").length),"="===p.charAt(1)&&(p=$n(c,p)+m),h=parseFloat(p),g=p.substr((h+"").length),$=vn.lastIndex-g.length,g||(g=g||Ze.units[e]||m,$===i.length&&(i+=g,v.e+=g)),m!==g&&(c=Ut(t,e,d,g)||0),v._pt={_next:v._pt,p:f||1===y?f:",",s:c,c:h-c,m:u&&u<4||"zIndex"===e?Math.round:0});v.c=$<i.length?i.substring($,i.length):""}else v.r="display"===e&&"none"===i?ga:pa;return Lo.test(i)&&(v.e=0),this._pt=v,v},jr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},pp=function(t){var e=t?.split(" "),n=e[0],i=e[1]||"50%";return("top"===n||"bottom"===n||"left"===i||"right"===i)&&(t=n,n=i,i=t),e[0]=jr[n]||n,e[1]=jr[i]||i,e.join(" ")},gp=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,o=s.style,a=e.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(a=a?.split(","),r=a.length;--r>-1;)n=a[r],Pt[n]&&(i=1,n="transformOrigin"===n?qe:ve),ln(s,n);i&&(ln(s,ve),l&&(l.svg&&s.removeAttribute("transform"),cs(s,1),l.uncache=1,ma(o)))}},Fs={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new je(t._pt,e,n,0,0,gp);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},fs=[1,0,0,1,0,0],wa={},$a=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},qr=function(t){var e=gt(t,ve);return $a(e)?fs:e.substr(7).match(To).map(Se)},dr=function(t,e){var n,i,r,s,o=t._gsap||tn(t),a=t.style,l=qr(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?fs:l:(l===fs&&!t.offsetParent&&t!==Cn&&!o.svg&&(r=a.display,a.display="block",(!(n=t.parentNode)||!t.offsetParent)&&(s=1,i=t.nextElementSibling,Cn.appendChild(t)),l=qr(t),r?a.display=r:ln(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):Cn.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Vi=function(t,e,n,i,r,s){var o,a,l,c=t._gsap,u=r||dr(t,!0),d=c.xOrigin||0,p=c.yOrigin||0,h=c.xOffset||0,f=c.yOffset||0,g=u[0],m=u[1],v=u[2],$=u[3],y=u[4],_=u[5],w=e?.split(" "),b=parseFloat(w[0])||0,x=parseFloat(w[1])||0;n?u!==fs&&(a=g*$-m*v)&&(l=b*(-m/a)+x*(g/a)-(g*_-m*y)/a,b=b*($/a)+x*(-v/a)+(v*_-$*y)/a,x=l):(b=(o=ba(t)).x+(~w[0].indexOf("%")?b/100*o.width:b),x=o.y+(~(w[1]||w[0]).indexOf("%")?x/100*o.height:x)),i||!1!==i&&c.smooth?(y=b-d,_=x-p,c.xOffset=h+(y*g+_*v)-y,c.yOffset=f+(y*m+_*$)-_):c.xOffset=c.yOffset=0,c.xOrigin=b,c.yOrigin=x,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[qe]="0px 0px",s&&(xt(s,c,"xOrigin",d,b),xt(s,c,"yOrigin",p,x),xt(s,c,"xOffset",h,c.xOffset),xt(s,c,"yOffset",f,c.yOffset)),t.setAttribute("data-svg-origin",b+" "+x)},cs=function(t,e){var n=t._gsap||new ra(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,$,y,_,w,b,x,C,A,T,k,S,O,I,L,M,E,R,P=t.style,B=n.scaleX<0,D="px",N="deg",F=getComputedStyle(t),z=gt(t,qe)||"0";return i=r=s=l=c=u=d=p=h=0,o=a=1,n.svg=!(!t.getCTM||!ya(t)),F.translate&&(("none"!==F.translate||"none"!==F.scale||"none"!==F.rotate)&&(P[ve]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0")?.split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale?.split(" ").join(",")+") ":"")+("none"!==F[ve]?F[ve]:"")),P.scale=P.rotate=P.translate="none"),m=dr(t,n.svg),n.svg&&(n.uncache?(k=t.getBBox(),z=n.xOrigin-k.x+"px "+(n.yOrigin-k.y)+"px",T=""):T=!e&&t.getAttribute("data-svg-origin"),Vi(t,T||z,!!T||n.originIsAbsolute,!1!==n.smooth,m)),f=n.xOrigin||0,g=n.yOrigin||0,m!==fs&&(_=m[0],w=m[1],b=m[2],x=m[3],i=C=m[4],r=A=m[5],6===m.length?(o=Math.sqrt(_*_+w*w),a=Math.sqrt(x*x+b*b),l=_||w?mn(w,_)*Qt:0,(d=b||x?mn(b,x)*Qt+l:0)&&(a*=Math.abs(Math.cos(d*Sn))),n.svg&&(i-=f-(f*_+g*b),r-=g-(f*w+g*x))):(R=m[6],M=m[7],O=m[8],I=m[9],L=m[10],E=m[11],i=m[12],r=m[13],s=m[14],c=(v=mn(R,L))*Qt,v&&(T=C*($=Math.cos(-v))+O*(y=Math.sin(-v)),k=A*$+I*y,S=R*$+L*y,O=C*-y+O*$,I=A*-y+I*$,L=R*-y+L*$,E=M*-y+E*$,C=T,A=k,R=S),u=(v=mn(-b,L))*Qt,v&&($=Math.cos(-v),E=x*(y=Math.sin(-v))+E*$,_=T=_*$-O*y,w=k=w*$-I*y,b=S=b*$-L*y),l=(v=mn(w,_))*Qt,v&&(T=_*($=Math.cos(v))+w*(y=Math.sin(v)),k=C*$+A*y,w=w*$-_*y,A=A*$-C*y,_=T,C=k),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),o=Se(Math.sqrt(_*_+w*w+b*b)),a=Se(Math.sqrt(A*A+R*R)),v=mn(C,A),d=Math.abs(v)>2e-4?v*Qt:0,h=E?1/(E<0?-E:E):0),n.svg&&(T=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!$a(gt(t,ve)),T&&t.setAttribute("transform",T))),Math.abs(d)>90&&Math.abs(d)<270&&(B?(o*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,d+=d<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+D,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+D,n.z=s+D,n.scaleX=Se(o),n.scaleY=Se(a),n.rotation=Se(l)+N,n.rotationX=Se(c)+N,n.rotationY=Se(u)+N,n.skewX=d+N,n.skewY=p+N,n.transformPerspective=h+D,(n.zOrigin=parseFloat(z?.split(" ")[2])||!e&&n.zOrigin||0)&&(P[qe]=Bs(z)),n.xOffset=n.yOffset=0,n.force3D=Ze.force3D,n.renderTransform=n.svg?_p:va?Ca:mp,n.uncache=0,n},Bs=function(t){return(t=t?.split(" "))[0]+" "+t[1]},di=function(t,e,n){var i=Me(e);return Se(parseFloat(e)+parseFloat(Ut(t,"x",n+"px",i)))+i},mp=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ca(t,e)},Yt="0deg",jn="0px",Jt=") ",Ca=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,d=n.skewX,p=n.skewY,h=n.scaleX,f=n.scaleY,g=n.transformPerspective,m=n.force3D,v=n.target,$=n.zOrigin,y="",_="auto"===m&&t&&1!==t||!0===m;if($&&(u!==Yt||c!==Yt)){var w,b=parseFloat(c)*Sn,x=Math.sin(b),C=Math.cos(b);b=parseFloat(u)*Sn,w=Math.cos(b),s=di(v,s,x*w*-$),o=di(v,o,-Math.sin(b)*-$),a=di(v,a,C*w*-$+$)}g!==jn&&(y+="perspective("+g+Jt),(i||r)&&(y+="translate("+i+"%, "+r+"%) "),(_||s!==jn||o!==jn||a!==jn)&&(y+=a!==jn||_?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Jt),l!==Yt&&(y+="rotate("+l+Jt),c!==Yt&&(y+="rotateY("+c+Jt),u!==Yt&&(y+="rotateX("+u+Jt),(d!==Yt||p!==Yt)&&(y+="skew("+d+", "+p+Jt),(1!==h||1!==f)&&(y+="scale("+h+", "+f+Jt),v.style[ve]=y||"translate(0, 0)"},_p=function(t,e){var n,i,r,s,o,a=e||this,l=a.xPercent,c=a.yPercent,u=a.x,d=a.y,p=a.rotation,h=a.skewX,f=a.skewY,g=a.scaleX,m=a.scaleY,v=a.target,$=a.xOrigin,y=a.yOrigin,_=a.xOffset,w=a.yOffset,b=a.forceCSS,x=parseFloat(u),C=parseFloat(d);p=parseFloat(p),h=parseFloat(h),(f=parseFloat(f))&&(h+=f=parseFloat(f),p+=f),p||h?(p*=Sn,h*=Sn,n=Math.cos(p)*g,i=Math.sin(p)*g,r=Math.sin(p-h)*-m,s=Math.cos(p-h)*m,h&&(f*=Sn,o=Math.tan(h-f),r*=o=Math.sqrt(1+o*o),s*=o,f&&(o=Math.tan(f),n*=o=Math.sqrt(1+o*o),i*=o)),n=Se(n),i=Se(i),r=Se(r),s=Se(s)):(n=g,s=m,i=r=0),(x&&!~(u+"").indexOf("px")||C&&!~(d+"").indexOf("px"))&&(x=Ut(v,"x",u,"px"),C=Ut(v,"y",d,"px")),($||y||_||w)&&(x=Se(x+$-($*n+y*r)+_),C=Se(C+y-($*i+y*s)+w)),(l||c)&&(o=v.getBBox(),x=Se(x+l/100*o.width),C=Se(C+c/100*o.height)),o="matrix("+n+","+i+","+r+","+s+","+x+","+C+")",v.setAttribute("transform",o),b&&(v.style[ve]=o)},vp=function(t,e,n,i,r){var s,o,a=360,l=Te(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?Qt:1)-i,u=i+c+"deg";return l&&(s=r?.split("_")[1],"short"===s&&((c%=a)!==c%180&&(c+=c<0?a:-a)),"cw"===s&&c<0?c=(c+a*Br)%a-~~(c/a)*a:"ccw"===s&&c>0&&(c=(c-a*Br)%a-~~(c/a)*a)),t._pt=o=new je(t._pt,e,n,i,c,tp),o.e=u,o.u="deg",t._props.push(n),o},Wr=function(t,e){for(var n in e)t[n]=e[n];return t},bp=function(t,e,n){var i,r,s,o,a,l,c,u=Wr({},n._gsap),d=n.style;for(r in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),d[ve]=e,i=cs(n,1),ln(n,ve),n.setAttribute("transform",s)):(s=getComputedStyle(n)[ve],d[ve]=e,i=cs(n,1),d[ve]=s),Pt)(s=u[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=Me(s)!==(c=Me(o))?Ut(n,r,s,c):parseFloat(s),l=parseFloat(o),t._pt=new je(t._pt,i,r,a,l-a,zi),t._pt.u=c||0,t._props.push(r));Wr(i,u)};Ue("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",s="Left",o=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return e<2?t+n:"border"+n+t}));Fs[e>1?"border"+t:t]=function(t,e,n,i,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return Ct(t,e,n)})),5===(a=s.join(" "))?.split(s[0]).length?s[0]:a;s=(i+"")?.split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var Sa={name:"css",register:Bi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,o,a,l,c,u,d,p,h,f,g,m,v,$,y,_,w=this._props,b=t.style,x=n.vars.startAt;for(d in ur||Bi(),this.styles=this.styles||_a(t),_=this.styles.props,this.tween=n,e)if("autoRound"!==d&&(o=e[d],!Ke[d]||!oa(d,e,n,i,t,r)))if(c=typeof o,u=Fs[d],"function"===c&&(c=typeof(o=o.call(n,i,t,r))),"string"===c&&~o.indexOf("random(")&&(o=as(o)),u)u(this,t,d,o,n)&&(y=1);else if("--"===d.substr(0,2))s=(getComputedStyle(t).getPropertyValue(d)+"").trim(),o+="",Ft.lastIndex=0,Ft.test(s)||(p=Me(s),h=Me(o)),h?p!==h&&(s=Ut(t,d,s,h)+h):p&&(o+=p),this.add(b,"setProperty",s,o,i,r,0,0,d),w.push(d),_.push(d,0,b[d]);else if("undefined"!==c){if(x&&d in x?(s="function"==typeof x[d]?x[d].call(n,i,t,r):x[d],Te(s)&&~s.indexOf("random(")&&(s=as(s)),Me(s+"")||"auto"===s||(s+=Ze.units[d]||Me(Ct(t,d))||""),"="===(s+"").charAt(1)&&(s=Ct(t,d))):s=Ct(t,d),l=parseFloat(s),(f="string"===c&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),d in pt&&("autoAlpha"===d&&(1===l&&"hidden"===Ct(t,"visibility")&&a&&(l=0),_.push("visibility",0,b.visibility),xt(this,b,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==d&&"transform"!==d&&(~(d=pt[d]).indexOf(",")&&(d=d?.split(",")[0]))),g=d in Pt)if(this.styles.save(d),m||((v=t._gsap).renderTransform&&!e.parseTransform||cs(t,e.parseTransform),$=!1!==e.smoothOrigin&&v.smooth,(m=this._pt=new je(this._pt,b,ve,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===d)this._pt=new je(this._pt,v,"scaleY",v.scaleY,(f?$n(v.scaleY,f+a):a)-v.scaleY||0,zi),this._pt.u=0,w.push("scaleY",d),d+="X";else{if("transformOrigin"===d){_.push(qe,0,b[qe]),o=pp(o),v.svg?Vi(t,o,0,$,0,this):((h=parseFloat(o?.split(" ")[2])||0)!==v.zOrigin&&xt(this,v,"zOrigin",v.zOrigin,h),xt(this,b,d,Bs(s),Bs(o)));continue}if("svgOrigin"===d){Vi(t,o,1,$,0,this);continue}if(d in wa){vp(this,v,d,l,f?$n(l,f+o):o);continue}if("smoothOrigin"===d){xt(this,v,"smooth",v.smooth,o);continue}if("force3D"===d){v[d]=o;continue}if("transform"===d){bp(this,o,t);continue}}else d in b||(d=Rn(d)||d);if(g||(a||0===a)&&(l||0===l)&&!ep.test(o)&&d in b)a||(a=0),(p=(s+"").substr((l+"").length))!==(h=Me(o)||(d in Ze.units?Ze.units[d]:p))&&(l=Ut(t,d,s,h)),this._pt=new je(this._pt,g?v:b,d,l,(f?$n(l,f+a):a)-l,g||"px"!==h&&"zIndex"!==d||!1===e.autoRound?zi:sp),this._pt.u=h||0,p!==h&&"%"!==h&&(this._pt.b=s,this._pt.r=np);else if(d in b)hp.call(this,t,d,s,f?f+o:o);else if(d in t)this.add(t,d,s||t[d],f?f+o:o,i,r);else if("parseTransform"!==d){er(d,o);continue}g||(d in b?_.push(d,0,b[d]):_.push(d,1,s||t[d])),w.push(d)}y&&da(this)},render:function(t,e){if(e.tween._time||!fr())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Ct,aliases:pt,getSetter:function(t,e,n){var i=pt[e];return i&&i.indexOf(",")<0&&(e=i),e in Pt&&e!==qe&&(t._gsap.x||Ct(t,"x"))?n&&Fr===n?"scale"===e?ap:op:(Fr=n||{})&&("scale"===e?lp:up):t.style&&!Qi(t.style[e])?ip:~e.indexOf("-")?rp:ar(t,e)},core:{_removeProperty:ln,_getMatrix:dr}};We.utils.checkPrefix=Rn,We.core.getStyleSaver=_a,function(t,e,n,i){var r=Ue(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Pt[t]=1}));Ue(e,(function(t){Ze.units[t]="deg",wa[t]=1})),pt[r[13]]=t+","+e,Ue("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t?.split(":");pt[e[1]]=r[e[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ue("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Ze.units[t]="px"})),We.registerPlugin(Sa);var ot=We.registerPlugin(Sa)||We;function Gr(t){let e,n;return{c(){e=Wi("title"),n=K(t[5])},m(t,i){R(t,e,i),$(e,n)},p(t,e){32&e&&Z(n,t[5])},d(t){t&&M(e)}}}function yp(t){let e,n,i,r=t[5]&&Gr(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:t[1]},{height:t[2]},{viewBox:t[0]},{stroke:t[3]},{fill:t[4]},t[7]],o={};for(let t=0;t<s.length;t+=1)o=at(o,s[t]);return{c(){e=Wi("svg"),r&&r.c(),n=bt(),i=new Ua(!0),i.a=null,_r(e,o)},m(s,o){R(s,e,o),r&&r.m(e,null),$(e,n),i.m(t[6],e)},p(t,[a]){t[5]?r?r.p(t,a):(r=Gr(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),64&a&&i.p(t[6]),_r(e,o=qs(s,[{xmlns:"http://www.w3.org/2000/svg"},2&a&&{width:t[1]},4&a&&{height:t[2]},1&a&&{viewBox:t[0]},8&a&&{stroke:t[3]},16&a&&{fill:t[4]},128&a&&t[7]]))},i:le,o:le,d(t){t&&M(e),r&&r.d()}}}function wp(t){const e=/viewBox="([\d\- \.]+)"/.exec(t);return e?e[1]:"0 0 20 20"}function $p(t,e,n){let i;const r=["data","viewBox","size","width","height","color","stroke","fill","title"];let s=Pn(e,r),{data:o=""}=e,{viewBox:a=wp(o)}=e,{size:l="20px"}=e,{width:c=l}=e,{height:u=l}=e,{color:d="currentColor"}=e,{stroke:p=d}=e,{fill:h=d}=e,{title:f=""}=e;return t.$$set=t=>{e=at(at({},e),Cs(t)),n(7,s=Pn(e,r)),"data"in t&&n(8,o=t.data),"viewBox"in t&&n(0,a=t.viewBox),"size"in t&&n(9,l=t.size),"width"in t&&n(1,c=t.width),"height"in t&&n(2,u=t.height),"color"in t&&n(10,d=t.color),"stroke"in t&&n(3,p=t.stroke),"fill"in t&&n(4,h=t.fill),"title"in t&&n(5,f=t.title)},t.$$.update=()=>{256&t.$$.dirty&&n(6,i=o.replace(/<svg[ \n]([^>]*)>/,"").replace("</svg>",""))},[a,c,u,p,h,f,i,s,o,l,d]}ot.core.Tween;class Fe extends $e{constructor(t){super(),we(this,t,$p,yp,be,{data:8,viewBox:0,size:9,width:1,height:2,color:10,stroke:3,fill:4,title:5})}}const ka='<svg width="34" height="33" viewBox="0 0 34 33" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M23.1886 18.0108C23.1131 18.0884 22.8279 18.4198 22.5623 18.6924C21.0052 20.4071 16.9431 23.2137 14.8169 24.0703C14.494 24.2079 13.6778 24.4994 13.2416 24.5181C12.8236 24.5181 12.4253 24.4219 12.0451 24.2267C11.5712 23.954 11.191 23.5251 10.9827 23.0186C10.8486 22.667 10.6403 21.6152 10.6403 21.5966C10.432 20.4458 10.3174 18.5761 10.3174 16.51C10.3174 14.5413 10.432 12.7479 10.6025 11.5798C10.622 11.561 10.8303 10.254 11.0582 9.80624C11.4761 8.98832 12.2925 8.48047 13.1661 8.48047H13.2416C13.8106 8.50051 15.0071 9.00837 15.0071 9.02708C17.0186 9.88509 20.987 12.554 22.5819 14.3275C22.5819 14.3275 23.0311 14.7832 23.2264 15.0679C23.531 15.4769 23.682 15.9834 23.682 16.4899C23.682 17.0553 23.5115 17.5819 23.1886 18.0108Z" fill="#7D7D7D"/>\r\n</svg>\r\n',Cp='<svg width="34" height="33" viewBox="0 0 34 33" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M24.654 16.1027C21.0767 15.1804 18.2813 12.385 17.359 8.80771C17.2532 8.39743 16.6706 8.39743 16.5648 8.80771C15.6426 12.385 12.8471 15.1804 9.26984 16.1027C8.85924 16.2086 8.8593 16.7916 9.26984 16.8977C12.8471 17.82 15.6426 20.6153 16.5648 24.1919C16.6705 24.6022 17.2532 24.6022 17.359 24.1919C18.2813 20.6153 21.0767 17.82 24.654 16.8977C25.0645 16.7916 25.0645 16.2086 24.654 16.1027Z" fill="#666666"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5008 13.0121C22.5008 12.0587 23.5461 10.9617 24.5511 10.9617C23.5838 10.9617 22.5008 9.85322 22.5008 8.91211C22.5008 9.85322 21.4276 10.9617 20.4512 10.9617C21.3906 10.9617 22.5008 12.053 22.5008 13.0121Z" fill="#666666"/>\r\n</svg>\r\n',Sp='<svg width="33" height="35" viewBox="0 0 33 35" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.7758 9.75781H21.2235C21.9971 9.75781 22.6243 10.385 22.6243 11.1586C22.6243 11.9322 21.9971 12.5594 21.2235 12.5594H11.7758C11.0022 12.5594 10.375 11.9322 10.375 11.1586C10.375 10.385 11.0022 9.75781 11.7758 9.75781Z" fill="#666666"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.7758 16.0996H21.2235C21.9971 16.0996 22.6243 16.7268 22.6243 17.5004C22.6243 18.274 21.9971 18.9012 21.2235 18.9012H11.7758C11.0022 18.9012 10.375 18.274 10.375 17.5004C10.375 16.7268 11.0022 16.0996 11.7758 16.0996Z" fill="#666666"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.7759 22.4395H16.5951C17.3688 22.4395 17.9961 23.0667 17.9961 23.8404C17.9961 24.6141 17.3688 25.2413 16.5951 25.2413H11.7759C11.0022 25.2413 10.375 24.6141 10.375 23.8404C10.375 23.0667 11.0022 22.4395 11.7759 22.4395Z" fill="#666666"/>\r\n</svg>\r\n';function kp(t){let e;return{c(){e=K(t[1])},m(t,n){R(t,e,n)},p(t,n){2&n&&Z(e,t[1])},d(t){t&&M(e)}}}function Pp(t){let e,n,i,r,s;const o=t[9].default,a=jt(o,t,t[8],null),l=a||kp(t);let c=[{class:n=`${t[0]} ${t[4].class||""}`},{style:t[2]},{role:"button"},t[5]],u={};for(let t=0;t<c.length;t+=1)u=at(u,c[t]);return{c(){e=L("span"),l&&l.c(),An(e,u),mt(e,"svelte-qesugz",!0)},m(n,o){R(n,e,o),l&&l.m(e,null),i=!0,r||(s=[ie(e,"click",t[3]),ie(e,"mouseenter",t[3]),ie(e,"mouseleave",t[3]),ie(e,"mousemove",t[3]),ie(e,"mousedown",t[3]),ie(e,"contextmenu",t[3]),ie(e,"mouseup",t[3]),ie(e,"focus",t[3])],r=!0)},p(t,[r]){a?a.p&&(!i||256&r)&&Wt(a,o,t,t[8],i?qt(o,t[8],r,null):Gt(t[8]),null):l&&l.p&&(!i||2&r)&&l.p(t,i?r:-1),An(e,u=qs(c,[(!i||17&r&&n!==(n=`${t[0]} ${t[4].class||""}`))&&{class:n},(!i||4&r)&&{style:t[2]},{role:"button"},32&r&&t[5]])),mt(e,"svelte-qesugz",!0)},i(t){i||(T(l,t),i=!0)},o(t){I(l,t),i=!1},d(t){t&&M(e),l&&l.d(t),r=!1,lt(s)}}}function Ap(t,e,n){const i=["text","toggle","value","class","style"];let r=Pn(e,i),{$$slots:s={},$$scope:o}=e,{text:a="Button"}=e,{toggle:l=!1}=e,{value:c=!1}=e,{class:u=""}=e,{style:d=""}=e;const p=js();return t.$$set=t=>{n(4,e=at(at({},e),Cs(t))),n(5,r=Pn(e,i)),"text"in t&&n(1,a=t.text),"toggle"in t&&n(7,l=t.toggle),"value"in t&&n(6,c=t.value),"class"in t&&n(0,u=t.class),"style"in t&&n(2,d=t.style),"$$scope"in t&&n(8,o=t.$$scope)},t.$$.update=()=>{64&t.$$.dirty&&n(0,u=c?"active":"")},e=Cs(e),[u,a,d,function(t){p(t.type,{originalEvent:t,target:t.target}),"click"===t.type&&l&&(n(6,c=!c),p("valueChange",c))},e,r,c,l,o,s]}class Le extends $e{constructor(t){super(),we(this,t,Ap,Pp,be,{text:1,toggle:7,value:6,class:0,style:2})}}let It="",Pe=null,xn=!1,ws=!1,hi=null;const fetchRenderBinary=async t=>{try{const e=`${It.replace("ws://","http://").replace("wss://","https://")}/ps/get_render/${t}`;ne.info(` Fetching binary: ${e}`);const n=await fetch(e);if(!n.ok)throw new Error(`HTTP ${n.status}`);const i=await n.arrayBuffer();return ne.info(` Received ${i.byteLength} bytes for ${t}`),i}catch(e){return ne.error(` Error fetching ${t}:`,e),null}},$s={},Op=`client-${Math.random().toString(36).substring(2,11)}`,Vs=async(t=Qe(rt))=>{It=t,("http://127.0.0.1"==t||"127.0.0.1"==t)&&rt.set("http://127.0.0.1:8188"),("https://127.0.0.1"==t||"127.0.0.1:8187"==t)&&rt.set("https://127.0.0.1:8187"),t=Qe(rt),xn&&(ne.info(" Closing existing socket..."),await Ta());try{t=t.replace(/\/$/,""),It=t.startsWith("https://")||t.startsWith("wss://")?`wss://${t.replace("https://","").replace("https://","")}`:`ws://${t.replace("http://","").replace("http://","")}`,ne.info(" Connecting to:",It),Nn("Connecting","yellow"),Pe=new WebSocket(`${It}/ps/ws?clientId=${Op}&platform=ps`),Pe.addEventListener("open",Pa),Pe.addEventListener("message",Aa),Pe.addEventListener("close",Oa),hi&&clearInterval(hi),hi=setInterval(Tp,5e3)}catch(t){ne.error(" Connection error:",t),Nn("Error","darkred"),xn=!1}},Tp=()=>{(!Pe||Pe.readyState===WebSocket.CLOSED)&&(ne.error(" Socket disconnected, attempting to reconnect..."),xn=!1,Nn("Reconnecting","orange"),ws||Vs())},Pa=()=>{xn=!0,ne.info(" Connected to",It),Nn("Connected","green")},Aa=t=>{try{const e=JSON.parse(t.data);ne.info(" Received message:",e),Dp(e)}catch(t){ne.error(" Error parsing message:",t)}},Oa=async()=>{xn=!1,ne.error(` Disconnected from ${It}:8188`),Nn("Disconnected","red"),await Ta(),ws||(ws=!0,setTimeout((()=>{ne.info(` Reconnecting to ${It}:8188`),Vs().finally((()=>ws=!1))}),5e3))},Ta=async()=>{Pe&&(Pe.removeEventListener("close",Oa),Pe.removeEventListener("message",Aa),Pe.removeEventListener("open",Pa),Pe.close(),Pe=null,await new Promise((t=>setTimeout(t,100))))};let Hi=[],Ui=!1;async function Lp(t){null==Pe||Pe.send(t)}async function Ip(t,e=!0){Hi.push({eventType:t,data:e}),Ui||(Ui=!0,Ep())}async function Ep(){for(;Hi.length>0;){const t=Hi.shift();if(t){const{eventType:e,data:n}=t;ne.info(" Sending message:",e,n),xn&&Pe?Pe.send(JSON.stringify({[e]:n})):ne.warn(" Unable to send message: Not connected"),await new Promise((t=>setTimeout(t,50)))}}Ui=!1}const Dp=t=>{for(const e in t)($s[e]||[]).forEach((n=>{try{n(t[e])}catch(t){ne.error(` Error handling message of type ${e}:`,t)}}))},kn=(t,e)=>{$s[t]||($s[t]=[]),$s[t].push(e)};function Nn(t,e){ko.set({status:t,color:e})}let ji;window.addEventListener("beforeunload",(()=>{Pe&&(Pe.close(),Nn("Disconnected","red"))}));const La=(t={left:0,top:0,right:0,bottom:0})=>{const e=he.activeDocument.width,n=he.activeDocument.height,i=t.right-t.left,r=t.bottom-t.top,s=i/r,o=Number(Qe(Is))/100*i;let a=i+2*o,l=r+2*(o/s),c=1;a>e&&(c=e/a,a=e,l*=c),l>n&&(c=n/l,l=n,a*=c);let u=t.left-(a-i)/2,d=t.top-(l-r)/2,p=u+a,h=d+l;return u<0?(u=0,p=a):p>e&&(p=e,u=e-a),d<0?(d=0,h=l):h>n&&(h=n,d=n-l),{left:u,top:d,right:p,bottom:h}},Ia=async()=>{if(!he.activeDocument)throw"No open document";let t=he.activeDocument.width,e=he.activeDocument.height,n={left:0,top:0,right:0,bottom:0};const i=await he.activeDocument.selection.bounds;Qe(on)&&i&&(n={left:i.left,top:i.top,right:i.right,bottom:i.bottom},Number(Qe(Is))>0&&(n=La(n)),t=n.right-n.left,e=n.bottom-n.top);const{newWidth:r,newHeight:s}=Mp(t,e);return ji=n,{sourceBounds:n,targetSize:{width:r,height:s}}},Mp=(t,e)=>{Qe(bi),Qe(yi);const[n,i]=[Qe(bi),Qe(yi)].map((t=>parseInt(t,10))),r=t/e;let s=Math.min(Math.max(t,i),n),o=s/r;return o>n?(o=n,s=o*r):o<i&&(o=i,s=o*r),{newWidth:s,newHeight:o}},Ea=async(t,e="png")=>{try{const n=await vr.getPixels(t),i=await vr.encodeImageData({imageData:n.imageData,format:e,quality:"jpg"===e?1:void 0,base64:!0});return n.imageData.dispose(),i}catch(t){throw ne.error` Error saving ${e} image:`,t}},Ea_npg=async t=>{const e=(t,e,n,i)=>{const r=new Uint8Array([137,80,78,71,13,10,26,10]),s=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;s[t]=e}const o=(t,e)=>{const n=(t=>{const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})(t),i=e.length,r=new Uint8Array(12+e.length);r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(n,4),r.set(e,8);const o=new Uint8Array(4+e.length);o.set(n,0),o.set(e,4);const a=(t=>{let e=4294967295;for(let n=0;n<t.length;n++)e=s[255&(e^t[n])]^e>>>8;return(4294967295^e)>>>0})(o);return r[8+e.length]=a>>24&255,r[9+e.length]=a>>16&255,r[10+e.length]=a>>8&255,r[11+e.length]=255&a,r},a=new Uint8Array(13);a[0]=t>>24&255,a[1]=t>>16&255,a[2]=t>>8&255,a[3]=255&t,a[4]=e>>24&255,a[5]=e>>16&255,a[6]=e>>8&255,a[7]=255&e,a[8]=8,a[9]=4===i?6:2,a[10]=0,a[11]=0,a[12]=0;const l=o("IHDR",a),c=1+t*i,u=new Uint8Array(e*c);for(let r=0;r<e;r++){u[r*c]=0;const e=r*t*i,s=r*c+1;for(let r=0;r<t*i;r++)u[s+r]=n[e+r]}const d=(t=>{const e=[],n=65535;for(let i=0;i<t.length;i+=n){const r=i+n>=t.length,s=t.slice(i,Math.min(i+n,t.length)),o=s.length,a=new Uint8Array(5+o);a[0]=r?1:0,a[1]=255&o,a[2]=o>>8&255,a[3]=255&~o,a[4]=~o>>8&255,a.set(s,5),e.push(a)}let i=6;for(const t of e)i+=t.length;const r=new Uint8Array(i);r[0]=120,r[1]=1;let s=2;for(const t of e)r.set(t,s),s+=t.length;let o=1,a=0;for(let e=0;e<t.length;e++)o=(o+t[e])%65521,a=(a+o)%65521;const l=(a<<16|o)>>>0;return r[s]=l>>24&255,r[s+1]=l>>16&255,r[s+2]=l>>8&255,r[s+3]=255&l,r})(u),p=o("IDAT",d),h=o("IEND",new Uint8Array(0)),f=new Uint8Array(r.length+l.length+p.length+h.length);let g=0;return f.set(r,g),g+=r.length,f.set(l,g),g+=l.length,f.set(p,g),g+=p.length,f.set(h,g),f};try{ne.info(" Ea_PNG begins execution (HTTP upload mode with resizing)");const n=t.targetSize;n&&ne.info(" Target size - width:",n.width,"height:",n.height);const i=await vr.getPixels(t),r=await i.imageData.getData({}),s=i.imageData.width,o=i.imageData.height,a=Math.round(r.length/(s*o));ne.info(" Original image size:",s,"x",o,"components:",a);let l={data:r,width:s,height:o};if(n&&n.width&&n.height){const t=Math.floor(n.width),e=Math.floor(n.height);t!==s||e!==o?(ne.info(" Resizing from",s,"x",o,"to",t,"x",e),l=((t,e,n,i,r,s)=>{if(e===i&&n===r)return{data:t,width:e,height:n};const o=new Uint8Array(i*r*s),a=e/i,l=n/r;for(let c=0;c<r;c++)for(let r=0;r<i;r++){const u=r*a,d=c*l,p=Math.floor(u),h=Math.floor(d),f=Math.min(p+1,e-1),g=Math.min(h+1,n-1),m=u-p,v=d-h;for(let n=0;n<s;n++){const a=t[(h*e+p)*s+n]*(1-m)*(1-v)+t[(h*e+f)*s+n]*m*(1-v)+t[(g*e+p)*s+n]*(1-m)*v+t[(g*e+f)*s+n]*m*v;o[(c*i+r)*s+n]=Math.round(a)}}return{data:o,width:i,height:r}})(r,s,o,t,e,a),ne.info(" Resized image size:",l.width,"x",l.height)):ne.info(" No resize needed, size already matches target")}const c=e(l.width,l.height,l.data,a);ne.info(" Final PNG size:",c.length,"bytes","dimensions:",l.width,"x",l.height);const u=(()=>{const t=document.getElementById("s_ip");if(t&&t.value){let e=t.value.trim();return e.startsWith("http://")||e.startsWith("https://")||(e="http://"+e),e.match(/:\d+$/)||(e+=":8188"),e}return"undefined"!=typeof window&&window.comfyUIConfig&&window.comfyUIConfig.ip?window.comfyUIConfig.ip:"http://127.0.0.1:8188"})(),d=`${u}/ps/upload_canvas_binary`;ne.info(" Upload files via HTTP to:",d);const p=await fetch(d,{method:"POST",headers:{"Content-Type":"application/octet-stream","X-Filename":"PS_canvas.png"},body:c.buffer});if(!p.ok)throw new Error("HTTP upload failed: "+p.status);const h=await p.json();return ne.info(" HTTP upload successful",JSON.stringify(h)),i.imageData.dispose(),"HTTP_UPLOADED"}catch(t){throw ne.error(" Ea_npg err:",t.message),t}},Rp=async()=>{try{let t="";return await he.activeDocument.suspendHistory((async()=>{const e=he.activeDocument.activeHistoryState,{sourceBounds:n,targetSize:i}=await Ia();await Vt.executeAsModal((async()=>{let t=!1;try{he.activeDocument.selection.bounds&&(t=!0)}catch(e){t=!1}const e="Temp_AI_Mask_Channel_"+Date.now();let n=[];n.push({_obj:"flattenImage",_options:{dialogOptions:"dontDisplay"}}),t?n.push({_obj:"duplicate",_target:{_ref:"channel",_property:"selection"},name:e},{_obj:"set",_target:{_ref:"channel",_property:"selection"},to:{_enum:"ordinal",_value:"none"}},{_obj:"make",_target:[{_ref:"layer"}]},{_obj:"fill",using:{_enum:"fillContents",_value:"black"},opacity:{_unit:"percentUnit",_value:100},mode:{_enum:"blendMode",_value:"normal"}},{_obj:"set",_target:{_ref:"channel",_property:"selection"},to:{_ref:"channel",_name:e}},{_obj:"fill",using:{_enum:"fillContents",_value:"white"},opacity:{_unit:"percentUnit",_value:100},mode:{_enum:"blendMode",_value:"normal"}},{_obj:"delete",_target:{_ref:"channel",_name:e}}):n.push({_obj:"make",_target:[{_ref:"layer"}]},{_obj:"fill",using:{_enum:"fillContents",_value:"white"},opacity:{_unit:"percentUnit",_value:100},mode:{_enum:"blendMode",_value:"normal"}}),n.push({_obj:"flattenImage",_options:{dialogOptions:"dontDisplay"}}),await _t(n,{}),ne.info(t?" Mask from Selection":" Full White Mask (No Selection)")}));const r={documentID:he.activeDocument.id,targetSize:i,componentSize:8,applyAlpha:!0,colorProfile:"sRGB IEC61966-2.1",colorSpace:"RGB",...n&&{sourceBounds:n}};t=await Ea(r,"jpg"),he.activeDocument.activeHistoryState=e,ne.info(" Mask saved as base64 JPG")}),"Mask Sent to AI"),is.set(!1),t}catch(t){ne.error(" Error saving mask:",t)}},Ea_npg_crop=async t=>{const e=(t,e,n,i)=>{const r=new Uint8Array([137,80,78,71,13,10,26,10]),s=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;s[t]=e}const o=(t,e)=>{const n=(t=>{const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})(t),i=e.length,r=new Uint8Array(12+e.length);r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(n,4),r.set(e,8);const o=new Uint8Array(4+e.length);o.set(n,0),o.set(e,4);const a=(t=>{let e=4294967295;for(let n=0;n<t.length;n++)e=s[255&(e^t[n])]^e>>>8;return(4294967295^e)>>>0})(o);return r[8+e.length]=a>>24&255,r[9+e.length]=a>>16&255,r[10+e.length]=a>>8&255,r[11+e.length]=255&a,r},a=new Uint8Array(13);a[0]=t>>24&255,a[1]=t>>16&255,a[2]=t>>8&255,a[3]=255&t,a[4]=e>>24&255,a[5]=e>>16&255,a[6]=e>>8&255,a[7]=255&e,a[8]=8,a[9]=4===i?6:2,a[10]=0,a[11]=0,a[12]=0;const l=o("IHDR",a),c=1+t*i,u=new Uint8Array(e*c);for(let r=0;r<e;r++){u[r*c]=0;const e=r*t*i,s=r*c+1;for(let r=0;r<t*i;r++)u[s+r]=n[e+r]}const d=(t=>{const e=[],n=65535;for(let i=0;i<t.length;i+=n){const r=i+n>=t.length,s=t.slice(i,Math.min(i+n,t.length)),o=s.length,a=new Uint8Array(5+o);a[0]=r?1:0,a[1]=255&o,a[2]=o>>8&255,a[3]=255&~o,a[4]=~o>>8&255,a.set(s,5),e.push(a)}let i=6;for(const t of e)i+=t.length;const r=new Uint8Array(i);r[0]=120,r[1]=1;let s=2;for(const t of e)r.set(t,s),s+=t.length;let o=1,a=0;for(let e=0;e<t.length;e++)o=(o+t[e])%65521,a=(a+o)%65521;const l=(a<<16|o)>>>0;return r[s]=l>>24&255,r[s+1]=l>>16&255,r[s+2]=l>>8&255,r[s+3]=255&l,r})(u),p=o("IDAT",d),h=o("IEND",new Uint8Array(0)),f=new Uint8Array(r.length+l.length+p.length+h.length);let g=0;return f.set(r,g),g+=r.length,f.set(l,g),g+=l.length,f.set(p,g),g+=p.length,f.set(h,g),f};try{ne.info(" Ea_npg_crop begins execution (HTTP upload mode with cropping and resizing)");const n=he.activeDocument,i=t.sourceBounds,r=t.targetSize;if(!i)throw new Error("sourceBounds not provided in parameters");ne.info(" Document size:",n.width,"x",n.height),ne.info(" Crop bounds - left:",i.left,"top:",i.top,"right:",i.right,"bottom:",i.bottom),r&&ne.info(" Target size - width:",r.width,"height:",r.height);const s={documentID:t.documentID,componentSize:t.componentSize,applyAlpha:t.applyAlpha,colorProfile:t.colorProfile,colorSpace:t.colorSpace},o=await vr.getPixels(s),a=await o.imageData.getData({}),l=o.imageData.width,c=o.imageData.height,u=Math.round(a.length/(l*c));ne.info(" Original image size:",l,"x",c,"components:",u);let d=((t,e,n,i,r)=>{const{left:s,top:o,right:a,bottom:l}=r,c=Math.max(0,Math.floor(s)),u=Math.max(0,Math.floor(o)),d=Math.min(e,Math.floor(a))-c,p=Math.min(n,Math.floor(l))-u;if(d<=0||p<=0)throw new Error("Invalid crop bounds: width="+d+", height="+p);const h=new Uint8Array(d*p*i);for(let n=0;n<p;n++){const r=((u+n)*e+c)*i,s=n*d*i;for(let e=0;e<d*i;e++)h[s+e]=t[r+e]}return{data:h,width:d,height:p}})(a,l,c,u,i);if(ne.info(" Cropped image size:",d.width,"x",d.height),r&&r.width&&r.height){const t=Math.floor(r.width),e=Math.floor(r.height);t!==d.width||e!==d.height?(ne.info(" Resizing from",d.width,"x",d.height,"to",t,"x",e),d=((t,e,n,i,r,s)=>{if(e===i&&n===r)return{data:t,width:e,height:n};const o=new Uint8Array(i*r*s),a=e/i,l=n/r;for(let c=0;c<r;c++)for(let r=0;r<i;r++){const u=r*a,d=c*l,p=Math.floor(u),h=Math.floor(d),f=Math.min(p+1,e-1),g=Math.min(h+1,n-1),m=u-p,v=d-h;for(let n=0;n<s;n++){const a=t[(h*e+p)*s+n]*(1-m)*(1-v)+t[(h*e+f)*s+n]*m*(1-v)+t[(g*e+p)*s+n]*(1-m)*v+t[(g*e+f)*s+n]*m*v;o[(c*i+r)*s+n]=Math.round(a)}}return{data:o,width:i,height:r}})(d.data,d.width,d.height,t,e,u),ne.info(" Resized image size:",d.width,"x",d.height)):ne.info(" No resize needed, size already matches target")}const p=e(d.width,d.height,d.data,u);ne.info(" Final PNG size:",p.length,"bytes","dimensions:",d.width,"x",d.height);const h=(()=>{const t=document.getElementById("s_ip");if(t&&t.value){let e=t.value.trim();return e.startsWith("http://")||e.startsWith("https://")||(e="http://"+e),e.match(/:\d+$/)||(e+=":8188"),e}return"undefined"!=typeof window&&window.comfyUIConfig&&window.comfyUIConfig.ip?window.comfyUIConfig.ip:"http://127.0.0.1:8188"})(),f=`${h}/ps/upload_canvas_binary`;ne.info(" Upload file via HTTP to:",f);const g=await fetch(f,{method:"POST",headers:{"Content-Type":"application/octet-stream","X-Filename":"PS_canvas.png"},body:p.buffer});if(!g.ok)throw new Error("HTTP upload failed: "+g.status);const m=await g.json();return ne.info(" HTTP upload successful",JSON.stringify(m)),o.imageData.dispose(),"HTTP_UPLOADED"}catch(t){throw ne.error(" Ea_npg_crop err:",t.message),t}},xp=async()=>{try{const{sourceBounds:t,targetSize:e}=await Ia(),n=he.activeDocument;return await Vt.executeAsModal((async()=>{let i;if(0===t.left&&0===t.top&&0===t.right&&0===t.bottom||0===t.left&&0===t.top&&t.right===n.width&&t.bottom===n.height){const t={documentID:n.id,componentSize:8,applyAlpha:!0,colorProfile:"sRGB IEC61966-2.1",colorSpace:"RGB",targetSize:e};i=await Ea_npg(t),shouldSendCanvasBase64=!1}else{const r={documentID:n.id,componentSize:8,applyAlpha:!0,colorProfile:"sRGB IEC61966-2.1",colorSpace:"RGB",sourceBounds:t,targetSize:e};i=await Ea_npg_crop(r),shouldSendCanvasBase64=!1}return Xt.set(!1),ne.info(" Image saved as base64 PNG"),i}))}catch(t){ne.error(" Error saving image:",t)}},Np=["New Layer","Enter Quick Mask","Object Selection","Lasso","Polygonal Lasso","Elliptical Marquee","Rectangular Marquee","Quick Selection","Exit Quick Mask","Select Inverse","Select Canvas","Load Selection","Border","Smooth","Expand","Contract","Feather","Grow","Similar","Free Transform Selection","Select Sky","Select Subject","Focus Area","Color Range","Path Tool","Selection Change","Deselect","Move Selection","Mask Sent to AI"],zp=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","Mask Sent to AI"],Fp={en_US:Np,Disabled_zh_CN:zp};async function VpBinary(t,e,n=!1){try{const i=await Ss.getDataFolder(),r=await i.createFile(e,{overwrite:!0});await r.write(t),ne.info(` Render saved: ${e}`),n||await Da()}catch(t){ne.error(" Error saving file:",t)}}async function Vp(t,e,n=!1){try{const i=Bp(t);(await(await Ss.getDataFolder()).createFile(e,{overwrite:!0})).write(i),ne.info(" Render saved successfully"),n||await Da()}catch(t){ne.error(" Error saving file:",t)}}let renderImages=[],renderImageUrls=[],currentImageIndex=0,Kr=0,isProcessingMultipleImages=!1;const Da=async(t=null)=>{if(null===t)try{const e=localStorage.getItem("ps_plugin_image_count");t=e?parseInt(e,10):1,ne.info(` loaded imageCount from localStorage: ${t}`)}catch(e){t=1,ne.warn(" Could not load from localStorage, using default: 1")}if(isProcessingMultipleImages&&1===t)ne.info(" Skipping single image update");else try{Kr++,renderImageUrls=[],ne.info(` loading ${t} images...`);for(let e=0;e<t;e++)try{const t=`render_${e}.png`,n=await Ki.getEntry(t);renderImageUrls.push({url:n.url+"?v="+Kr,index:e,filename:t}),ne.info(` Loaded ${t}`)}catch(t){ne.warn(` Failed to load render_${e}.png`);break}ne.info(` Total ${renderImageUrls.length} images loaded`),renderImageUrls.length>0&&(updateImageGrid(renderImageUrls),currentImageCount=renderImageUrls.length)}catch(t){ne.error(` Error in Da: ${t}`)}};Co.subscribe((t=>{window.__imageFitMode=t||"cover",ne.info(` Display mode change: ${t}`);const e=document.querySelector("#imageGrid");e&&("contain"===t?e.classList.add("fit-contain"):e.classList.remove("fit-contain"),ne.info(` Current mode: ${t}, Number of images:${renderImageUrls.length}`))}));const updateImageGrid=t=>{ne.info(` updateImageGrid called with ${t.length} images`);let e=document.querySelector("#addtolayerBack");if(e||(e=document.querySelector("main")),!e)return void ne.error(" Cannot find container");const n=document.querySelector("#imageGrid");n&&n.remove(),Array.from(e.children).forEach((t=>{"imageGrid"===t.id||t.classList.contains("blackbg")||t.classList.contains("zone")||t.classList.contains("section")||t.classList.contains("overlay")||"foreground"===t.id||"background"===t.id||"sliderText"===t.id||(t.style.cssText="display:none!important;visibility:hidden!important;opacity:0!important;")}));const i=t.length;let r="cover";try{r=window.__imageFitMode||"cover"}catch(t){r="cover"}const s=document.createElement("div");s.id="imageGrid",s.className=1===i?"single-image":"multi-image";"contain"===(window.__imageFitMode||"cover")&&s.classList.add("fit-contain"),s.style.cssText=`\n    display:flex!important;\n    flex-wrap:wrap!important;\n    position:absolute!important;\n    top:0!important;\n    left:0!important;\n    right:0!important;\n    bottom:0!important;\n    width:100%!important;\n    height:100%!important;\n    z-index:1!important;\n    background:#1a1a1a!important;\n    padding:${1===i?"0":"2px"}!important;\n    margin:0!important;\n    box-sizing:border-box!important;\n    visibility:visible!important;\n    opacity:1!important;\n  `,t.forEach(((t,e)=>{const n=document.createElement("div");n.className="grid-item",n.style.cssText=`\n      position:relative!important;\n    z-index:2!important;\n    overflow:hidden!important;\n    border-radius:${1===i?"0":"4px"}!important;\n    background:#252525!important;\n    cursor:pointer!important;\n    display:block!important;\n    visibility:visible!important;\n    box-sizing:border-box!important;\n    border:3px solid transparent!important;\n    transition:border-color 0.15s ease, z-index 0s!important;\n    `;const r=document.createElement("img");if(r.src=t.url,r.className="grid-image",r.style.cssText=`\n      width:100%!important;\n      height:100%!important;\n      object-fit:${1===i?singleImageFitMode:"cover"}!important;\n      display:block!important;\n      pointer-events:none!important;\n    `,r.onload=()=>ne.info(` Image ${e+1} displayed`),r.onerror=()=>ne.error(` Image ${e+1} failed`),i>1){const t=document.createElement("span");t.textContent=e+1,t.style.cssText="\n        position:absolute!important;\n        bottom:8px!important;\n        right:10px!important;\n        background:rgba(0,0,0,0.8)!important;\n        color:white!important;\n        padding:4px 12px!important;\n        border-radius:4px!important;\n        font-size:16px!important;\n        font-weight:bold!important;\n        pointer-events:none!important;\n        z-index:10!important;\n      ",n.appendChild(t)}i>1&&(n.onmouseenter=function(){this.style.borderColor="#1f91ff",this.style.zIndex="200"},n.onmouseleave=function(){this.style.borderColor="transparent",this.style.zIndex="2"}),n.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),ne.info(` Clicked image ${e+1}`),xaWithIndex(e)}),!0),n.appendChild(r),s.appendChild(n)})),e.style.position="relative",e.appendChild(s),ne.info(` Grid created: ${i} image(s)`),setTimeout((()=>{const t=document.querySelector("uxp-panel"),e=document.querySelector(".section");t&&e&&t.addEventListener("mouseenter",(()=>{e.style.visibility="visible",e.style.opacity="1",void 0!==ot&&ot.to(e,{x:"0%",duration:.3,ease:"power1.out"})}))}),100)},xaWithIndex=async(t=0)=>{var e;if(ne.info(` xaWithIndex called with index: ${t}`),null!=(e=he.documents)&&e.length)try{const e=he.activeDocument.selection.bounds,n=`render_${t}.png`;ne.info(` Inserting ${n} to layer`);const i=(await Ki.getEntry(n)).nativePath.replace(/\\/g,"/"),r=await Ss.createSessionToken(await Ss.getEntryWithUrl(`file://${i}`));hr++,await he.activeDocument.suspendHistory((async()=>{e&&await fg(),e&&await dg(),await hg(r),e&&await cg(e),await pg(e),e&&await gg(),e&&await ug()}),`Added Image ${t+1} to Layer`),ne.info(` Image ${t+1} added to layer successfully`)}catch(e){ne.error(` Error adding image ${t+1} to layer:`,e)}else ne.warn(" No document open in Photoshop")};window.xaWithIndex=xaWithIndex;const loadImageCountFromConfig=async()=>{try{const t=await Ki.getEntry("config.json"),e=await t.read({format:"utf8"}),n=JSON.parse(e);if(n.imageCount&&n.imageCount>=1&&n.imageCount<=4)return currentImageCount=n.imageCount,ne.info(` Loaded imageCount from config: ${currentImageCount}`),currentImageCount}catch(t){ne.warn(` Could not load imageCount from config: ${t}`)}return 1};function Hp(t,e,n){let i,r,s,o,a,l,c,u,d,p,h;Y(t,rt,(t=>n(12,i=t))),Y(t,Nt,(t=>n(13,r=t))),Y(t,Dt,(t=>n(14,s=t))),Y(t,Tn,(t=>n(15,o=t))),Y(t,On,(t=>n(16,a=t))),Y(t,Un,(t=>n(17,l=t))),Y(t,Xt,(t=>n(18,c=t))),Y(t,on,(t=>n(19,u=t))),Y(t,is,(t=>n(20,d=t))),Y(t,Pi,(t=>n(21,p=t))),Y(t,ki,(t=>n(22,h=t)));let f=null,g=null,m=null;const v=()=>{var t,e,n;const i=Fp.en_US;if(null!=(t=he.documents)&&t.length){const t=he.activeDocument.activeHistoryState,r=he.activeDocument.historyStates,s=r.findIndex((e=>e.id===t.id));if(f){if(t.id!==f.id){let n=function(){(o||m&&!o||!m&&o)&&y(),i.includes(t.name)||$()};const o=(null==(e=he.activeDocument.selection)?void 0:e.bounds)||null;if(g=s>=0&&s<r.length-1?r[s+1]:null,t.id<f.id){if("Mask Sent to AI"===(null==g?void 0:g.name))return;n()}else"Mask Sent to AI"!==t.name&&n();f=t,m=o}}else f=t,m=(null==(n=he.activeDocument.selection)?void 0:n.bounds)||null}},$=async()=>{ne.info(" Canvas Changed: "),Ve(Xt,c=!0,c),_()};const y=async()=>{u&&Ve(Xt,c=!0,c),ne.info(" Mask Changed: "),Ve(is,d=!0,d),_()};async function _(){h&&await w()}async function w(){Dp({generating:!0});let t={};const e=[];c&&e.push(xp().then((e=>{t.canvasBase64=shouldSendCanvasBase64?e:void 0}))),d&&e.push(Rp().then((e=>{var n,i;t.maskBase64=e,u&&null!=(i=null==(n=he.activeDocument)?void 0:n.selection)&&i.bounds&&Ve(Xt,c=!0,c)}))),l&&e.push(x().then((e=>{t.configdata=e}))),await Promise.all(e),t.queue=!0,ne.info(" Sending Queue ~ combinedData:",t),await Lp(JSON.stringify(t))}async function b(){[Dt,Nt,Tn,On].forEach((t=>{t.subscribe((async e=>{if(Un.set(!0),await _(),t===On){var n=document.getElementById("pPrompt"),i=document.getElementById("s_PsPrompt");n&&(n.value=e),i&&(i.value=e)}if(t===Tn){var r=document.getElementById("s_NgPrompt");r&&(r.value=e)}}))}))}const x=async()=>{let t={positive:a,negative:o,seed:s,slider:parseFloat(r),pluginVer:ss,imageCount:currentImageCount};return Un.set(!1),ne.info(" Config File Saved: ",t),t};return H=()=>{setTimeout((async()=>{Vs(),E()}),100)},j=()=>{E("http://0.0.0.0:8188"),setTimeout((()=>{Ve(rt,i="http://127.0.0.1:8188",i),E(),Vs()}),100)},E=(t=i)=>{("http://127.0.0.1"==t||"127.0.0.1"==t)&&(t="http://127.0.0.1:8188"),("https://127.0.0.1"==t||"127.0.0.1:8187"==t)&&(t="https://127.0.0.1:8187"),Ve(rt,i=t,i),t=t.replace(/\/$/,"");const e=document.querySelector("webview");e&&(t.startsWith("https://")||t.startsWith("wss://")?e.src=`https://${t.replace("wss://","").replace("https://","")}`:e.src=`http://${t.replace("ws://","").replace("http://","")}`,ne.info(" Webview Updated: ",e.src))},[v,function(){var t=BigInt(Math.round(1e6*Math.random())).toString();Ve(Dt,s=t,s),ne.info(" Random seed: ",s),setTimeout((function(){try{var e=document.getElementById("seedInput_prompt");e&&(e.value=t);var n=document.getElementById("seedInput_settings");n&&(n.value=t)}catch(t){ne.info(" Error updating seed: "+t)}}),50),p&&(Ve(Un,l=!0,l),w())},_,w,b,function(){let t=1;try{const e=localStorage.getItem("ps_plugin_image_count");e&&(t=parseInt(e,10),ne.info(` S() loaded imageCount from localStorage: ${t}`))}catch(t){ne.warn(" Could not load from localStorage")}Da(t),setInterval(v,300),b(),ne.info(" First Run Completed"),H()},x,H,j]}class cn extends $e{constructor(t){super(),we(this,t,Hp,null,be,{checkHistory:0,randomize:1,smtchanged:2,SendQueue:3,checkforchanges:4,startCommand:5,saveConfigFile:6,applyIP:7,resetIP:8})}get checkHistory(){return this.$$.ctx[0]}get randomize(){return this.$$.ctx[1]}get smtchanged(){return this.$$.ctx[2]}get SendQueue(){return this.$$.ctx[3]}get checkforchanges(){return this.$$.ctx[4]}get startCommand(){return this.$$.ctx[5]}get saveConfigFile(){return this.$$.ctx[6]}get applyIP(){return this.$$.ctx[7]}get resetIP(){return this.$$.ctx[8]}}const Up='<svg width="34" height="35" viewBox="0 0 34 35" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_2954_186)">\n<path d="M21.6696 18.4804H21.6496C22.3196 17.6504 21.8696 16.5304 21.1196 15.9204C19.6696 14.5904 17.2896 12.6604 15.1496 12.2404C13.5096 12.2204 13.3496 14.1904 13.3096 15.4604C13.2296 17.4904 13.0996 19.8304 13.6796 21.7604C14.8696 24.7204 20.5296 19.7604 21.6696 18.4804Z" fill="#7E7F7F"/>\n<path d="M11.77 22.1707C10.97 21.5107 10.51 20.5107 9.97001 19.6407C9.20001 18.6807 7.48001 19.3207 7.61001 20.5807C7.65001 21.8007 9.22001 23.4307 9.89001 24.1307C11.13 25.3707 13.07 23.3707 11.77 22.1707Z" fill="#7E7E7E"/>\n<path d="M8.36996 15.7101C10.27 16.4801 10.49 13.6101 11.74 12.8401C12.43 12.2101 12.27 10.9901 11.37 10.6201C10.82 10.3701 10.18 10.5001 9.79996 10.9401C8.79996 12.0501 6.31996 14.5101 8.35996 15.7101H8.36996Z" fill="#7E7E7E"/>\n<path d="M23.9399 17.4994C23.9899 21.8594 19.7799 25.3495 15.4899 24.4495C14.8099 24.3195 14.1399 24.7495 14.0199 25.4395C13.8699 27.4195 16.4599 27.0594 17.6999 27.0494C28.6599 25.8794 29.5599 10.5695 18.8199 8.11945C17.6099 7.85945 16.2399 7.85945 15.0299 8.09945H14.9999C13.3999 8.41945 13.8899 10.8795 15.4899 10.5595C19.7699 9.63945 23.9999 13.1394 23.9399 17.4994Z" fill="#7E7F7F"/>\n</g>\n<defs>\n<clipPath id="clip0_2954_186">\n<rect width="18.82" height="19.16" fill="white" transform="translate(7.58984 7.91992)"/>\n</clipPath>\n</defs>\n</svg>\n',Ma='<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.23426 8.86913H8.37926V7.33875C8.37926 6.50769 9.05297 5.83398 9.88403 5.83398C10.7151 5.83398 11.3888 6.50769 11.3888 7.33875V19.0591C11.3888 19.647 11.8654 20.1237 12.4534 20.1237L24.1737 20.1236C25.0047 20.1236 25.6785 20.7973 25.6785 21.6284C25.6785 22.4595 25.0047 23.1332 24.1737 23.1332H23.0287V24.6636C23.0287 25.4946 22.355 26.1683 21.5239 26.1683C20.6929 26.1683 20.0191 25.4946 20.0191 24.6636V23.1332H12.3924C10.176 23.1332 8.37926 21.3364 8.37926 19.1201V11.8787H7.23426C6.4032 11.8787 5.72949 11.205 5.72949 10.3739C5.72949 9.54284 6.4032 8.86913 7.23426 8.86913ZM13.4128 8.86913V11.8787H18.9545C19.5425 11.8787 20.0191 12.3553 20.0191 12.9433V18.0997H23.0287V12.8823C23.0287 10.6659 21.232 8.86915 19.0156 8.86914L13.4128 8.86913Z" fill="#7E7E7E"/>\n</svg>\n';function jp(t){let e,n;return e=new Fe({props:{data:Up,size:"24"}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function qp(t){let e,n;return e=new Fe({props:{data:Ma,size:"24"}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Wp(t){let e,n;return e=new Fe({props:{data:Sp,size:Ra}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Gp(t){let e,n;return e=new Fe({props:{data:Cp,size:Ra}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Kp(t){let e,n,i,r,s=t[4].t("render")+"";return i=new Fe({props:{style:"margin-right: -4px;",data:ka,size:"24"}}),{c(){e=K(s),n=N(),V(i.$$.fragment)},m(t,s){R(t,e,s),R(t,n,s),F(i,t,s),r=!0},p(t,n){(!r||16&n)&&s!==(s=t[4].t("render")+"")&&Z(e,s)},i(t){r||(T(i.$$.fragment,t),r=!0)},o(t){I(i.$$.fragment,t),r=!1},d(t){t&&(M(e),M(n)),B(i,t)}}}function Yp(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_;function w(e){t[9](e)}e=new cn({props:{}}),t[8](e);let b={class:"tiny icon",toggle:!0,$$slots:{default:[jp]},$$scope:{ctx:t}};function x(e){t[11](e)}void 0!==t[5]&&(b.value=t[5]),s=new Le({props:b}),Q.push((()=>_e(s,"value",w))),s.$on("mouseenter",t[10]);let C={class:"tiny icon",toggle:!0,$$slots:{default:[qp]},$$scope:{ctx:t}};function A(e){t[13](e)}void 0!==t[6]&&(C.value=t[6]),l=new Le({props:C}),Q.push((()=>_e(l,"value",x))),l.$on("mouseenter",t[12]),l.$on("click",t[7]);let k={toggle:!0,style:"height: 42px;width: 42px;",class:"ghost icon",$$slots:{default:[Wp]},$$scope:{ctx:t}};function S(e){t[14](e)}void 0!==t[1]&&(k.value=t[1]),p=new Le({props:k}),Q.push((()=>_e(p,"value",A)));let E={toggle:!0,style:"height: 42px;width: 42px;",class:"ghost icon",$$slots:{default:[Gp]},$$scope:{ctx:t}};return void 0!==t[0]&&(E.value=t[0]),g=new Le({props:E}),Q.push((()=>_e(g,"value",S))),y=new Le({props:{style:"min-width: 90px; margin-left:4px",class:"icon",id:"rndrbtn",$$slots:{default:[Kp]},$$scope:{ctx:t}}}),y.$on("mouseenter",t[15]),y.$on("click",(function(){tt(t[2].SendQueue)&&t[2].SendQueue.apply(this,arguments)})),y.$on("contextmenu",(function(){tt(t[2].randomize)&&t[2].randomize.apply(this,arguments),setTimeout((function(){tt(t[2].SendQueue)&&t[2].SendQueue.apply(this,arguments)}),100)})),{c(){V(e.$$.fragment),n=N(),i=L("main"),r=L("div"),V(s.$$.fragment),a=N(),V(l.$$.fragment),u=N(),d=L("div"),V(p.$$.fragment),f=N(),V(g.$$.fragment),v=N(),V(y.$$.fragment),O(r,"class","floatcontainer svelte-ralsjh"),O(d,"class","style-containerBG svelte-ralsjh"),O(i,"class","svelte-ralsjh")},m(o,c){F(e,o,c),R(o,n,c),R(o,i,c),$(i,r),F(s,r,null),$(r,a),F(l,r,null),$(i,u),$(i,d),F(p,d,null),$(d,f),F(g,d,null),$(d,v),F(y,d,null),t[16](i),_=!0},p(n,[i]){t=n;e.$set({});const r={};2097152&i&&(r.$$scope={dirty:i,ctx:t}),!o&&32&i&&(o=!0,r.value=t[5],me((()=>o=!1))),s.$set(r);const a={};2097152&i&&(a.$$scope={dirty:i,ctx:t}),!c&&64&i&&(c=!0,a.value=t[6],me((()=>c=!1))),l.$set(a);const u={};2097152&i&&(u.$$scope={dirty:i,ctx:t}),!h&&2&i&&(h=!0,u.value=t[1],me((()=>h=!1))),p.$set(u);const d={};2097152&i&&(d.$$scope={dirty:i,ctx:t}),!m&&1&i&&(m=!0,d.value=t[0],me((()=>m=!1))),g.$set(d);const f={};2097168&i&&(f.$$scope={dirty:i,ctx:t}),y.$set(f)},i(t){_||(T(e.$$.fragment,t),T(s.$$.fragment,t),T(l.$$.fragment,t),T(p.$$.fragment,t),T(g.$$.fragment,t),T(y.$$.fragment,t),_=!0)},o(t){I(e.$$.fragment,t),I(s.$$.fragment,t),I(l.$$.fragment,t),I(p.$$.fragment,t),I(g.$$.fragment,t),I(y.$$.fragment,t),_=!1},d(r){r&&(M(n),M(i)),t[8](null),B(e,r),B(s),B(l),B(p),B(g),B(y),t[16](null)}}}const Ra="36";function Jp(t,e,n){let i,r,s,o,a,l,c,u,d,p,h;Y(t,Ln,(t=>n(17,i=t))),Y(t,_s,(t=>n(18,r=t))),Y(t,is,(t=>n(19,s=t))),Y(t,Xt,(t=>n(20,o=t))),Y(t,Jn,(t=>n(0,a=t))),Y(t,Yn,(t=>n(1,l=t))),Y(t,un,(t=>n(4,c=t))),Y(t,ki,(t=>n(5,u=t))),Y(t,on,(t=>n(6,d=t))),yt((()=>{const t=document.querySelector("uxp-panel");t&&(t.addEventListener("mouseenter",(()=>{ot.to(h,{paddingBottom:10,y:0,duration:i?0:.3,ease:"power1.out"})})),t.addEventListener("mouseleave",(()=>{r||ot.to(h,{paddingBottom:0,y:100,duration:i?0:.2,ease:"power1.in"})})))}));return t.$$.update=()=>{2&t.$$.dirty&&l&&Jn.set(!1),1&t.$$.dirty&&a&&Yn.set(!1)},[a,l,p,h,c,u,d,function(){Ve(Xt,o=!0,o),Ve(is,s=!0,s),p.smtchanged()},function(t){Q[t?"unshift":"push"]((()=>{p=t,n(2,p)}))},function(t){u=t,ki.set(u)},t=>St(t,c.t("renderOnPSChanges")),function(t){d=t,on.set(d)},t=>St(t,c.t("cropToSelectionArea")),function(t){l=t,Yn.set(l)},function(t){a=t,Jn.set(a)},t=>St(t,c.t("randomizeHint")),function(t){Q[t?"unshift":"push"]((()=>{h=t,n(3,h)}))}]}class Qp extends $e{constructor(t){super(),we(this,t,Jp,Yp,be,{})}}function Zp(t){let e,n,i,r,s,o,a,l,c,u;return{c(){e=L("div"),n=L("div"),i=L("div"),r=L("div"),r.innerHTML='<div class="slider-handle svelte-1n6qwoy"></div>',s=N(),o=L("div"),o.textContent=`${Nt}`,a=N(),l=L("div"),l.textContent="creative",O(r,"id","foreground"),O(r,"class","svelte-1n6qwoy"),O(i,"id","background"),O(i,"class","svelte-1n6qwoy"),O(o,"id","sliderText"),O(o,"class","svelte-1n6qwoy"),O(l,"class","slider-caption svelte-1n6qwoy"),O(n,"class","section svelte-1n6qwoy"),O(e,"id","addtolayerBack"),O(e,"class","zone svelte-1n6qwoy")},m(d,p){R(d,e,p),$(e,n),$(n,i),$(i,r),t[5](r),t[6](i),$(n,s),$(n,o),t[7](o),$(n,a),$(n,l),t[8](n),t[9](e),c||(u=ie(n,"click",Xp),c=!0)},p:le,i:le,o:le,d(n){n&&M(e),t[5](null),t[6](null),t[7](null),t[8](null),t[9](null),c=!1,u()}}}const Xp=t=>t.stopPropagation();function eg(t,e,n){let i,r;Y(t,Es,(t=>n(12,i=t))),Y(t,Ln,(t=>n(13,r=t)));let s=null,o=null,a=null,l=null,c=null,u=!1,d=0;const p=t=>{if(s&&o&&a){const e=Math.min(100,Math.max(0,t));d=e,ot.to(s,{height:`${e}%`,duration:r||r?0:.15}),n(1,o.innerText=`${e}`,o),n(1,o.style.letterSpacing=e>=100?"-0.15em":"normal",o)}},h=t=>{if(s){u=!0;const e=f(t.clientY);void 0!==e&&p(e),document.addEventListener("mousemove",g),document.addEventListener("mouseup",m)}};function f(t){var e;if(a&&s){const n=a.getBoundingClientRect(),i=(null==(e=s.querySelector(".slider-handle"))?void 0:e.clientHeight)||0,r=t-n.top-i;return Math.round((n.height-r)/n.height*100)}}const g=t=>{const e=f(t.clientY);void 0!==e&&p(e)},m=t=>{u=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),Nt.set(d.toString())};return yt((()=>{var t;return c&&l&&(c.addEventListener("mousedown",h),l.addEventListener("mouseenter",(()=>ot.to(c,{x:"0%",duration:r||r?0:.3,ease:"power1.out"}))),i||null==(t=document.querySelector("uxp-panel"))||t.addEventListener("mouseleave",(()=>{u||ot.to(c,{x:"140%",duration:r||r?0:.2,ease:"power1.in"})}))),Nt.subscribe((t=>{t?p(parseInt(t)):(Nt.set("0"),p(0))})),()=>{null==c||c.removeEventListener("mousedown",h)}})),[s,o,a,l,c,function(t){Q[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){Q[t?"unshift":"push"]((()=>{a=t,n(2,a)}))},function(t){Q[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){Q[t?"unshift":"push"]((()=>{c=t,n(4,c)}))},function(t){Q[t?"unshift":"push"]((()=>{l=t,n(3,l)}))}]}class tg extends $e{constructor(t){super(),we(this,t,eg,Zp,be,{})}}const ng='<svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21.6809 16.2095C21.6809 16.5068 21.8334 16.772 22.0878 16.9206C23.1918 17.5625 23.5706 18.9877 22.9343 20.0987C22.6239 20.6386 22.1235 21.0244 21.5246 21.1855C20.9294 21.3427 20.307 21.2618 19.7725 20.9513C19.5197 20.8036 19.2186 20.8036 18.9657 20.9497C18.709 21.0968 18.5558 21.3637 18.5558 21.6616C18.5558 22.9446 17.5179 23.9894 16.242 23.9894C14.9653 23.9894 13.9275 22.9446 13.9275 21.6616C13.9275 21.3628 13.7742 21.0968 13.5176 20.949C13.2647 20.8036 12.9636 20.8036 12.7123 20.9513C12.1771 21.2618 11.5539 21.3442 10.9572 21.1847C10.3589 21.0237 9.85945 20.6379 9.54981 20.0987C8.91342 18.9877 9.29308 17.5617 10.3963 16.9199C10.6507 16.7728 10.8024 16.5068 10.8024 16.2095C10.8024 15.9123 10.6507 15.6463 10.3963 15.4985C9.29308 14.8582 8.91342 13.4329 9.54981 12.3212C9.85945 11.7812 10.3589 11.3954 10.958 11.2343C11.5554 11.074 12.1771 11.1581 12.7123 11.4685C12.9643 11.6163 13.2655 11.6148 13.5176 11.4701C13.7742 11.3222 13.9275 11.0561 13.9275 10.7574C13.9275 9.47452 14.9653 8.42969 16.242 8.42969C17.5179 8.42969 18.5558 9.47452 18.5558 10.7574C18.5558 11.0554 18.709 11.3222 18.9657 11.4692C19.2193 11.6163 19.5205 11.6163 19.7725 11.4685C20.3063 11.1581 20.9285 11.0756 21.5246 11.2335C22.1235 11.3946 22.6239 11.7805 22.9343 12.3204C23.5706 13.4321 23.1918 14.8574 22.0885 15.4992C21.8334 15.647 21.6809 15.9123 21.6809 16.2095ZM16.2419 18.5434C14.955 18.5434 13.9079 17.4962 13.9079 16.2094C13.9079 14.9226 14.955 13.8755 16.2419 13.8755C17.5287 13.8755 18.5758 14.9226 18.5758 16.2094C18.5758 17.4962 17.5287 18.5434 16.2419 18.5434Z" fill="#7D7D7D"/>\r\n</svg>\r\n',sg='<svg width="35" height="33" viewBox="0 0 35 33" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5353 8.48828C14.7576 8.48828 14.1271 9.11877 14.1271 9.89652V12.0089C14.1271 12.7866 14.7576 13.4172 15.5353 13.4172H17.002V16.1925H14.4455C13.376 16.1925 12.5091 17.0595 12.5091 18.1288V19.5832H10.9004C10.1227 19.5832 9.49219 20.2136 9.49219 20.9914V23.1038C9.49219 23.8816 10.1227 24.512 10.9004 24.512H14.8902C15.668 24.512 16.2984 23.8816 16.2984 23.1038V20.9914C16.2984 20.2136 15.668 19.5832 14.8902 19.5832H13.5653V18.1288C13.5653 17.6428 13.9594 17.2486 14.4455 17.2486H20.6149C21.101 17.2486 21.4951 17.6428 21.4951 18.1288V19.5832H20.17C19.3923 19.5832 18.7618 20.2136 18.7618 20.9914V23.1038C18.7618 23.8816 19.3923 24.512 20.17 24.512H24.1598C24.9376 24.512 25.5681 23.8816 25.5681 23.1038V20.9914C25.5681 20.2136 24.9376 19.5832 24.1598 19.5832H22.5513V18.1288C22.5513 17.0595 21.6844 16.1925 20.6149 16.1925H18.0582V13.4172H19.5251C20.3029 13.4172 20.9333 12.7866 20.9333 12.0089V9.89652C20.9333 9.11877 20.3029 8.48828 19.5251 8.48828H15.5353Z" fill="#7D7D7D"/>\r\n</svg>\r\n',ig='<svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.4264 10.8177C10.8397 10.8177 10.3639 11.2934 10.3639 11.8802V13.09C10.3639 13.7262 9.84817 14.242 9.21194 14.242C8.5757 14.242 8.05994 13.7262 8.05994 13.09V11.8802C8.05994 10.0209 9.5672 8.51367 11.4264 8.51367H12.6533C13.2896 8.51367 13.8053 9.02944 13.8053 9.66567C13.8053 10.3019 13.2896 10.8177 12.6533 10.8177H11.4264Z" fill="#7D7D7D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.1429 9.66567C18.1429 9.02944 18.6587 8.51367 19.2949 8.51367H20.5048C22.3641 8.51367 23.8712 10.021 23.8712 11.8802V13.1071C23.8712 13.7433 23.3555 14.2591 22.7192 14.2591C22.083 14.2591 21.5672 13.7433 21.5672 13.1071V11.8802C21.5672 11.2933 21.0916 10.8177 20.5048 10.8177H19.2949C18.6587 10.8177 18.1429 10.3019 18.1429 9.66567Z" fill="#7D7D7D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9.21194 18.5938C9.84817 18.5938 10.3639 19.1095 10.3639 19.7457V20.9727C10.3639 21.5595 10.8396 22.0352 11.4264 22.0352H12.6362C13.2725 22.0352 13.7882 22.5509 13.7882 23.1872C13.7882 23.8234 13.2725 24.3392 12.6362 24.3392H11.4264C9.56722 24.3392 8.05994 22.832 8.05994 20.9727V19.7457C8.05994 19.1095 8.5757 18.5938 9.21194 18.5938Z" fill="#7D7D7D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M22.7197 18.6016C23.356 18.6016 23.8717 19.1173 23.8717 19.7536V20.9635C23.8717 22.8226 22.3646 24.33 20.5053 24.33H19.2783C18.6421 24.33 18.1263 23.8142 18.1263 23.178C18.1263 22.5417 18.6421 22.026 19.2783 22.026H20.5053C21.092 22.026 21.5677 21.5503 21.5677 20.9635V19.7536C21.5677 19.1173 22.0835 18.6016 22.7197 18.6016Z" fill="#7D7D7D"/>\n</svg>\n';function rg(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g;return e=new cn({props:{}}),t[3](e),o=new Fe({props:{data:ng,size:"32"}}),c=new Fe({props:{data:sg,size:"32"}}),p=new Fe({props:{data:ig,size:"32"}}),{c(){V(e.$$.fragment),n=N(),i=L("main"),r=L("div"),s=L("div"),V(o.$$.fragment),a=N(),l=L("div"),V(c.$$.fragment),u=N(),d=L("div"),V(p.$$.fragment),O(s,"class","style-containerBG icon svelte-1r95fc8"),O(l,"class","style-containerBG icon svelte-1r95fc8"),O(r,"class","buttonSeg svelte-1r95fc8"),O(d,"class","style-containerBG icon svelte-1r95fc8"),O(i,"class","svelte-1r95fc8")},m(m,v){F(e,m,v),R(m,n,v),R(m,i,v),$(i,r),$(r,s),F(o,s,null),$(r,a),$(r,l),F(c,l,null),$(i,u),$(i,d),F(p,d,null),t[4](i),h=!0,f||(g=[ie(s,"click",Yr("comfyui.photoshop.plugin.settings")),ie(l,"click",Yr("comfyui.photoshop.plugin.web")),ie(d,"click",t[2])],f=!0)},p(t,[n]){e.$set({})},i(t){h||(T(e.$$.fragment,t),T(o.$$.fragment,t),T(c.$$.fragment,t),T(p.$$.fragment,t),h=!0)},o(t){I(e.$$.fragment,t),I(o.$$.fragment,t),I(c.$$.fragment,t),I(p.$$.fragment,t),h=!1},d(r){r&&(M(n),M(i)),t[3](null),B(e,r),B(o),B(c),B(p),t[4](null),f=!1,lt(g)}}}async function og(t){try{const e=require("uxp"),n=Array.from(e.pluginManager.plugins).find((t=>t.id===e.entrypoints._pluginInfo.id));n&&await n.showPanel(t)}catch(t){}}function Yr(t){return async function(e){await og(t)}}function ag(t,e,n){let i,r,s,o;return Y(t,Es,(t=>n(5,i=t))),Y(t,Ln,(t=>n(6,r=t))),yt((()=>{const t=document.querySelector("uxp-panel");if(t){const e=()=>{ot.to(o,{x:"-125%",duration:r?0:.3,ease:"power1.in"})},n=()=>{ot.to(o,{x:"0%",duration:r?0:.3,ease:"power1.out"})};return i||(t.addEventListener("mouseleave",e),t.addEventListener("mouseenter",n)),()=>{t.removeEventListener("mouseleave",e),t.removeEventListener("mouseenter",n)}}})),[s,o,function(){Co.update((t=>"cover"===t?"contain":"cover"))},function(t){Q[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){Q[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class lg extends $e{constructor(t){super(),we(this,t,ag,rg,be,{})}}let hr=0;const xa=async()=>{var t;if(renderImageUrls.length>0)await xaWithIndex(0);else if(null!=(t=he.documents)&&t.length)try{const t=he.activeDocument.selection.bounds,e=(await Ki.getEntry("render.png")).nativePath.replace(/\\/g,"/"),n=await Ss.createSessionToken(await Ss.getEntryWithUrl(`file://${e}`));hr++,await he.activeDocument.suspendHistory((async()=>{t&&await fg(),t&&await dg(),await hg(n),t&&await cg(t),await pg(t),t&&await gg(),t&&await ug()}),"Added to Layer")}catch(t){ne.error(" Error adding to layer:",t)}};function mg(t){let e,n,i,r,s,o,a,l=t[1].t("addToLayer")+"",c=t[1].t("clickEmptyArea")+"";return{c(){e=L("main"),n=L("span"),i=L("b"),r=K(l),s=K(" ("),o=K(c),a=K(")"),O(n,"class","discrip svelte-5sl45q"),mt(n,"visible",t[0]),O(e,"id","addtolayerBack"),O(e,"class","svelte-5sl45q")},m(t,l){R(t,e,l),$(e,n),$(n,i),$(i,r),$(n,s),$(n,o),$(n,a)},p(t,[e]){2&e&&l!==(l=t[1].t("addToLayer")+"")&&Z(r,l),2&e&&c!==(c=t[1].t("clickEmptyArea")+"")&&Z(o,c),1&e&&mt(n,"visible",t[0])},i:le,o:le,d(t){t&&M(e)}}}function _g(t,e,n){let i;Y(t,un,(t=>n(1,i=t)));let r=!1;function s(){n(0,r=!0)}function o(){n(0,r=!1)}return yt((()=>{const t=document.querySelectorAll(".preview-item"),e=document.querySelector("uxp-panel");t.forEach(((t,e)=>{t.addEventListener("mouseenter",s),t.addEventListener("click",(()=>{xa()}))})),null==e||e.addEventListener("mouseleave",o)})),[r,i,0]}function PreviewGrid(t,e,n){let i;return Y(t,RenderImages,(t=>n(0,i=t))),[i,function(t){xa()}]}ug=async()=>{await _t([{_obj:"set",_target:[{_ref:"channel",_property:"selection"}],to:{_ref:"channel",_name:"SavedSelection"},_options:{dialogOptions:"dontDisplay"}},{_obj:"delete",_target:[{_ref:"channel",_name:"SavedSelection"}],_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Selection restored")},fg=async()=>{await _t([{_obj:"duplicate",_target:[{_ref:"channel",_property:"selection"}],name:"SavedSelection",_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Selection saved")},cg=async t=>{Qe(on)&&((t=ji||La(t))?await Vt.executeAsModal((async()=>{if(t){const e=t.right-t.left,n=t.bottom-t.top,i=he.activeDocument.activeLayers[0],r=e/i.bounds.width*100,s=n/i.bounds.height*100;await _t([{_obj:"transform",freeTransformCenterState:{_enum:"quadCenterState",_value:"QCSAverage"},width:{_unit:"percentUnit",_value:r},height:{_unit:"percentUnit",_value:s},_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Image resized to fit selection box");const o=t.left-i.bounds.left,a=t.top-i.bounds.top;await _t([{_obj:"move",_target:[{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}],to:{_obj:"offset",horizontal:{_unit:"pixelsUnit",_value:o},vertical:{_unit:"pixelsUnit",_value:a}},_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Layer position adjusted to match selection box")}})):ne.warn(" No selection box found. Skipping resize."))},dg=async()=>{const t=await he.activeDocument.selection.bounds,e=t.right-t.left,n=t.bottom-t.top,i=Math.sqrt(e*n);Qe(wi)&&await Vt.executeAsModal((async()=>{await _t([{_obj:"expand",by:{_unit:"pixelsUnit",_value:.02*i},selectionModifyEffectAtCanvasBounds:!1,_options:{dialogOptions:"dontDisplay"}},{_obj:"feather",radius:{_unit:"pixelsUnit",_value:.01*i},selectionModifyEffectAtCanvasBounds:!1,_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Mask edge expanded and feathered")})),await Vt.executeAsModal((async()=>{await _t([{_obj:"make",_target:[{_ref:"layer"}],using:{_obj:"layer",name:"TempLayerForMasking"},layerID:120,_options:{dialogOptions:"dontDisplay"}},{_obj:"make",new:{_class:"channel"},at:{_ref:"channel",_enum:"channel",_value:"mask"},using:{_enum:"userMaskEnabled",_value:"revealSelection"},_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Mask and Temp Layer created")}))},hg=async t=>{await Vt.executeAsModal((async()=>{await _t([{_obj:"placeEvent",target:{_path:t,_kind:"local"}},{_obj:"set",_target:[{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}],to:{_obj:"layer",name:"render "+hr},_options:{dialogOptions:"dontDisplay"}},{_obj:"set",_target:[{_ref:"channel",_property:"selection"}],to:{_enum:"ordinal",_value:"allEnum"},_options:{dialogOptions:"dontDisplay"}},{_obj:"align",_target:[{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}],using:{_enum:"alignDistributeSelector",_value:"ADSCentersV"},alignToCanvas:!1,_options:{dialogOptions:"dontDisplay"}},{_obj:"align",_target:[{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}],using:{_enum:"alignDistributeSelector",_value:"ADSCentersH"},alignToCanvas:!1,_options:{dialogOptions:"dontDisplay"}},{_obj:"set",_target:[{_ref:"channel",_property:"selection"}],to:{_enum:"ordinal",_value:"none"},_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Layer placed and aligned")}))},pg=async t=>{if(!Qe(on)||Qe(on)&&!t){const t=he.activeDocument.width,e=he.activeDocument.height,n=he.activeDocument.activeLayers[0],i=n.bounds.width,r=n.bounds.height;(i<t||r<e||Qe(Ci))&&await Vt.executeAsModal((async()=>{const n=t/i*100,s=e/r*100;await _t([{_obj:"transform",freeTransformCenterState:{_enum:"quadCenterState",_value:"QCSAverage"},width:{_unit:"percentUnit",_value:n},height:{_unit:"percentUnit",_value:s},_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Placed layer resized to match document")}))}},gg=async()=>{await Vt.executeAsModal((async()=>{await _t([{_obj:"make",new:{_class:"channel"},at:{_ref:[{_ref:"channel",_enum:"channel",_value:"mask"},{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}]},using:{_ref:[{_ref:"channel",_enum:"channel",_value:"mask"},{_ref:"layer",_name:"TempLayerForMasking"}]},duplicate:!0,_options:{dialogOptions:"dontDisplay"}},{_obj:"select",_target:[{_ref:"layer",_name:"TempLayerForMasking"}],makeVisible:!1,layerID:[158],_options:{dialogOptions:"dontDisplay"}},{_obj:"delete",_target:[{_ref:"layer",_enum:"ordinal",_value:"targetEnum"}],layerID:[158],_options:{dialogOptions:"dontDisplay"}},{_obj:"select",_target:[{_ref:"layer",_name:"render "+hr}],makeVisible:!1,_options:{dialogOptions:"dontDisplay"}}],{}),ne.info(" Temp layer removed and render layer selected")}))};class vg extends $e{constructor(t){super(),we(this,t,_g,mg,be,{})}}function Jr(t){let e;function n(t,e){return t[2]?yg:bg}let i=n(t),r=i(t);return{c(){r.c(),e=bt()},m(t,n){r.m(t,n),R(t,e,n)},p(t,s){i===(i=n(t))&&r?r.p(t,s):(r.d(1),r=i(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&M(e),r.d(t)}}}function bg(t){let e,n;return{c(){e=L("span"),n=K(t[1]),O(e,"class","header_discrip discrip svelte-7o6noh")},m(t,i){R(t,e,i),$(e,n)},p(t,e){2&e&&Z(n,t[1])},d(t){t&&M(e)}}}function yg(t){let e,n,i;return{c(){e=L("a"),n=L("span"),i=K(t[1]),O(n,"class","header_discrip discrip svelte-7o6noh"),te(n,"color",t[3]),O(e,"href",t[2])},m(t,r){R(t,e,r),$(e,n),$(n,i)},p(t,r){2&r&&Z(i,t[1]),8&r&&te(n,"color",t[3]),4&r&&O(e,"href",t[2])},d(t){t&&M(e)}}}function wg(t){let e,n,i,r,s=t[1]&&Jr(t);return{c(){e=L("div"),n=L("span"),i=K(t[0]),r=N(),s&&s.c(),O(n,"class","header_title svelte-7o6noh"),O(e,"class","header svelte-7o6noh")},m(t,o){R(t,e,o),$(e,n),$(n,i),$(e,r),s&&s.m(e,null)},p(t,[n]){1&n&&Z(i,t[0]),t[1]?s?s.p(t,n):(s=Jr(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:le,o:le,d(t){t&&M(e),s&&s.d()}}}function $g(t,e,n){let{title:i="Prompt"}=e,{status:r="Need Help?"}=e,{link:s="https://github.com/NimaNzrii/comfyui-photoshop"}=e,{statusColor:o="#696969"}=e;return t.$$set=t=>{"title"in t&&n(0,i=t.title),"status"in t&&n(1,r=t.status),"link"in t&&n(2,s=t.link),"statusColor"in t&&n(3,o=t.statusColor)},[i,r,s,o]}class zn extends $e{constructor(t){super(),we(this,t,$g,wg,be,{title:0,status:1,link:2,statusColor:3})}}function Cg(t){let e,n,i,r,s;const o=t[11].default,a=jt(o,t,t[10],null),l=a||kg(t);let c=[{id:t[3]},{class:n="blackbg "+t[0]},{style:t[2]},t[8]],u={};for(let t=0;t<c.length;t+=1)u=at(u,c[t]);return{c(){e=L("main"),l&&l.c(),An(e,u),mt(e,"svelte-fap738",!0)},m(n,o){R(n,e,o),l&&l.m(e,null),t[14](e),i=!0,r||(s=[ie(e,"click",t[7]),ie(e,"mouseenter",t[7]),ie(e,"mouseleave",t[7]),ie(e,"mousedown",t[7]),ie(e,"mouseup",t[7]),ie(e,"focus",t[7])],r=!0)},p(t,r){a?a.p&&(!i||1024&r)&&Wt(a,o,t,t[10],i?qt(o,t[10],r,null):Gt(t[10]),null):l&&l.p&&(!i||2&r)&&l.p(t,i?r:-1),An(e,u=qs(c,[(!i||8&r)&&{id:t[3]},(!i||1&r&&n!==(n="blackbg "+t[0]))&&{class:n},(!i||4&r)&&{style:t[2]},256&r&&t[8]])),mt(e,"svelte-fap738",!0)},i(t){i||(T(l,t),i=!0)},o(t){I(l,t),i=!1},d(n){n&&M(e),l&&l.d(n),t[14](null),r=!1,lt(s)}}}function Sg(t){let e,n,i,r,s,o;const a=t[11].default,l=jt(a,t,t[10],null),c=l||Pg(t);let u=[{id:t[3]},{class:i="blackbg "+t[0]},{style:t[2]},t[8]],d={};for(let t=0;t<u.length;t+=1)d=at(d,u[t]);return{c(){e=L("div"),n=L("main"),c&&c.c(),An(n,d),mt(n,"svelte-fap738",!0),O(e,"class","cropper svelte-fap738")},m(i,a){R(i,e,a),$(e,n),c&&c.m(n,null),t[12](n),t[13](e),r=!0,s||(o=[ie(n,"click",t[7]),ie(n,"mouseenter",t[7]),ie(n,"mouseleave",t[7]),ie(n,"mousedown",t[7]),ie(n,"mouseup",t[7]),ie(n,"focus",t[7])],s=!0)},p(t,e){l?l.p&&(!r||1024&e)&&Wt(l,a,t,t[10],r?qt(a,t[10],e,null):Gt(t[10]),null):c&&c.p&&(!r||2&e)&&c.p(t,r?e:-1),An(n,d=qs(u,[(!r||8&e)&&{id:t[3]},(!r||1&e&&i!==(i="blackbg "+t[0]))&&{class:i},(!r||4&e)&&{style:t[2]},256&e&&t[8]])),mt(n,"svelte-fap738",!0)},i(t){r||(T(c,t),r=!0)},o(t){I(c,t),r=!1},d(n){n&&M(e),c&&c.d(n),t[12](null),t[13](null),s=!1,lt(o)}}}function kg(t){let e;return{c(){e=K(t[1])},m(t,n){R(t,e,n)},p(t,n){2&n&&Z(e,t[1])},d(t){t&&M(e)}}}function Pg(t){let e;return{c(){e=K(t[1])},m(t,n){R(t,e,n)},p(t,n){2&n&&Z(e,t[1])},d(t){t&&M(e)}}}function Ag(t){let e,n,i,r;const s=[Sg,Cg],o=[];function a(t,e){return t[4]?0:1}return e=a(t),n=o[e]=s[e](t),{c(){n.c(),i=bt()},m(t,n){o[e].m(t,n),R(t,i,n),r=!0},p(t,[r]){let l=e;e=a(t),e===l?o[e].p(t,r):(At(),I(o[l],1,1,(()=>{o[l]=null})),Ot(),n=o[e],n?n.p(t,r):(n=o[e]=s[e](t),n.c()),T(n,1),n.m(i.parentNode,i))},i(t){r||(T(n),r=!0)},o(t){I(n),r=!1},d(t){t&&M(i),o[e].d(t)}}}function Og(t,e,n){const i=["class","divs","style","id","show","animate"];let r,s=Pn(e,i);Y(t,Ln,(t=>n(15,r=t)));let{$$slots:o={},$$scope:a}=e,{class:l=""}=e,{divs:c="Button"}=e,{style:u=""}=e,{id:d="presetContainer"}=e,{show:p=!0}=e,{animate:h=!1}=e;const f=js();let g,m,v=0,$=0,y=!1,_=!0,w=!1,b=!1,x=p;setTimeout((()=>{if(w)return;const t=document.querySelector("uxp-panel");t&&(w=!0,t.addEventListener("mouseenter",(()=>{_=!0})),t.addEventListener("mouseleave",(()=>{_=!1})),document.addEventListener("mousemove",(e=>{const n=t.getBoundingClientRect();_=e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom}),!0))}),100);document.addEventListener("click",(t=>{const e=t.target;(e.closest("sp-action-button")||e.closest("[data-toggle-prompt]")||e.closest(".prompt-toggle")||e.closest(".toolbar")||e.closest(".action-bar"))&&(b=!0,setTimeout((()=>{b=!1}),500))}),!0),document.addEventListener("keydown",(t=>{"Escape"===t.key&&(b=!0,setTimeout((()=>{b=!1}),500))}),!0);const C=()=>!b&&(!!_||(!!y||!!(()=>{const t=Date.now();return t-v<5e3||t-$<5e3})())),A=()=>{v=Date.now()},T=t=>{"Escape"!==t.key&&($=Date.now())};function k(){const t=g.querySelectorAll("sp-textarea, sp-textfield");if(g&&m&&h){const e=x&&!p;if(x=p,!p&&e&&C())return void setTimeout((()=>{p||k()}),1e3);const n=p?"260px":"160px",i=p?"0vh":"-100vh",s=r?0:p?.3:.5,o=p?"1":"0";ot.to([m,g],{width:m?n:void 0,marginTop:g?i:void 0,duration:s,ease:"power1.out",onStart:()=>{p||t.forEach((t=>{t.style.opacity=o}))},onComplete:()=>{t.forEach((t=>{t.style.opacity=o}))}})}}return document.addEventListener("input",A,!0),document.addEventListener("keydown",T,!0),document.addEventListener("keypress",T,!0),document.addEventListener("keyup",T,!0),document.addEventListener("compositionstart",(()=>{y=!0,v=Date.now(),$=Date.now()}),!0),document.addEventListener("compositionupdate",A,!0),document.addEventListener("compositionend",(()=>{setTimeout((()=>{y=!1}),100),v=Date.now(),$=Date.now()}),!0),document.addEventListener("focusin",(t=>{const e=t.target.tagName.toUpperCase();"SP-TEXTFIELD"!==e&&"SP-TEXTAREA"!==e&&"INPUT"!==e&&"TEXTAREA"!==e||(v=Date.now(),$=Date.now())}),!0),ja((()=>{requestAnimationFrame(k)})),t.$$set=t=>{e=at(at({},e),Cs(t)),n(8,s=Pn(e,i)),"class"in t&&n(0,l=t.class),"divs"in t&&n(1,c=t.divs),"style"in t&&n(2,u=t.style),"id"in t&&n(3,d=t.id),"show"in t&&n(9,p=t.show),"animate"in t&&n(4,h=t.animate),"$$scope"in t&&n(10,a=t.$$scope)},[l,c,u,d,h,g,m,function(t){f(t.type,t)},s,p,a,o,function(t){Q[t?"unshift":"push"]((()=>{g=t,n(5,g)}))},function(t){Q[t?"unshift":"push"]((()=>{m=t,n(6,m)}))},function(t){Q[t?"unshift":"push"]((()=>{g=t,n(5,g)}))}]}class yn extends $e{constructor(t){super(),we(this,t,Og,Ag,be,{class:0,divs:1,style:2,id:3,show:9,animate:4})}}function Tg(t){let e,n,i;const r=t[16].default,s=jt(r,t,t[15],null);return{c(){e=L("sp-checkbox"),s&&s.c(),oe(e,"id",t[2]),oe(e,"class",n=Et(t[3])+" svelte-pw2s4r"),oe(e,"style",t[4]),oe(e,"checked",t[0]),oe(e,"disabled",t[6]),oe(e,"size",t[7])},m(n,r){R(n,e,r),s&&s.m(e,null),t[23](e),i=!0},p(t,o){s&&s.p&&(!i||32768&o)&&Wt(s,r,t,t[15],i?qt(r,t[15],o,null):Gt(t[15]),null),(!i||4&o)&&oe(e,"id",t[2]),(!i||8&o&&n!==(n=Et(t[3])+" svelte-pw2s4r"))&&oe(e,"class",n),(!i||16&o)&&oe(e,"style",t[4]),(!i||1&o)&&oe(e,"checked",t[0]),(!i||64&o)&&oe(e,"disabled",t[6]),(!i||128&o)&&oe(e,"size",t[7])},i(t){i||(T(s,t),i=!0)},o(t){I(s,t),i=!1},d(n){n&&M(e),s&&s.d(n),t[23](null)}}}function Lg(t){let e,n,i,r,s,o;const a=t[16].default,l=jt(a,t,t[15],null);return{c(){e=L("div"),n=L("div"),i=L("sp-textfield"),l&&l.c(),oe(i,"id",t[2]),oe(i,"class",r=Et(t[3])+" svelte-pw2s4r"),oe(i,"style",t[4]),oe(i,"placeholder",t[5]),te(n,"transform","translate(-50%, -50%)"),te(n,"top","15%"),te(n,"left","50%"),O(n,"class","crop svelte-pw2s4r"),O(e,"style",t[4]),O(e,"class",s="bg "+t[7]+" filedbg svelte-pw2s4r")},m(r,s){R(r,e,s),$(e,n),$(n,i),l&&l.m(i,null),t[21](i),t[22](e),o=!0},p(t,n){l&&l.p&&(!o||32768&n)&&Wt(l,a,t,t[15],o?qt(a,t[15],n,null):Gt(t[15]),null),(!o||4&n)&&oe(i,"id",t[2]),(!o||8&n&&r!==(r=Et(t[3])+" svelte-pw2s4r"))&&oe(i,"class",r),(!o||16&n)&&oe(i,"style",t[4]),(!o||32&n)&&oe(i,"placeholder",t[5]),(!o||16&n)&&O(e,"style",t[4]),(!o||128&n&&s!==(s="bg "+t[7]+" filedbg svelte-pw2s4r"))&&O(e,"class",s)},i(t){o||(T(l,t),o=!0)},o(t){I(l,t),o=!1},d(n){n&&M(e),l&&l.d(n),t[21](null),t[22](null)}}}function Ig(t){let e,n,i,r,s,o,a,l,c,u,d,p;const h=t[16].default,f=jt(h,t,t[15],null);return{c(){e=L("div"),n=L("div"),i=L("sp-textarea"),f&&f.c(),s=N(),o=L("div"),oe(i,"id",t[2]),oe(i,"class",r=Et(t[3])+" svelte-pw2s4r"),oe(i,"placeholder",t[5]),O(n,"class","crop svelte-pw2s4r"),O(o,"class",a=Et(t[11])+" svelte-pw2s4r"),O(e,"class",l="bg "+(t[10]?"resizing":"")+" "+(t[12]?"hovering":"")+" svelte-pw2s4r"),O(e,"style",c="height: 68px;min-height: 50px;"+t[4])},m(r,a){R(r,e,a),$(e,n),$(n,i),f&&f.m(i,null),t[17](i),$(e,s),$(e,o),t[20](e),u=!0,d||(p=[ie(o,"mousedown",t[13]),ie(o,"mouseover",t[18]),ie(o,"mouseout",t[19])],d=!0)},p(t,n){f&&f.p&&(!u||32768&n)&&Wt(f,h,t,t[15],u?qt(h,t[15],n,null):Gt(t[15]),null),(!u||4&n)&&oe(i,"id",t[2]),(!u||8&n&&r!==(r=Et(t[3])+" svelte-pw2s4r"))&&oe(i,"class",r),(!u||32&n)&&oe(i,"placeholder",t[5]),(!u||2048&n&&a!==(a=Et(t[11])+" svelte-pw2s4r"))&&O(o,"class",a),(!u||5120&n&&l!==(l="bg "+(t[10]?"resizing":"")+" "+(t[12]?"hovering":"")+" svelte-pw2s4r"))&&O(e,"class",l),(!u||16&n&&c!==(c="height: 68px;min-height: 50px;"+t[4]))&&O(e,"style",c)},i(t){u||(T(f,t),u=!0)},o(t){I(f,t),u=!1},d(n){n&&M(e),f&&f.d(n),t[17](null),t[20](null),d=!1,lt(p)}}}function Eg(t){let e,n,i,r;const s=[Ig,Lg,Tg],o=[];function a(t,e){return"textarea"===t[1]?0:"textfield"===t[1]?1:"checkbox"===t[1]?2:-1}return~(e=a(t))&&(n=o[e]=s[e](t)),{c(){n&&n.c(),i=bt()},m(t,n){~e&&o[e].m(t,n),R(t,i,n),r=!0},p(t,[r]){let l=e;e=a(t),e===l?~e&&o[e].p(t,r):(n&&(At(),I(o[l],1,1,(()=>{o[l]=null})),Ot()),~e?(n=o[e],n?n.p(t,r):(n=o[e]=s[e](t),n.c()),T(n,1),n.m(i.parentNode,i)):n=null)},i(t){r||(T(n),r=!0)},o(t){I(n),r=!1},d(t){t&&M(i),~e&&o[e].d(t)}}}const pi=50;function Dg(t,e,n){let{$$slots:i={},$$scope:r}=e,{type:s}=e,{value:o=""}=e,{id:a=""}=e,{class:l=""}=e,{style:c=""}=e,{placeholder:u=""}=e,{disabled:d=!1}=e,{size:p="m"}=e,{numeric:h=!1}=e;const f=js();let g,m,v,$,y=!1,_="handler",w=!1;yt((()=>{"textarea"===s||"textfield"===s?(n(8,g.value=o,g),g.addEventListener("input",(()=>{let t=g.value;h&&(t=t.replace(/[^0-9+-]/g,""),n(8,g.value=t,g)),n(0,o=t),f("input",{value:o})}))):"checkbox"===s&&(n(8,g.checked=o,g),g.addEventListener("change",(()=>{n(0,o=g.checked),f("change",{value:o})})))})),document.addEventListener("mousemove",(function(t){if(y){const e=v+(t.clientY-$);e>50?(n(9,m.style.height=e-6+"px",m),n(8,g.style.height=`${e}px`,g)):(n(9,m.style.height="50px",m),n(8,g.style.height="50px",g))}})),document.addEventListener("mouseup",(function(){n(10,y=!1),n(11,_="handler")}));return t.$$set=t=>{"type"in t&&n(1,s=t.type),"value"in t&&n(0,o=t.value),"id"in t&&n(2,a=t.id),"class"in t&&n(3,l=t.class),"style"in t&&n(4,c=t.style),"placeholder"in t&&n(5,u=t.placeholder),"disabled"in t&&n(6,d=t.disabled),"size"in t&&n(7,p=t.size),"numeric"in t&&n(14,h=t.numeric),"$$scope"in t&&n(15,r=t.$$scope)},[o,s,a,l,c,u,d,p,g,m,y,_,w,function(t){n(10,y=!0),v=m.clientHeight,$=t.clientY,n(11,_="handler resizing")},h,r,i,function(t){Q[t?"unshift":"push"]((()=>{g=t,n(8,g)}))},()=>n(12,w=!0),()=>n(12,w=!1),function(t){Q[t?"unshift":"push"]((()=>{m=t,n(9,m)}))},function(t){Q[t?"unshift":"push"]((()=>{g=t,n(8,g)}))},function(t){Q[t?"unshift":"push"]((()=>{m=t,n(9,m)}))},function(t){Q[t?"unshift":"push"]((()=>{g=t,n(8,g)}))}]}class Oe extends $e{constructor(t){super(),we(this,t,Dg,Eg,be,{type:1,value:0,id:2,class:3,style:4,placeholder:5,disabled:6,size:7,numeric:14})}}const Mg='<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_2886_525)">\n<path d="M7.9345 10.6899C8.92099 10.6899 9.90705 10.6883 10.8935 10.6912C12.5226 10.6962 13.7755 11.386 14.6422 12.75C15.7581 14.5062 16.8694 16.2658 17.9682 18.0328C18.4578 18.8204 19.1452 19.2089 20.0748 19.1861C20.3022 19.1807 20.5297 19.1852 20.7785 19.1852C20.7785 18.9883 20.7785 18.8025 20.7785 18.6163C20.7785 18.2901 20.7818 17.9639 20.7772 17.6376C20.7739 17.3978 20.8706 17.2154 21.0864 17.1123C21.3042 17.008 21.5099 17.0595 21.6917 17.2096C22.2614 17.6796 22.8306 18.15 23.3999 18.6205C23.8665 19.0061 24.334 19.3905 24.799 19.7779C25.0482 19.9852 25.1266 20.2113 25.0168 20.4453C24.9741 20.5367 24.902 20.6236 24.8233 20.6892C23.7815 21.5557 22.7364 22.4176 21.6921 23.2812C21.509 23.4325 21.305 23.4828 21.0872 23.3793C20.8715 23.2767 20.7751 23.0946 20.7768 22.8548C20.7806 22.347 20.7781 21.8387 20.7781 21.3072C20.6327 21.3072 20.4957 21.3051 20.3588 21.3072C19.8121 21.3164 19.2684 21.3072 18.7364 21.1564C17.636 20.8438 16.8007 20.193 16.1979 19.233C15.0799 17.4519 13.9556 15.6744 12.8359 13.8945C12.5326 13.4124 12.1297 13.0542 11.5675 12.9087C11.3493 12.8522 11.1185 12.819 10.8931 12.8169C9.90705 12.8073 8.92057 12.8131 7.93408 12.8131V10.6895L7.9345 10.6899Z" fill="#7D7D7D"/>\n<path d="M7.93457 19.1854C8.92022 19.1854 9.90586 19.1892 10.8919 19.1854C11.731 19.1821 12.3798 18.8313 12.8255 18.1207C13.0572 17.7517 13.2905 17.3835 13.5313 17.002C13.5783 17.0726 13.616 17.1262 13.6512 17.1819C14.0106 17.7529 14.3712 18.3231 14.7256 18.8974C14.7558 18.9465 14.7704 19.0383 14.7445 19.0828C14.0847 20.2181 13.1238 20.9562 11.8206 21.2263C11.5877 21.2746 11.3468 21.3024 11.1089 21.3045C10.0508 21.3132 8.99268 21.309 7.93457 21.3099V19.1863V19.1854Z" fill="#7D7D7D"/>\n<path d="M20.7788 10.6917C20.7788 10.1469 20.7738 9.62282 20.7805 9.09835C20.7855 8.71103 21.1676 8.46043 21.519 8.61046C21.599 8.64454 21.6723 8.70064 21.7402 8.75674C22.7556 9.59414 23.7705 10.4324 24.7838 11.2718C25.1583 11.5819 25.16 11.9202 24.7889 12.2277C23.7756 13.0676 22.761 13.9058 21.7452 14.7432C21.6732 14.8026 21.594 14.8604 21.5085 14.8965C21.1571 15.0441 20.7839 14.7889 20.7797 14.3962C20.7742 13.8771 20.7784 13.3576 20.7784 12.839C19.6457 12.7534 18.7112 12.7808 17.9987 13.9241C17.7796 14.2757 17.5567 14.6256 17.3255 14.9917C17.2949 14.9531 17.2706 14.9273 17.2522 14.8978C16.8744 14.2985 16.4957 13.6997 16.1237 13.0971C16.094 13.0493 16.0848 12.957 16.1116 12.9113C16.7676 11.7884 17.7122 11.0333 19.0095 10.7873C19.4908 10.6958 19.9947 10.7191 20.4881 10.6921C20.5765 10.6871 20.6653 10.6913 20.7784 10.6913L20.7788 10.6917Z" fill="#7D7D7D"/>\n</g>\n<defs>\n<clipPath id="clip0_2886_525">\n<rect width="17.1313" height="14.8687" fill="white" transform="translate(7.93457 8.56641)"/>\n</clipPath>\n</defs>\n</svg>\n';function Qr(t){let e,n,i;function r(e){t[9](e)}let s={type:"textfield",placeholder:t[2].t("negativePrompt"),id:"nPrompt",style:"width: 100%;"};return void 0!==t[4]&&(s.value=t[4]),e=new Oe({props:s}),Q.push((()=>_e(e,"value",r))),{c(){V(e.$$.fragment)},m(t,n){F(e,t,n),i=!0},p(t,i){const r={};4&i&&(r.placeholder=t[2].t("negativePrompt")),!n&&16&i&&(n=!0,r.value=t[4],me((()=>n=!1))),e.$set(r)},i(t){i||(T(e.$$.fragment,t),i=!0)},o(t){I(e.$$.fragment,t),i=!1},d(t){B(e,t)}}}function Rg(t){let e,n;return e=new Fe({props:{data:Mg,size:"24"}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function xg(t){let e,n=t[2].t("randomize")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){4&i&&n!==(n=t[2].t("randomize")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Ng(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v;e=new zn({props:{title:t[2].t("prompt")}});let y=t[3]&&Qr(t);function _(e){t[10](e)}let w={type:"textarea",id:"pPrompt",style:"width: 100%; border-bottom-left-radius: 10px !important;"};function b(e){t[11](e)}void 0!==t[5]&&(w.value=t[5]),s=new Oe({props:w}),Q.push((()=>_e(s,"value",_)));let x={style:"margin-right:4px; width: 60px; background-color: "+(t[6]?"#3d3d3e":"initial")+";",toggle:!0,class:"icon",$$slots:{default:[Rg]},$$scope:{ctx:t}};function C(e){t[13](e)}void 0!==t[6]&&(x.value=t[6]),u=new Le({props:x}),Q.push((()=>_e(u,"value",b))),u.$on("mouseenter",t[12]),h=new Le({props:{style:"margin-right:4px",$$slots:{default:[xg]},$$scope:{ctx:t}}}),h.$on("click",(function(){tt(t[0].randomize)&&t[0].randomize.apply(this,arguments)}));let A={style:"width:160px",type:"textfield",numeric:!0,id:"seedInput_prompt"};return void 0!==t[7]&&(A.value=t[7]),g=new Oe({props:A}),Q.push((()=>_e(g,"value",C))),{c(){V(e.$$.fragment),n=N(),i=L("div"),y&&y.c(),r=N(),V(s.$$.fragment),a=N(),l=L("div"),c=L("div"),V(u.$$.fragment),p=N(),V(h.$$.fragment),f=N(),V(g.$$.fragment),O(i,"id","promptsection"),O(i,"class","column-item"),te(c,"width","100%"),O(c,"class","row-item")},m(t,o){F(e,t,o),R(t,n,o),R(t,i,o),y&&y.m(i,null),$(i,r),F(s,i,null),R(t,a,o),R(t,l,o),$(l,c),F(u,c,null),$(c,p),F(h,c,null),$(c,f),F(g,c,null),v=!0},p(n,a){t=n;const l={};4&a&&(l.title=t[2].t("prompt")),e.$set(l),t[3]?y?(y.p(t,a),8&a&&T(y,1)):(y=Qr(t),y.c(),T(y,1),y.m(i,r)):y&&(At(),I(y,1,1,(()=>{y=null})),Ot());const c={};!o&&32&a&&(o=!0,c.value=t[5],me((()=>o=!1))),s.$set(c);const p={};64&a&&(p.style="margin-right:4px; width: 60px; background-color: "+(t[6]?"#3d3d3e":"initial")+";"),16384&a&&(p.$$scope={dirty:a,ctx:t}),!d&&64&a&&(d=!0,p.value=t[6],me((()=>d=!1))),u.$set(p);const f={};16388&a&&(f.$$scope={dirty:a,ctx:t}),h.$set(f);const v={};!m&&128&a&&(m=!0,v.value=t[7],me((()=>m=!1))),g.$set(v)},i(t){v||(T(e.$$.fragment,t),T(y),T(s.$$.fragment,t),T(u.$$.fragment,t),T(h.$$.fragment,t),T(g.$$.fragment,t),v=!0)},o(t){I(e.$$.fragment,t),I(y),I(s.$$.fragment,t),I(u.$$.fragment,t),I(h.$$.fragment,t),I(g.$$.fragment,t),v=!1},d(t){t&&(M(n),M(i),M(a),M(l)),B(e,t),y&&y.d(),B(s),B(u),B(h),B(g)}}}function zg(t){let e,n,i,r;return e=new cn({props:{}}),t[8](e),i=new yn({props:{animate:!0,show:t[1],$$slots:{default:[Ng]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment),n=N(),V(i.$$.fragment)},m(t,s){F(e,t,s),R(t,n,s),F(i,t,s),r=!0},p(t,[n]){e.$set({});const r={};2&n&&(r.show=t[1]),16637&n&&(r.$$scope={dirty:n,ctx:t}),i.$set(r)},i(t){r||(T(e.$$.fragment,t),T(i.$$.fragment,t),r=!0)},o(t){I(e.$$.fragment,t),I(i.$$.fragment,t),r=!1},d(r){r&&M(n),t[8](null),B(e,r),B(i,r)}}}function Fg(t,e,n){let i,r,s,o,a,l,c,u;Y(t,Jn,(t=>n(1,i=t))),Y(t,un,(t=>n(2,r=t))),Y(t,$i,(t=>n(3,s=t))),Y(t,Tn,(t=>n(4,o=t))),Y(t,On,(t=>n(5,a=t))),Y(t,Pi,(t=>n(6,l=t))),Y(t,Dt,(t=>n(7,c=t))),yt((()=>{var t;null==(t=document.querySelector("uxp-panel"))||t.addEventListener("mouseleave",(()=>{Jn.set(!1)}))}));return[u,i,r,s,o,a,l,c,function(t){Q[t?"unshift":"push"]((()=>{u=t,n(0,u)}))},function(t){o=t,Tn.set(o)},function(t){a=t,On.set(a)},function(t){l=t,Pi.set(l)},t=>St(t,r.t("autoRandomizeHint")),function(t){c=t,Dt.set(c)}]}class Bg extends $e{constructor(t){super(),we(this,t,Fg,zg,be,{})}}const Vg='<svg width="33" height="34" viewBox="0 0 33 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15.143 22.5218C15.0734 22.454 14.7758 22.1979 14.531 21.9594C12.9914 20.5613 10.4714 16.9139 9.70219 15.005C9.57859 14.7151 9.31699 13.982 9.30019 13.5904C9.30019 13.2152 9.38659 12.8575 9.56179 12.5161C9.80659 12.0906 10.1918 11.7492 10.6466 11.5622C10.9622 11.4418 11.9066 11.2547 11.9234 11.2547C12.9566 11.0677 14.6354 10.9649 16.4906 10.9649C18.2582 10.9649 19.8686 11.0677 20.9174 11.2208C20.9342 11.2384 22.1078 11.4254 22.5098 11.63C23.2442 12.0053 23.7002 12.7382 23.7002 13.5227L23.7002 13.5904C23.6822 14.1013 23.2262 15.1756 23.2094 15.1756C22.439 16.9818 20.0426 20.5449 18.4502 21.977C18.4502 21.977 18.041 22.3803 17.7854 22.5557C17.4182 22.8292 16.9634 22.9648 16.5086 22.9648C16.001 22.9648 15.5282 22.8116 15.143 22.5218Z" fill="#7D7D7D"/>\n</svg>\n',Hg='<svg width="32" height="35" viewBox="0 0 32 35" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25.8593 12.7374L13.6157 24.981C12.8644 25.7322 11.6463 25.7322 10.8949 24.981L6.14113 20.605C5.38981 19.8537 5.38981 18.6356 6.14113 17.8843C6.89245 17.133 8.11059 17.133 8.86191 17.8843L11.9606 20.605H12.55L23.1385 10.0166C23.8899 9.2653 25.1079 9.2653 25.8593 10.0166C26.6105 10.7679 26.6105 11.9861 25.8593 12.7374Z" fill="#7D7D7D"/>\n</svg>\n';function Zr(t,e,n){const i=t.slice();return i[18]=e[n].id,i[19]=e[n].label,i}function Xr(t){let e,n,i,r,s,o,a=Bt(t[3]),l=[];for(let e=0;e<a.length;e+=1)l[e]=to(Zr(t,a,e));const c=t=>I(l[t],1,1,(()=>{l[t]=null}));return{c(){e=L("div"),n=N(),i=L("div");for(let t=0;t<l.length;t+=1)l[t].c();O(e,"class","overlay svelte-r4mg2"),O(i,"class","dropdown-menu svelte-r4mg2")},m(a,c){R(a,e,c),R(a,n,c),R(a,i,c);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(i,null);r=!0,s||(o=ie(e,"click",t[5]),s=!0)},p(t,e){if(76&e){let n;for(a=Bt(t[3]),n=0;n<a.length;n+=1){const r=Zr(t,a,n);l[n]?(l[n].p(r,e),T(l[n],1)):(l[n]=to(r),l[n].c(),T(l[n],1),l[n].m(i,null))}for(At(),n=a.length;n<l.length;n+=1)c(n);Ot()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)T(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)I(l[t]);r=!1},d(t){t&&(M(e),M(n),M(i)),Hs(l,t),s=!1,o()}}}function eo(t){let e,n;return e=new Fe({props:{data:Hg,size:"16"}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function to(t){let e,n,i,r,s,o,a,l,c,u=t[19]+"",d=t[2]===t[18]&&eo();function p(){return t[10](t[19],t[18])}return{c(){e=L("div"),n=L("span"),i=K(u),r=N(),d&&d.c(),s=N(),O(e,"id",o=t[18]),O(e,"class","svelte-r4mg2"),mt(e,"selected",t[2]===t[18])},m(t,o){R(t,e,o),$(e,n),$(n,i),$(e,r),d&&d.m(e,null),$(e,s),a=!0,l||(c=ie(e,"click",p),l=!0)},p(n,r){t=n,(!a||8&r)&&u!==(u=t[19]+"")&&Z(i,u),t[2]===t[18]?d?12&r&&T(d,1):(d=eo(),d.c(),T(d,1),d.m(e,s)):d&&(At(),I(d,1,1,(()=>{d=null})),Ot()),(!a||8&r&&o!==(o=t[18]))&&O(e,"id",o),(!a||12&r)&&mt(e,"selected",t[2]===t[18])},i(t){a||(T(d),a=!0)},o(t){I(d),a=!1},d(t){t&&M(e),d&&d.d(),l=!1,c()}}}function Ug(t){let e,n,i,r,s,o,a,l,c,u,d,p;s=new Fe({props:{data:Vg,size:"16"}});let h=t[1]&&Xr(t);const f=t[9].default,g=jt(f,t,t[8],null);return{c(){e=L("div"),n=L("span"),i=K(t[0]),r=N(),V(s.$$.fragment),o=N(),h&&h.c(),a=N(),l=L("div"),c=L("span"),g&&g.c(),te(n,"width","100%"),O(n,"class","discrip"),O(e,"class","dropdown-header svelte-r4mg2"),te(l,"display","none")},m(f,m){R(f,e,m),$(e,n),$(n,i),$(e,r),F(s,e,null),R(f,o,m),h&&h.m(f,m),R(f,a,m),R(f,l,m),$(l,c),g&&g.m(c,null),t[11](c),u=!0,d||(p=ie(e,"click",t[5]),d=!0)},p(t,[e]){(!u||1&e)&&Z(i,t[0]),t[1]?h?(h.p(t,e),2&e&&T(h,1)):(h=Xr(t),h.c(),T(h,1),h.m(a.parentNode,a)):h&&(At(),I(h,1,1,(()=>{h=null})),Ot()),g&&g.p&&(!u||256&e)&&Wt(g,f,t,t[8],u?qt(f,t[8],e,null):Gt(t[8]),null)},i(t){u||(T(s.$$.fragment,t),T(h),T(g,t),u=!0)},o(t){I(s.$$.fragment,t),I(h),I(g,t),u=!1},d(n){n&&(M(e),M(o),M(a),M(l)),B(s),h&&h.d(n),g&&g.d(n),t[11](null),d=!1,p()}}}function jg(t,e,n){let{$$slots:i={},$$scope:r}=e,{prefix:s=""}=e;const o=js();let a,l=!1,{selectedItem:c="Failed to Get List"}=e,u=null,d=[],p=null;const h=t=>{document.querySelectorAll("#settinpanel sp-textarea, #settinpanel sp-textfield").forEach((e=>{e.style.opacity=t?"0":"1"}))};let f=()=>{var t;n(1,l=!l),o("toggle",{isOpen:l}),h(l),t=l,document.querySelectorAll("#settinpanel").forEach((e=>{e.style.overflowY=t?"none":"auto"}))};const g=t=>{const e=t.target;e&&!e.closest(".dropdown-container")&&!e.closest(".dropdown-header")&&(n(1,l=!1),o("toggle",{isOpen:l}),h(l))},m=(t,e)=>{n(0,c=`${s} ${t}`),n(2,u=e),o("change",{id:e,item:t}),f()},v=()=>{if(p){const t=p.querySelectorAll("option");n(3,d=Array.from(t).map((t=>{var e;return{id:t.id,label:(null==(e=t.textContent)?void 0:e.trim())||"",selected:t.hasAttribute("selected")}})));const e=d.find((t=>t.selected));e&&(n(0,c=`${s} ${e.label}`),n(2,u=e.id))}};yt((()=>(document.addEventListener("click",g),a=new MutationObserver(v),p&&(a.observe(p,{childList:!0,subtree:!0}),v()),()=>{document.removeEventListener("click",g),a.disconnect()})));return t.$$set=t=>{"prefix"in t&&n(7,s=t.prefix),"selectedItem"in t&&n(0,c=t.selectedItem),"$$scope"in t&&n(8,r=t.$$scope)},[c,l,u,d,p,f,m,s,r,i,(t,e)=>m(t,e),function(t){Q[t?"unshift":"push"]((()=>{p=t,n(4,p)}))}]}class qi extends $e{constructor(t){super(),we(this,t,jg,Ug,be,{prefix:7,selectedItem:0})}}function no(t,e,n){const i=t.slice();return i[11]=e[n],i}function so(t,e,n){const i=t.slice();return i[14]=e[n],i}function io(t){let e,n,i,r,s,o=t[14].name+"";return{c(){e=L("option"),n=K(o),O(e,"id",i=t[14].id),e.selected=r=t[14].selected,e.__value=s=t[14].name,es(e,e.__value)},m(t,i){R(t,e,i),$(e,n)},p(t,a){2&a&&o!==(o=t[14].name+"")&&Z(n,o),2&a&&i!==(i=t[14].id)&&O(e,"id",i),2&a&&r!==(r=t[14].selected)&&(e.selected=r),2&a&&s!==(s=t[14].name)&&(e.__value=s,es(e,e.__value))},d(t){t&&M(e)}}}function qg(t){let e,n=Bt(t[1]),i=[];for(let e=0;e<n.length;e+=1)i[e]=io(so(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=bt()},m(t,n){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,n);R(t,e,n)},p(t,r){if(2&r){let s;for(n=Bt(t[1]),s=0;s<n.length;s+=1){const o=so(t,n,s);i[s]?i[s].p(o,r):(i[s]=io(o),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&M(e),Hs(i,t)}}}function ro(t){let e,n,i,r,s,o=t[11].name+"";return{c(){e=L("option"),n=K(o),O(e,"id",i=t[11].id),e.selected=r=t[11].selected,e.__value=s=t[11].name,es(e,e.__value)},m(t,i){R(t,e,i),$(e,n)},p(t,a){4&a&&o!==(o=t[11].name+"")&&Z(n,o),4&a&&i!==(i=t[11].id)&&O(e,"id",i),4&a&&r!==(r=t[11].selected)&&(e.selected=r),4&a&&s!==(s=t[11].name)&&(e.__value=s,es(e,e.__value))},d(t){t&&M(e)}}}function Wg(t){let e,n=Bt(t[2]),i=[];for(let e=0;e<n.length;e+=1)i[e]=ro(no(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=bt()},m(t,n){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,n);R(t,e,n)},p(t,r){if(4&r){let s;for(n=Bt(t[2]),s=0;s<n.length;s+=1){const o=no(t,n,s);i[s]?i[s].p(o,r):(i[s]=ro(o),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&M(e),Hs(i,t)}}}function Gg(t){let e,n,i,r,s,o,a;return e=new zn({props:{title:"Preset"}}),r=new qi({props:{prefix:"",$$slots:{default:[qg]},$$scope:{ctx:t}}}),r.$on("change",t[6]),o=new qi({props:{prefix:"",$$slots:{default:[Wg]},$$scope:{ctx:t}}}),o.$on("change",t[7]),{c(){V(e.$$.fragment),n=N(),i=L("div"),V(r.$$.fragment),s=N(),V(o.$$.fragment)},m(t,l){F(e,t,l),R(t,n,l),R(t,i,l),F(r,i,null),$(i,s),F(o,i,null),a=!0},p(t,e){const n={};131074&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n);const i={};131076&e&&(i.$$scope={dirty:e,ctx:t}),o.$set(i)},i(t){a||(T(e.$$.fragment,t),T(r.$$.fragment,t),T(o.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),I(r.$$.fragment,t),I(o.$$.fragment,t),a=!1},d(t){t&&(M(n),M(i)),B(e,t),B(r),B(o)}}}function Kg(t){let e,n,i,r;return e=new cn({props:{}}),t[5](e),i=new yn({props:{animate:!0,show:t[3],$$slots:{default:[Gg]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment),n=N(),V(i.$$.fragment)},m(t,s){F(e,t,s),R(t,n,s),F(i,t,s),r=!0},p(t,[n]){e.$set({});const r={};8&n&&(r.show=t[3]),131078&n&&(r.$$scope={dirty:n,ctx:t}),i.$set(r)},i(t){r||(T(e.$$.fragment,t),T(i.$$.fragment,t),r=!0)},o(t){I(e.$$.fragment,t),I(i.$$.fragment,t),r=!1},d(r){r&&M(n),t[5](null),B(e,r),B(i,r)}}}function Yg(t,e,n){let i;Y(t,Yn,(t=>n(3,i=t)));let r,s=[],o=[];const a=(t,e)=>{const i=t.map(((t,e)=>({id:e.toString(),name:t.name,selected:t.selected}))),r=i.find((t=>t.selected));r&&r.name,"workflow"===e?n(1,s=i):n(2,o=i)},l=(t,e)=>{const{id:n,item:i}=t.detail;Ip(e,n),r.smtchanged()};return yt((()=>{var t;kn("Send_workflow",(t=>a(t,"workflow"))),kn("Send_rndrMode",(t=>a(t,"rndrMode"))),null==(t=document.querySelector("uxp-panel"))||t.addEventListener("mouseleave",(()=>{Yn.set(!1)}))})),[r,s,o,i,l,function(t){Q[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},t=>l(t,"workflow"),t=>l(t,"rndrMode")]}class Jg extends $e{constructor(t){super(),we(this,t,Yg,Kg,be,{})}}const Qg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAABhCAMAAADodoYeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFmZmZAAAAg1AVCwAAAAJ0Uk5T/wDltzBKAAADe0lEQVR42uzby0KtMAxG4eT9X9qBExVo/lwoqCvDI5sD+WibtmBOPBpGCgAAgAAAAAIAAAgAACAAAIAAAAACAAAIAAAgAACAAAAAAgAACAAAIAAAgHgTgH0GqXwCwL4H6dwKYGdBRrcB2EV0T/W/AeQc2HW0IcX/T72iwwGJUSx7Td8PtGWcAOhJVE7daEeV/k4HMBlgfU/h3WcB9ByaDQnIZ4gPew2AjQBYI/26gH4Gqz9uYTanAawIoObw7Ew1gYSh1R+3sIFr/V7m8kcATMpap5bJtKL/CCAM/bkmuzhTOA5Zvb2HV94FuLx75fmyTKUXD9QJAeFZXyXpKr+F2cbVL6NkWHxRAvL6IUvPmGQA4caWAH7R3tUeTwdwHaAw1zgBCB8VcYgQAbS/La6mBmBhcg75EAB8BMCVQq+UWfUoLUl/F8Bzg1hFYH3M5eA8CGAigCAkZDoJcJJsvcgcAPAbAVwEOHkeNwIcipFMkZ9oJfI2zyCAa/XT0wBezr/SBOSRZH4QVuunk+a/bwz4+ZvcJPftANIvT/vfTWXo139ILpOqfZDcSaXnAaYUO6e97QDAzETs51/ri2w3AshLEUWAC93cUkQfoLhfeB9Afi1o2anbCEBiCacA0Fnm3wHgLQATAby2QtsH6O1zbQDwGoAHAJe8uU2i/hhQ2+ndB+BVgJMyfwrA5wAO5328Csq/gtACcGk1MLFGmS9Dj53lJEB6HhBvWqZJlyVuus35HMDlctCTE7FKoRe1qTaAcsuttaDDdGzfWpCV+yx5eck89z5PsHo5BbBeDn3HamgTwLMF1Qoguuv+crReEW3bD/i7AMJ1NfM/siPWBfDSC20W9dl9gF+yJ/wyAOlFXglAfT+tlf/+WxEDAC4lVp2c3QGw3ldd77vKxWrtvaARAF+t6smlcaJRJwGCvFkn/7U348TTrZZL7wPwodVQEyuU9eqg5wTEd0OnAXzxQmfYNQZ1URtAvNOopqsK+MMAcXE2vSP2G74PGAfwUYDennBhrtvMf/4LmXkAN72cvzhUqa4lgEoN2ct/+huxfQDCBHEewGcGUE9Fc0epDeCjAJ4dw8qf5Q6lXx18bgTw+B2V9aaOsso1D8CX8jPRyhjpfxggNXAT9wAQAABAAAAAAQAABAAAEAAAQAAAAAEAAAQAABAAAEAAAAABwCvjQ4ABANRveG6NVOMcAAAAAElFTkSuQmCC";function oo(t){let e,n,i,r,s,o,a,l,c,u,d,p,h;const f=t[5].default,g=jt(f,t,t[4],null);return{c(){e=L("div"),n=L("div"),i=L("div"),r=L("div"),s=K(t[0]),o=N(),a=L("h2"),l=K(t[1]),c=N(),u=L("p"),d=K(t[2]),p=N(),g&&g.c(),O(r,"class","emoji svelte-1c61mfo"),O(a,"class","svelte-1c61mfo"),O(u,"class","svelte-1c61mfo"),O(i,"class","modal-head svelte-1c61mfo"),O(n,"class","modal-content svelte-1c61mfo"),O(e,"class","modal-overlay svelte-1c61mfo")},m(t,f){R(t,e,f),$(e,n),$(n,i),$(i,r),$(r,s),$(i,o),$(i,a),$(a,l),$(i,c),$(i,u),$(u,d),$(n,p),g&&g.m(n,null),h=!0},p(t,e){(!h||1&e)&&Z(s,t[0]),(!h||2&e)&&Z(l,t[1]),(!h||4&e)&&Z(d,t[2]),g&&g.p&&(!h||16&e)&&Wt(g,f,t,t[4],h?qt(f,t[4],e,null):Gt(t[4]),null)},i(t){h||(T(g,t),h=!0)},o(t){I(g,t),h=!1},d(t){t&&M(e),g&&g.d(t)}}}function Zg(t){let e,n,i=t[3]&&oo(t);return{c(){i&&i.c(),e=bt()},m(t,r){i&&i.m(t,r),R(t,e,r),n=!0},p(t,[n]){t[3]?i?(i.p(t,n),8&n&&T(i,1)):(i=oo(t),i.c(),T(i,1),i.m(e.parentNode,e)):i&&(At(),I(i,1,1,(()=>{i=null})),Ot())},i(t){n||(T(i),n=!0)},o(t){I(i),n=!1},d(t){t&&M(e),i&&i.d(t)}}}function Xg(t,e,n){let{$$slots:i={},$$scope:r}=e,{emoji:s=""}=e,{title:o="Let's Collaborate!"}=e,{description:a="If you'd like to work together, feel free to reach out via email."}=e,l=!0;const c=t=>{t.target.closest(".modal-content")||n(3,l=!1)};return yt((()=>{document.addEventListener("click",c)})),mo((()=>{document.removeEventListener("click",c)})),t.$$set=t=>{"emoji"in t&&n(0,s=t.emoji),"title"in t&&n(1,o=t.title),"description"in t&&n(2,a=t.description),"$$scope"in t&&n(4,r=t.$$scope)},[s,o,a,l,r,i]}class em extends $e{constructor(t){super(),we(this,t,Xg,Zg,be,{emoji:0,title:1,description:2})}}const tm='<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3.00049 16C3.00049 8.8203 8.82079 3 16.0005 3V3C23.1802 3 29.0005 8.8203 29.0005 16V16C29.0005 23.1797 23.1802 29 16.0005 29V29C8.82079 29 3.00049 23.1797 3.00049 16V16Z" fill="#46BE66"/>\n<path d="M15.5604 12.043L13.3623 15.9995H18.6377L16.4395 19.956" stroke="black" stroke-width="1.97826" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n';function ao(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f=t[2].t("newFeatures")+"";return i=new Fe({props:{data:tm,size:"32",style:"margin-right: 6px;"}}),p=new Le({props:{class:"s",style:"width:auto; border-radius: 18px; padding:0 16px",$$slots:{default:[nm]},$$scope:{ctx:t}}}),p.$on("mouseenter",t[4]),p.$on("click",t[3]),{c(){e=L("div"),n=L("div"),V(i.$$.fragment),r=N(),s=L("div"),o=L("div"),a=K(t[0]),l=N(),c=L("div"),u=K(f),d=N(),V(p.$$.fragment),O(o,"class","title svelte-1f7tvhf"),O(c,"class","description svelte-1f7tvhf"),O(s,"class","text-box svelte-1f7tvhf"),O(n,"class","content svelte-1f7tvhf"),O(e,"class","update-notification svelte-1f7tvhf")},m(t,f){R(t,e,f),$(e,n),F(i,n,null),$(n,r),$(n,s),$(s,o),$(o,a),$(s,l),$(s,c),$(c,u),$(e,d),F(p,e,null),h=!0},p(t,e){(!h||1&e)&&Z(a,t[0]),(!h||4&e)&&f!==(f=t[2].t("newFeatures")+"")&&Z(u,f);const n={};36&e&&(n.$$scope={dirty:e,ctx:t}),p.$set(n)},i(t){h||(T(i.$$.fragment,t),T(p.$$.fragment,t),h=!0)},o(t){I(i.$$.fragment,t),I(p.$$.fragment,t),h=!1},d(t){t&&M(e),B(i),B(p)}}}function nm(t){let e,n=t[2].t("install")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){4&i&&n!==(n=t[2].t("install")+"")&&Z(e,n)},d(t){t&&M(e)}}}function sm(t){let e,n,i=t[1]&&ao(t);return{c(){i&&i.c(),e=bt()},m(t,r){i&&i.m(t,r),R(t,e,r),n=!0},p(t,[n]){t[1]?i?(i.p(t,n),2&n&&T(i,1)):(i=ao(t),i.c(),T(i,1),i.m(e.parentNode,e)):i&&(At(),I(i,1,1,(()=>{i=null})),Ot())},i(t){n||(T(i),n=!0)},o(t){I(i),n=!1},d(t){t&&M(e),i&&i.d(t)}}}function im(t,e,n){let i;Y(t,un,(t=>n(2,i=t)));let r="",s=!1;return yt((()=>{(async()=>{try{const t=await fetch("https://raw.githubusercontent.com/NimaNzrii/comfyui-photoshop/main/data/PreviewFiles/version.json");if(!t.ok)throw new Error("Failed to fetch version information");const e=await t.json();n(0,r=e.version);const i=(t,e)=>{const n=t?.split(".").map(Number),i=e?.split(".").map(Number);for(let t=0;t<Math.max(n.length,i.length);t++){const e=n[t]||0,r=i[t]||0;if(e>r)return 1;if(e<r)return-1}return 0},o=ss.toString();i(r,o)>0?n(1,s=!0):n(1,s=!1)}catch(t){}})()})),[r,s,i,async function(){try{require("uxp");const t=await Gi.getPluginFolder();let e=await t.nativePath;e=e.replace(/\\/g,"/"),e=decodeURIComponent(e);let n;n="win32"===require("os").platform()?await t.getEntry("cp/Updater/Updater.bat"):await t.getEntry("cp/Updater/Updater.sh"),n.isFile&&await Qa.openPath(n.nativePath)}catch(t){}},t=>St(t,i.t("installHint"))]}class rm extends $e{constructor(t){super(),we(this,t,im,sm,be,{})}}function lo(t){let e,n;return e=new em({props:{emoji:"",title:t[3].t("modalTitle"),description:t[3].t("modalDescription"),$$slots:{default:[om]},$$scope:{ctx:t}}}),e.$on("clickOutside",t[5]),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p(t,n){const i={};8&n&&(i.title=t[3].t("modalTitle")),8&n&&(i.description=t[3].t("modalDescription")),4104&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function om(t){let e,n,i,r,s=t[3].t("emailMe")+"";return{c(){e=L("p"),n=K(s),i=N(),r=L("strong"),r.textContent="NimaNzriArt@gmail.com",te(e,"color","#777777"),te(e,"margin","6px 0"),te(r,"margin-bottom","px"),te(r,"font-size","12px")},m(t,s){R(t,e,s),$(e,n),R(t,i,s),R(t,r,s)},p(t,e){8&e&&s!==(s=t[3].t("emailMe")+"")&&Z(n,s)},d(t){t&&(M(e),M(i),M(r))}}}function am(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_,w,b,x,C,A,k,S,E,P,D,z,U,H,j,Q,Y,q,G,W,J,X,tt,et,nt,it=t[3].t("sponsoredBy")+"",rt=t[3].t("title")+"",st=t[3].t("version",{version:ss})+"",ot=t[3].t("haveAnIdea")+"",at=t[3].t("report")+"",ct=t[3].t("collab")+"";e=new cn({props:{}}),t[6](e),r=new rm({}),P=new Le({props:{text:t[3].t("getStarted"),style:"height:52px"}}),P.$on("click",t[4]);let ut=t[2]&&lo(t);return{c(){V(e.$$.fragment),n=N(),i=L("main"),V(r.$$.fragment),s=N(),o=L("div"),a=L("a"),l=L("div"),c=L("span"),u=K(it),d=N(),p=L("img"),f=N(),g=L("div"),m=L("hr"),v=N(),y=L("hr"),_=N(),w=L("span"),b=N(),x=L("a"),C=K(st),A=N(),k=L("hr"),S=N(),E=L("div"),V(P.$$.fragment),D=N(),z=L("span"),U=L("a"),H=K(ot),j=K("\r\n    -\r\n    "),Q=L("a"),Y=K(at),q=K("\r\n    -\r\n    "),G=L("a"),W=K(ct),J=N(),ut&&ut.c(),X=bt(),O(c,"class","discrip svelte-1579btp"),O(p,"class","logo svelte-1579btp"),ho(p.src,h=Qg)||O(p,"src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAABhCAMAAADodoYeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFmZmZAAAAg1AVCwAAAAJ0Uk5T/wDltzBKAAADe0lEQVR42uzby0KtMAxG4eT9X9qBExVo/lwoqCvDI5sD+WibtmBOPBpGCgAAgAAAAAIAAAgAACAAAIAAAAACAAAIAAAgAACAAAAAAgAACAAAIAAAgHgTgH0GqXwCwL4H6dwKYGdBRrcB2EV0T/W/AeQc2HW0IcX/T72iwwGJUSx7Td8PtGWcAOhJVE7daEeV/k4HMBlgfU/h3WcB9ByaDQnIZ4gPew2AjQBYI/26gH4Gqz9uYTanAawIoObw7Ew1gYSh1R+3sIFr/V7m8kcATMpap5bJtKL/CCAM/bkmuzhTOA5Zvb2HV94FuLx75fmyTKUXD9QJAeFZXyXpKr+F2cbVL6NkWHxRAvL6IUvPmGQA4caWAH7R3tUeTwdwHaAw1zgBCB8VcYgQAbS/La6mBmBhcg75EAB8BMCVQq+UWfUoLUl/F8Bzg1hFYH3M5eA8CGAigCAkZDoJcJJsvcgcAPAbAVwEOHkeNwIcipFMkZ9oJfI2zyCAa/XT0wBezr/SBOSRZH4QVuunk+a/bwz4+ZvcJPftANIvT/vfTWXo139ILpOqfZDcSaXnAaYUO6e97QDAzETs51/ri2w3AshLEUWAC93cUkQfoLhfeB9Afi1o2anbCEBiCacA0Fnm3wHgLQATAby2QtsH6O1zbQDwGoAHAJe8uU2i/hhQ2+ndB+BVgJMyfwrA5wAO5328Csq/gtACcGk1MLFGmS9Dj53lJEB6HhBvWqZJlyVuus35HMDlctCTE7FKoRe1qTaAcsuttaDDdGzfWpCV+yx5eck89z5PsHo5BbBeDn3HamgTwLMF1Qoguuv+crReEW3bD/i7AMJ1NfM/siPWBfDSC20W9dl9gF+yJ/wyAOlFXglAfT+tlf/+WxEDAC4lVp2c3QGw3ldd77vKxWrtvaARAF+t6smlcaJRJwGCvFkn/7U348TTrZZL7wPwodVQEyuU9eqg5wTEd0OnAXzxQmfYNQZ1URtAvNOopqsK+MMAcXE2vSP2G74PGAfwUYDennBhrtvMf/4LmXkAN72cvzhUqa4lgEoN2ct/+huxfQDCBHEewGcGUE9Fc0epDeCjAJ4dw8qf5Q6lXx18bgTw+B2V9aaOsso1D8CX8jPRyhjpfxggNXAT9wAQAABAAAAAAQAABAAAEAAAQAAAAAEAAAQAABAAAEAAAAABwCvjQ4ABANRveG6NVOMcAAAAAElFTkSuQmCC"),O(p,"alt","openart"),O(l,"class","header svelte-1579btp"),O(a,"href","https://openart.ai"),O(a,"class","svelte-1579btp"),O(m,"class","svelte-1579btp"),O(y,"class","svelte-1579btp"),O(w,"class","h1 svelte-1579btp"),te(x,"text-align","center"),O(x,"class","discrip svelte-1579btp"),O(x,"href","https://buymeacoffee.com/nimanzri"),O(g,"class","contents svelte-1579btp"),O(k,"class","svelte-1579btp"),O(E,"class","svelte-1579btp"),O(o,"class","blackbg settinglist svelte-1579btp"),O(U,"class","discrip svelte-1579btp"),O(U,"href","https://discord.gg/mh5P4hY7"),O(Q,"class","discrip svelte-1579btp"),O(Q,"href","https://github.com/NimaNzrii/comfyui-photoshop/issues/new"),O(G,"class","discrip svelte-1579btp"),O(z,"class","svelte-1579btp"),O(i,"class","svelte-1579btp")},m(h,T){F(e,h,T),R(h,n,T),R(h,i,T),F(r,i,null),$(i,s),$(i,o),$(o,a),$(a,l),$(l,c),$(c,u),$(l,d),$(l,p),$(o,f),$(o,g),$(g,m),$(g,v),$(g,y),$(g,_),$(g,w),w.innerHTML=rt,$(g,b),$(g,x),$(x,C),$(o,A),$(o,k),$(o,S),$(o,E),F(P,E,null),$(i,D),$(i,z),$(z,U),$(U,H),$(z,j),$(z,Q),$(Q,Y),$(z,q),$(z,G),$(G,W),t[11](i),R(h,J,T),ut&&ut.m(h,T),R(h,X,T),tt=!0,et||(nt=[ie(x,"mouseenter",t[7]),ie(U,"mouseenter",t[8]),ie(Q,"mouseenter",t[9]),ie(G,"mouseenter",t[10]),ie(G,"click",t[5])],et=!0)},p(t,[n]){e.$set({}),(!tt||8&n)&&it!==(it=t[3].t("sponsoredBy")+"")&&Z(u,it),(!tt||8&n)&&rt!==(rt=t[3].t("title")+"")&&(w.innerHTML=rt),(!tt||8&n)&&st!==(st=t[3].t("version",{version:ss})+"")&&Z(C,st);const i={};8&n&&(i.text=t[3].t("getStarted")),P.$set(i),(!tt||8&n)&&ot!==(ot=t[3].t("haveAnIdea")+"")&&Z(H,ot),(!tt||8&n)&&at!==(at=t[3].t("report")+"")&&Z(Y,at),(!tt||8&n)&&ct!==(ct=t[3].t("collab")+"")&&Z(W,ct),t[2]?ut?(ut.p(t,n),4&n&&T(ut,1)):(ut=lo(t),ut.c(),T(ut,1),ut.m(X.parentNode,X)):ut&&(At(),I(ut,1,1,(()=>{ut=null})),Ot())},i(t){tt||(T(e.$$.fragment,t),T(r.$$.fragment,t),T(P.$$.fragment,t),T(ut),tt=!0)},o(t){I(e.$$.fragment,t),I(r.$$.fragment,t),I(P.$$.fragment,t),I(ut),tt=!1},d(s){s&&(M(n),M(i),M(J),M(X)),t[6](null),B(e,s),B(r),B(P),t[11](null),ut&&ut.d(s),et=!1,lt(nt)}}}function lm(t,e,n){let i;Y(t,un,(t=>n(3,i=t)));let r,s,o=!1;return[r,s,o,i,()=>{null==s||s.classList.add("hidden"),r.startCommand()},()=>{n(2,o=!o)},function(t){Q[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},t=>St(t,i.t("buyACoffee")),t=>St(t,i.t("requestFeatures")),t=>St(t,i.t("reportBugs")),t=>St(t,i.t("collaborate")),function(t){Q[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class um extends $e{constructor(t){super(),we(this,t,lm,am,be,{})}}function fm(t){let e,n;return{c(){e=L("main"),n=L("div"),O(n,"class","svelte-upyhcb"),te(e,"display",0===t[0]||100===t[0]?"none":"block"),O(e,"class","svelte-upyhcb")},m(i,r){R(i,e,r),$(e,n),t[2](n)},p(t,[n]){1&n&&te(e,"display",0===t[0]||100===t[0]?"none":"block")},i:le,o:le,d(n){n&&M(e),t[2](null)}}}function cm(t,e,n){let i,{width:r=0}=e,s=!1;return kn("progress",(t=>{const e=parseFloat(t);isNaN(e)||e<5&&s||(n(0,r=e),i&&ot.to(i,{duration:.05,width:`${r}%`}))})),kn("generating",(t=>{s=!0,n(0,r=5),i&&ot.to(i,{duration:.2,width:"5%"})})),kn("render_status",(t=>{"genrating"===t?s||(s=!0,n(0,r=5),i&&ot.to(i,{duration:.2,width:"5%"})):"genrated"===t&&(n(0,r=100),i&&ot.to(i,{duration:.3,width:"100%",onComplete:()=>{setTimeout((()=>{s=!1}),300)}}))})),kn("render",(t=>{s=!1,n(0,r=0)})),t.$$set=t=>{"width"in t&&n(0,r=t.width)},[r,i,function(t){Q[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class dm extends $e{constructor(t){super(),we(this,t,cm,fm,be,{width:0})}}function hm(t){let e,n;return{c(){e=L("div"),n=K(t[2]),te(e,"display",t[1]?"block":"none"),te(e,"will-change","transform"),O(e,"class","movable-text svelte-909rht")},m(i,r){R(i,e,r),$(e,n),t[7](e)},p(t,[i]){4&i&&Z(n,t[2]),2&i&&te(e,"display",t[1]?"block":"none")},i:le,o:le,d(n){n&&M(e),t[7](null)}}}function pm(t,e){let n=!1;return function(...i){n||(t.apply(this,i),n=!0,setTimeout((()=>n=!1),e))}}function gm(t,e,n){let i,r;Y(t,Ds,(t=>n(6,i=t))),Y(t,So,(t=>n(2,r=t)));let s,o,a=null,l=null,c=!1;const u=()=>{Ds.set(null),n(1,c=!1)};return mo((()=>{a&&(a.removeEventListener("mousemove",o),a.removeEventListener("mouseleave",u)),l&&clearTimeout(l)})),t.$$.update=()=>{121&t.$$.dirty&&a!==i&&(o&&a&&(a.removeEventListener("mousemove",o),a.removeEventListener("mouseleave",u)),n(4,a=i),l&&clearTimeout(l),n(1,c=!1),a&&(n(5,l=setTimeout((()=>{n(1,c=!0)}),500)),n(3,o=pm((t=>{const e=document.querySelector("uxp-panel");if(e&&a){let n=t.clientX,i=t.clientY;const{width:r,height:o}=e.getBoundingClientRect(),a=s.getBoundingClientRect();n+a.width>r&&(n=r-a.width-10),i+a.height>o&&(i=o-a.height-10),ot.to(s,{x:n,y:i,duration:.5,ease:"power2.out"})}}),50)),a.addEventListener("mousemove",o),a.addEventListener("mouseleave",u)))},[s,c,r,o,a,l,i,function(t){Q[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class mm extends $e{constructor(t){super(),we(this,t,gm,hm,be,{})}}function _m(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_,w;return n=new um({}),s=new dm({}),a=new Jg({}),c=new Bg({}),d=new vg({}),h=new Qp({}),g=new tg({}),v=new lg({}),_=new mm({}),{c(){e=L("uxp-panel"),V(n.$$.fragment),i=N(),r=L("main"),V(s.$$.fragment),o=N(),V(a.$$.fragment),l=N(),V(c.$$.fragment),u=N(),V(d.$$.fragment),p=N(),V(h.$$.fragment),f=N(),V(g.$$.fragment),m=N(),V(v.$$.fragment),y=N(),V(_.$$.fragment),te(r,"background-size",t[0]),te(r,"background-image","url("+t[1]+")"),O(r,"class","svelte-d8z4vn"),oe(e,"panelid","comfyui.photoshop.plugin.panel"),oe(e,"class","svelte-d8z4vn")},m(t,b){R(t,e,b),F(n,e,null),$(e,i),$(e,r),F(s,r,null),$(r,o),F(a,r,null),$(r,l),F(c,r,null),$(r,u),F(d,r,null),$(r,p),F(h,r,null),$(r,f),F(g,r,null),$(r,m),F(v,r,null),$(e,y),F(_,e,null),w=!0},p(t,[e]){(!w||1&e)&&te(r,"background-size",t[0]),(!w||2&e)&&te(r,"background-image","url("+t[1]+")")},i(t){w||(T(n.$$.fragment,t),T(s.$$.fragment,t),T(a.$$.fragment,t),T(c.$$.fragment,t),T(d.$$.fragment,t),T(h.$$.fragment,t),T(g.$$.fragment,t),T(v.$$.fragment,t),T(_.$$.fragment,t),w=!0)},o(t){I(n.$$.fragment,t),I(s.$$.fragment,t),I(a.$$.fragment,t),I(c.$$.fragment,t),I(d.$$.fragment,t),I(h.$$.fragment,t),I(g.$$.fragment,t),I(v.$$.fragment,t),I(_.$$.fragment,t),w=!1},d(t){t&&M(e),B(n),B(s),B(a),B(c),B(d),B(h),B(g),B(v),B(_)}}}const DaMulti=async t=>{try{Kr++;const e=[];for(let n=0;n<t;n++)try{const t=(await Ki.getEntry(`render_${n}.png`)).url+"?v="+Kr;e.push({url:t,index:n}),ne.info(` Loaded render_${n}.png`)}catch(t){ne.warn(` Failed to load render_${n}.png:`,t)}e.length>0?Si.set(e[0].url):(ne.warn(" No images loaded, using default"),Si.set(vo))}catch(t){ne.error(" Error in DaMulti:",t)}};function vm(t,e,n){let i,r;return Y(t,Co,(t=>n(0,i=t))),Y(t,Si,(t=>n(1,r=t))),kn("renders_ready",(async t=>{ne.info(" renders_ready listener triggered");try{const{count:e,files:n}=t;ne.info(` Ready to download ${e} images`),isProcessingMultipleImages=!0;const i=n.map(((t,e)=>fetchRenderBinary(t).then((n=>({index:e,buffer:n,filename:t}))))),r=await Promise.all(i);for(const{index:t,buffer:e,filename:n}of r)e&&(ne.info(` Saving ${n}...`),await VpBinary(e,`render_${t}.png`,!0));isProcessingMultipleImages=!1,localStorage.setItem("ps_plugin_image_count",e.toString()),ne.info(` Saved imageCount to localStorage: ${e}`),ne.info(` All ${e} images saved, calling Da(${e})...`),await Da(e)}catch(t){isProcessingMultipleImages=!1,ne.error(` Error in renders_ready listener: ${t}`)}})),kn("render_ready",(async t=>{try{const{filename:e}=t;ne.info(" Received render_ready for 1 image"),localStorage.setItem("ps_plugin_image_count","1");const n=await fetchRenderBinary(e);n&&await VpBinary(n,"render_0.png",!1)}catch(t){ne.error(" Error processing render:",t)}})),[i,r]}class bm extends $e{constructor(t){super(),we(this,t,vm,_m,be,{})}}function uo(t,e,n){const i=t.slice();return i[38]=e[n],i}function ym(t){let e,n=t[3].t("randomize")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("randomize")+"")&&Z(e,n)},d(t){t&&M(e)}}}function wm(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_,w,b,x,C,A,k,S,E,P,D,z=t[3].t("positivePrompt")+"",U=t[3].t("negativePrompt")+"",H=t[3].t("sliderValue")+"";function j(e){t[21](e)}e=new zn({props:{title:t[3].t("preset")}});let Y={type:"textarea",id:"s_PsPrompt"};function q(e){t[22](e)}void 0!==t[4]&&(Y.value=t[4]),a=new Oe({props:Y}),Q.push((()=>_e(a,"value",j)));let G={type:"textarea",id:"s_NgPrompt"};function W(e){t[23](e)}void 0!==t[5]&&(G.value=t[5]),h=new Oe({props:G}),Q.push((()=>_e(h,"value",q)));let J={type:"textfield",numeric:!0,id:"sliderValInput"};function X(e){t[24](e)}void 0!==t[6]&&(J.value=t[6]),b=new Oe({props:J}),Q.push((()=>_e(b,"value",W))),k=new Le({props:{$$slots:{default:[ym]},$$scope:{ctx:t}}}),k.$on("click",(function(){tt(t[0].randomize)&&t[0].randomize.apply(this,arguments)}));let et={type:"textfield",numeric:!0,id:"seedInput_settings"};return void 0!==t[7]&&(et.value=t[7]),E=new Oe({props:et}),Q.push((()=>_e(E,"value",X))),{c(){V(e.$$.fragment),n=N(),i=L("div"),r=L("div"),s=K(z),o=N(),V(a.$$.fragment),c=N(),u=L("div"),d=K(U),p=N(),V(h.$$.fragment),g=N(),m=L("div"),v=L("div"),y=L("span"),_=K(H),w=N(),V(b.$$.fragment),C=N(),A=L("div"),V(k.$$.fragment),S=N(),V(E.$$.fragment),O(r,"class","discrip"),O(u,"class","discrip"),O(y,"class","discrip"),te(y,"width","300px"),O(v,"class","row"),O(A,"class","row-item")},m(t,l){F(e,t,l),R(t,n,l),R(t,i,l),$(i,r),$(r,s),$(i,o),F(a,i,null),$(i,c),$(i,u),$(u,d),$(i,p),F(h,i,null),R(t,g,l),R(t,m,l),$(m,v),$(v,y),$(y,_),$(v,w),F(b,v,null),$(m,C),$(m,A),F(k,A,null),$(A,S),F(E,A,null),D=!0},p(n,i){t=n;const r={};8&i[0]&&(r.title=t[3].t("preset")),e.$set(r),(!D||8&i[0])&&z!==(z=t[3].t("positivePrompt")+"")&&Z(s,z);const o={};!l&&16&i[0]&&(l=!0,o.value=t[4],me((()=>l=!1))),a.$set(o),(!D||8&i[0])&&U!==(U=t[3].t("negativePrompt")+"")&&Z(d,U);const c={};!f&&32&i[0]&&(f=!0,c.value=t[5],me((()=>f=!1))),h.$set(c),(!D||8&i[0])&&H!==(H=t[3].t("sliderValue")+"")&&Z(_,H);const u={};!x&&64&i[0]&&(x=!0,u.value=t[6],me((()=>x=!1))),b.$set(u);const p={};8&i[0]|1024&i[1]&&(p.$$scope={dirty:i,ctx:t}),k.$set(p);const g={};!P&&128&i[0]&&(P=!0,g.value=t[7],me((()=>P=!1))),E.$set(g)},i(t){D||(T(e.$$.fragment,t),T(a.$$.fragment,t),T(h.$$.fragment,t),T(b.$$.fragment,t),T(k.$$.fragment,t),T(E.$$.fragment,t),D=!0)},o(t){I(e.$$.fragment,t),I(a.$$.fragment,t),I(h.$$.fragment,t),I(b.$$.fragment,t),I(k.$$.fragment,t),I(E.$$.fragment,t),D=!1},d(t){t&&(M(n),M(i),M(g),M(m)),B(e,t),B(a),B(h),B(b),B(k),B(E)}}}function $m(t){let e,n=t[3].t("reset")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("reset")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Cm(t){let e,n=t[3].t("apply")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("apply")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Sm(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m=t[3].t("ipAddress")+"";function v(e){t[25](e)}e=new zn({props:{title:t[3].t("comfyUIIP"),statusColor:t[8].color,status:t[8].status}});let y={type:"textfield",id:"s_ip",placeholder:""};return void 0!==t[9]&&(y.value=t[9]),l=new Oe({props:y}),Q.push((()=>_e(l,"value",v))),p=new Le({props:{$$slots:{default:[$m]},$$scope:{ctx:t}}}),p.$on("click",(function(){tt(t[0].resetIP)&&t[0].resetIP.apply(this,arguments)})),f=new Le({props:{$$slots:{default:[Cm]},$$scope:{ctx:t}}}),f.$on("click",(function(){tt(t[0].applyIP)&&t[0].applyIP.apply(this,arguments)})),{c(){V(e.$$.fragment),n=N(),i=L("div"),r=L("div"),s=L("span"),o=K(m),a=N(),V(l.$$.fragment),u=N(),d=L("span"),V(p.$$.fragment),h=N(),V(f.$$.fragment),O(s,"class","discrip"),te(s,"width","120px"),O(r,"class","row"),O(d,"class","row-item")},m(t,c){F(e,t,c),R(t,n,c),R(t,i,c),$(i,r),$(r,s),$(s,o),$(r,a),F(l,r,null),R(t,u,c),R(t,d,c),F(p,d,null),$(d,h),F(f,d,null),g=!0},p(n,i){t=n;const r={};8&i[0]&&(r.title=t[3].t("comfyUIIP")),256&i[0]&&(r.statusColor=t[8].color),256&i[0]&&(r.status=t[8].status),e.$set(r),(!g||8&i[0])&&m!==(m=t[3].t("ipAddress")+"")&&Z(o,m);const s={};!c&&512&i[0]&&(c=!0,s.value=t[9],me((()=>c=!1))),l.$set(s);const a={};8&i[0]|1024&i[1]&&(a.$$scope={dirty:i,ctx:t}),p.$set(a);const u={};8&i[0]|1024&i[1]&&(u.$$scope={dirty:i,ctx:t}),f.$set(u)},i(t){g||(T(e.$$.fragment,t),T(l.$$.fragment,t),T(p.$$.fragment,t),T(f.$$.fragment,t),g=!0)},o(t){I(e.$$.fragment,t),I(l.$$.fragment,t),I(p.$$.fragment,t),I(f.$$.fragment,t),g=!1},d(t){t&&(M(n),M(i),M(u),M(d)),B(e,t),B(l),B(p),B(f)}}}function km(t){let e,n=t[3].t("fixMaskEdge")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("fixMaskEdge")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Pm(t){let e,n=t[3].t("forceResize")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("forceResize")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Am(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_,w,b,x,C,A,k,S,E,P,D,z,U,H,j,Y,q,G,W,J=t[3].t("downScaleIfBigger")+"",X=t[3].t("upScaleIfSmaller")+"",tt=t[3].t("cropPadding")+"",et=t[3].t("paddingInfo")+"";function nt(e){t[26](e)}e=new zn({props:{title:t[3].t("imageProcessing"),status:t[3].t("resetStatus")}});let it={type:"textfield",numeric:!0,id:"downScaleInput"};function rt(e){t[27](e)}void 0!==t[10]&&(it.value=t[10]),l=new Oe({props:it}),Q.push((()=>_e(l,"value",nt)));let st={type:"textfield",numeric:!0,id:"upScaleInput"};function ot(e){t[28](e)}void 0!==t[11]&&(st.value=t[11]),g=new Oe({props:st}),Q.push((()=>_e(g,"value",rt)));let at={type:"checkbox",id:"fixMaskEdge",size:"s",$$slots:{default:[km]},$$scope:{ctx:t}};function lt(e){t[29](e)}void 0!==t[12]&&(at.value=t[12]),_=new Oe({props:at}),Q.push((()=>_e(_,"value",ot)));let ct={type:"checkbox",size:"s",$$slots:{default:[Pm]},$$scope:{ctx:t}};function ut(e){t[30](e)}void 0!==t[13]&&(ct.value=t[13]),x=new Oe({props:ct}),Q.push((()=>_e(x,"value",lt)));let dt={type:"textfield",numeric:!0};return void 0!==t[14]&&(dt.value=t[14]),z=new Oe({props:dt}),Q.push((()=>_e(z,"value",ut))),Y=new Fe({props:{data:Ma}}),{c(){V(e.$$.fragment),n=N(),i=L("div"),r=L("div"),s=L("span"),o=K(J),a=N(),V(l.$$.fragment),u=N(),d=L("div"),p=L("span"),h=K(X),f=N(),V(g.$$.fragment),v=N(),y=L("div"),V(_.$$.fragment),b=N(),V(x.$$.fragment),A=N(),k=L("div"),S=L("div"),E=L("span"),P=K(tt),D=N(),V(z.$$.fragment),H=N(),j=L("span"),V(Y.$$.fragment),q=N(),G=K(et),O(s,"class","discrip"),te(s,"width","300px"),O(r,"class","row"),O(p,"class","discrip"),te(p,"width","300px"),O(d,"class","row"),O(E,"class","discrip"),te(E,"width","300px"),O(S,"class","row"),O(j,"class","discrip row"),te(j,"max-width","300px"),te(j,"color","#646464"),te(j,"white-space","nowrap")},m(t,c){F(e,t,c),R(t,n,c),R(t,i,c),$(i,r),$(r,s),$(s,o),$(r,a),F(l,r,null),$(i,u),$(i,d),$(d,p),$(p,h),$(d,f),F(g,d,null),R(t,v,c),R(t,y,c),F(_,y,null),$(y,b),F(x,y,null),R(t,A,c),R(t,k,c),$(k,S),$(S,E),$(E,P),$(S,D),F(z,S,null),$(k,H),$(k,j),F(Y,j,null),$(j,q),$(j,G),W=!0},p(t,n){const i={};8&n[0]&&(i.title=t[3].t("imageProcessing")),8&n[0]&&(i.status=t[3].t("resetStatus")),e.$set(i),(!W||8&n[0])&&J!==(J=t[3].t("downScaleIfBigger")+"")&&Z(o,J);const r={};!c&&1024&n[0]&&(c=!0,r.value=t[10],me((()=>c=!1))),l.$set(r),(!W||8&n[0])&&X!==(X=t[3].t("upScaleIfSmaller")+"")&&Z(h,X);const s={};!m&&2048&n[0]&&(m=!0,s.value=t[11],me((()=>m=!1))),g.$set(s);const a={};8&n[0]|1024&n[1]&&(a.$$scope={dirty:n,ctx:t}),!w&&4096&n[0]&&(w=!0,a.value=t[12],me((()=>w=!1))),_.$set(a);const u={};8&n[0]|1024&n[1]&&(u.$$scope={dirty:n,ctx:t}),!C&&8192&n[0]&&(C=!0,u.value=t[13],me((()=>C=!1))),x.$set(u),(!W||8&n[0])&&tt!==(tt=t[3].t("cropPadding")+"")&&Z(P,tt);const d={};!U&&16384&n[0]&&(U=!0,d.value=t[14],me((()=>U=!1))),z.$set(d),(!W||8&n[0])&&et!==(et=t[3].t("paddingInfo")+"")&&Z(G,et)},i(t){W||(T(e.$$.fragment,t),T(l.$$.fragment,t),T(g.$$.fragment,t),T(_.$$.fragment,t),T(x.$$.fragment,t),T(z.$$.fragment,t),T(Y.$$.fragment,t),W=!0)},o(t){I(e.$$.fragment,t),I(l.$$.fragment,t),I(g.$$.fragment,t),I(_.$$.fragment,t),I(x.$$.fragment,t),I(z.$$.fragment,t),I(Y.$$.fragment,t),W=!1},d(t){t&&(M(n),M(i),M(v),M(y),M(A),M(k)),B(e,t),B(l),B(g),B(_),B(x),B(z),B(Y)}}}function fo(t){let e,n,i,r,s,o=t[38].name+"",a=t[38].short+"";return{c(){e=L("option"),n=K(o),i=K(" ("),r=K(a),s=K(")\r\n            "),O(e,"id",t[38].id),e.__value=t[38].id,es(e,e.__value)},m(t,o){R(t,e,o),$(e,n),$(e,i),$(e,r),$(e,s)},p:le,d(t){t&&M(e)}}}function Om(t){let e,n=Bt(t[19]),i=[];for(let e=0;e<n.length;e+=1)i[e]=fo(uo(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=bt()},m(t,n){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,n);R(t,e,n)},p(t,r){if(524288&r[0]){let s;for(n=Bt(t[19]),s=0;s<n.length;s+=1){const o=uo(t,n,s);i[s]?i[s].p(o,r):(i[s]=fo(o),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&M(e),Hs(i,t)}}}function Tm(t){let e,n=t[3].t("showNegativeInput")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("showNegativeInput")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Lm(t){let e,n=t[3].t("keepBottomControllerVisible")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("keepBottomControllerVisible")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Im(t){let e,n=t[3].t("keepEverythingVisible")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("keepEverythingVisible")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Em(t){let e,n=t[3].t("disableAllAnimations")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("disableAllAnimations")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Dm(t){let e,n=t[3].t("reloadPlugin")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i[0]&&n!==(n=t[3].t("reloadPlugin")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Mm(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_;function w(e){t[32](e)}e=new zn({props:{title:t[3].t("general"),status:ss}}),r=new qi({props:{selectedItem:" Change the Language",prefix:"",$$slots:{default:[Om]},$$scope:{ctx:t}}}),r.$on("change",t[31]);let b={type:"checkbox",size:"s",$$slots:{default:[Tm]},$$scope:{ctx:t}};function x(e){t[33](e)}void 0!==t[16]&&(b.value=t[16]),o=new Oe({props:b}),Q.push((()=>_e(o,"value",w)));let C={type:"checkbox",size:"s",$$slots:{default:[Lm]},$$scope:{ctx:t}};function A(e){t[34](e)}void 0!==t[2]&&(C.value=t[2]),c=new Oe({props:C}),Q.push((()=>_e(c,"value",x)));let k={type:"checkbox",size:"s",$$slots:{default:[Im]},$$scope:{ctx:t}};function S(e){t[35](e)}void 0!==t[1]&&(k.value=t[1]),p=new Oe({props:k}),Q.push((()=>_e(p,"value",A))),p.$on("change",t[18]);let O={type:"checkbox",size:"s",$$slots:{default:[Em]},$$scope:{ctx:t}};return void 0!==t[17]&&(O.value=t[17]),g=new Oe({props:O}),Q.push((()=>_e(g,"value",S))),y=new Le({props:{$$slots:{default:[Dm]},$$scope:{ctx:t}}}),y.$on("click",t[36]),{c(){V(e.$$.fragment),n=N(),i=L("div"),V(r.$$.fragment),s=N(),V(o.$$.fragment),l=N(),V(c.$$.fragment),d=N(),V(p.$$.fragment),f=N(),V(g.$$.fragment),v=N(),V(y.$$.fragment)},m(t,a){F(e,t,a),R(t,n,a),R(t,i,a),F(r,i,null),$(i,s),F(o,i,null),$(i,l),F(c,i,null),$(i,d),F(p,i,null),$(i,f),F(g,i,null),R(t,v,a),F(y,t,a),_=!0},p(t,n){const i={};8&n[0]&&(i.title=t[3].t("general")),e.$set(i);const s={};1024&n[1]&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const l={};8&n[0]|1024&n[1]&&(l.$$scope={dirty:n,ctx:t}),!a&&65536&n[0]&&(a=!0,l.value=t[16],me((()=>a=!1))),o.$set(l);const d={};8&n[0]|1024&n[1]&&(d.$$scope={dirty:n,ctx:t}),!u&&4&n[0]&&(u=!0,d.value=t[2],me((()=>u=!1))),c.$set(d);const f={};8&n[0]|1024&n[1]&&(f.$$scope={dirty:n,ctx:t}),!h&&2&n[0]&&(h=!0,f.value=t[1],me((()=>h=!1))),p.$set(f);const v={};8&n[0]|1024&n[1]&&(v.$$scope={dirty:n,ctx:t}),!m&&131072&n[0]&&(m=!0,v.value=t[17],me((()=>m=!1))),g.$set(v);const $={};8&n[0]|1024&n[1]&&($.$$scope={dirty:n,ctx:t}),y.$set($)},i(t){_||(T(e.$$.fragment,t),T(r.$$.fragment,t),T(o.$$.fragment,t),T(c.$$.fragment,t),T(p.$$.fragment,t),T(g.$$.fragment,t),T(y.$$.fragment,t),_=!0)},o(t){I(e.$$.fragment,t),I(r.$$.fragment,t),I(o.$$.fragment,t),I(c.$$.fragment,t),I(p.$$.fragment,t),I(g.$$.fragment,t),I(y.$$.fragment,t),_=!1},d(t){t&&(M(n),M(i),M(v)),B(e,t),B(r),B(o),B(c),B(p),B(g),B(y,t)}}}function Rm(t){let e,n,i,r,s,o,a,l,c,u,d,p,h;return e=new cn({props:{}}),t[20](e),s=new yn({props:{class:"style-containerBG settinglist",$$slots:{default:[wm]},$$scope:{ctx:t}}}),a=new yn({props:{$$slots:{default:[Sm]},$$scope:{ctx:t}}}),u=new yn({props:{class:"style-containerBG settinglist",$$slots:{default:[Am]},$$scope:{ctx:t}}}),p=new yn({props:{$$slots:{default:[Mm]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment),n=N(),i=L("uxp-panel"),r=L("div"),V(s.$$.fragment),o=N(),V(a.$$.fragment),l=N(),c=L("div"),V(u.$$.fragment),d=N(),V(p.$$.fragment),O(r,"class","settingpanelseg svelte-t1r8lk"),O(c,"class","settingpanelseg svelte-t1r8lk"),oe(i,"id","settinpanel"),oe(i,"panelid","comfyui.photoshop.plugin.settings"),oe(i,"class","svelte-t1r8lk")},m(t,f){F(e,t,f),R(t,n,f),R(t,i,f),$(i,r),F(s,r,null),$(r,o),F(a,r,null),$(i,l),$(i,c),F(u,c,null),$(c,d),F(p,c,null),h=!0},p(t,n){e.$set({});const i={};249&n[0]|1024&n[1]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const r={};777&n[0]|1024&n[1]&&(r.$$scope={dirty:n,ctx:t}),a.$set(r);const o={};31752&n[0]|1024&n[1]&&(o.$$scope={dirty:n,ctx:t}),u.$set(o);const l={};229390&n[0]|1024&n[1]&&(l.$$scope={dirty:n,ctx:t}),p.$set(l)},i(t){h||(T(e.$$.fragment,t),T(s.$$.fragment,t),T(a.$$.fragment,t),T(u.$$.fragment,t),T(p.$$.fragment,t),h=!0)},o(t){I(e.$$.fragment,t),I(s.$$.fragment,t),I(a.$$.fragment,t),I(u.$$.fragment,t),I(p.$$.fragment,t),h=!1},d(r){r&&(M(n),M(i)),t[20](null),B(e,r),B(s),B(a),B(u),B(p)}}}function xm(t,e,n){let i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,$,y,_;Y(t,Es,(t=>n(1,i=t))),Y(t,_s,(t=>n(2,r=t))),Y(t,un,(t=>n(3,s=t))),Y(t,On,(t=>n(4,o=t))),Y(t,Tn,(t=>n(5,a=t))),Y(t,Nt,(t=>n(6,l=t))),Y(t,Dt,(t=>n(7,c=t))),Y(t,ko,(t=>n(8,u=t))),Y(t,rt,(t=>n(9,d=t))),Y(t,bi,(t=>n(10,p=t))),Y(t,yi,(t=>n(11,h=t))),Y(t,wi,(t=>n(12,f=t))),Y(t,Ci,(t=>n(13,g=t))),Y(t,Is,(t=>n(14,m=t))),Y(t,Ls,(t=>n(15,v=t))),Y(t,$i,(t=>n(16,$=t))),Y(t,Ln,(t=>n(17,y=t)));const w=Object.entries(Ts).map((([t,e])=>({id:t,...e})));return[_,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,$,y,function(){i&&Ve(_s,r=i,r),window.location.reload()},w,function(t){Q[t?"unshift":"push"]((()=>{_=t,n(0,_)}))},function(t){o=t,On.set(o)},function(t){a=t,Tn.set(a)},function(t){l=t,Nt.set(l)},function(t){c=t,Dt.set(c)},function(t){d=t,rt.set(d)},function(t){ne.info(" DownScale bi.set called with:",t),p=t,bi.set(p)},function(t){ne.info(" UpScale yi.set called with:",t),h=t,yi.set(h)},function(t){f=t,wi.set(f)},function(t){g=t,Ci.set(g)},function(t){m=t,Is.set(m)},t=>Ve(Ls,v=t.detail.id,v),function(t){$=t,$i.set($)},function(t){r=t,_s.set(r)},function(t){i=t,Es.set(i)},function(t){y=t,Ln.set(y)},()=>window.location.reload()]}class Nm extends $e{constructor(t){super(),we(this,t,xm,Rm,be,{},null,[-1,-1])}}const zm='<svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.4632 19.4178V21.7631C19.4632 22.3509 18.9875 22.8322 18.3941 22.8322C17.8008 22.8322 17.325 22.3565 17.325 21.7631V19.4178H14.9797C14.392 19.4178 13.9106 18.9421 13.9106 18.3487C13.9106 17.7554 14.3864 17.2796 14.9797 17.2796H17.325V14.9343C17.325 14.3466 17.8008 13.8652 18.3941 13.8652C18.9875 13.8652 19.4632 14.341 19.4632 14.9343V17.2796H21.8085C22.3963 17.2796 22.8776 17.7554 22.8776 18.3487C22.8776 18.9421 22.4019 19.4178 21.8085 19.4178H19.4632Z" fill="#7D7D7D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.4211 17.3472L8.79962 14.834L5.88898 16.8546C5.88898 16.8546 5.86099 16.8826 5.8498 16.8994C5.83861 16.9162 5.83301 16.9386 5.83301 16.9554C5.83301 16.9722 5.83301 16.9946 5.8498 17.0114C5.86099 17.0282 5.87219 17.045 5.88898 17.0561L13.7757 22.5304C13.8205 22.5584 13.8708 22.5752 13.9212 22.5752C13.9716 22.5752 14.022 22.5584 14.0668 22.5304L15.6508 21.6852V21.0975H14.9847C13.4678 21.0975 12.2364 19.866 12.2364 18.3491C12.2364 17.9965 12.3036 17.6551 12.4267 17.3472H12.4211Z" fill="#7D7D7D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.1475 15.6071H14.9796C14.3919 15.6071 13.8545 15.7918 13.4068 16.0997L5.88947 10.8885C5.88947 10.8885 5.86148 10.8605 5.85029 10.8437C5.83909 10.8269 5.8335 10.8045 5.8335 10.7877C5.8335 10.7709 5.8335 10.7486 5.85029 10.7318C5.86148 10.715 5.87268 10.6982 5.88947 10.687L13.7706 5.21275C13.8154 5.18476 13.8657 5.16797 13.9217 5.16797C13.9777 5.16797 14.0281 5.18476 14.0728 5.21275L21.954 10.6814C21.954 10.6814 21.9819 10.7094 21.9931 10.7262C22.0043 10.743 22.0099 10.7654 22.0099 10.7821C22.0099 10.7989 22.0099 10.8213 21.9931 10.8381C21.9819 10.8549 21.9707 10.8717 21.954 10.8829L19.6422 12.4893C19.2672 12.299 18.8474 12.1927 18.3996 12.1927C16.8827 12.1927 15.6513 13.4241 15.6513 14.941V15.26L15.1475 15.6071Z" fill="#7D7D7D"/>\n</svg>\n';function Fm(t){let e,n=t[3].t("connect")+"";return{c(){e=K(n)},m(t,n){R(t,e,n)},p(t,i){8&i&&n!==(n=t[3].t("connect")+"")&&Z(e,n)},d(t){t&&M(e)}}}function Bm(t){let e;return{c(){e=K("")},m(t,n){R(t,e,n)},d(t){t&&M(e)}}}function Vm(t){let e,n,i,r,s=t[3].t("render")+"";return i=new Fe({props:{style:"margin-right: -4px;",data:ka,size:"24"}}),{c(){e=K(s),n=N(),V(i.$$.fragment)},m(t,s){R(t,e,s),R(t,n,s),F(i,t,s),r=!0},p(t,n){(!r||8&n)&&s!==(s=t[3].t("render")+"")&&Z(e,s)},i(t){r||(T(i.$$.fragment,t),r=!0)},o(t){I(i.$$.fragment,t),r=!1},d(t){t&&(M(e),M(n)),B(i,t)}}}function Hm(t){let e,n;return e=new Fe({props:{data:zm,size:"24"}}),{c(){V(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},p:le,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Um(t){let e,n,i,r,s,o,a,l,c,u,d,p,h,f,g,m,v,y,_,w,b,x,C,A=t[3].t("sendLatestImgAndMask")+"";function k(e){t[5](e)}e=new cn({props:{}}),t[4](e);let S={type:"textfield",size:"s"};return void 0!==t[2]&&(S.value=t[2]),o=new Oe({props:S}),Q.push((()=>_e(o,"value",k))),u=new Le({props:{class:"s",$$slots:{default:[Fm]},$$scope:{ctx:t}}}),u.$on("click",(function(){tt(t[1].applyIP)&&t[1].applyIP.apply(this,arguments)})),p=new Le({props:{class:"s",style:"font-size: large; width: auto;",$$slots:{default:[Bm]},$$scope:{ctx:t}}}),p.$on("click",(function(){tt(t[1].resetIP)&&t[1].resetIP.apply(this,arguments)})),y=new Le({props:{style:"width: 100px; margin-left: 8px;",class:"s icon",$$slots:{default:[Vm]},$$scope:{ctx:t}}}),y.$on("mouseenter",t[6]),y.$on("mouseleave",t[7]),y.$on("contextmenu",(function(){tt(t[1].randomize)&&t[1].randomize.apply(this,arguments)})),y.$on("click",(function(){tt(t[1].SendQueue)&&t[1].SendQueue.apply(this,arguments)})),w=new Le({props:{style:"width: 40px; margin-right: 8px;",class:"s icon",$$slots:{default:[Hm]},$$scope:{ctx:t}}}),w.$on("click",xa),{c(){V(e.$$.fragment),n=N(),i=L("uxp-panel"),r=L("div"),s=L("div"),V(o.$$.fragment),l=N(),c=L("div"),V(u.$$.fragment),d=N(),V(p.$$.fragment),h=N(),f=L("div"),g=L("span"),m=K(A),v=N(),V(y.$$.fragment),_=N(),V(w.$$.fragment),b=N(),x=L("webview"),O(c,"class","row-item svelte-3elpbo"),te(c,"padding-left","8px"),O(s,"class","row svelte-3elpbo"),te(s,"width","300px"),te(g,"height","28px"),te(g,"overflow","hidden"),te(g,"max-width","110px"),te(g,"text-align","right"),te(g,"visibility",t[0]?"visible":"hidden"),te(g,"opacity",t[0]?1:0),te(g,"transition","opacity 0.2s ease-in-out"),O(g,"class","discrip svelte-3elpbo"),te(f,"width","auto"),O(f,"class","row svelte-3elpbo"),O(r,"class","bg svelte-3elpbo"),O(x,"src","http://127.0.0.1:8188"),O(x,"class","svelte-3elpbo"),oe(i,"panelid","comfyui.photoshop.plugin.web"),oe(i,"class","svelte-3elpbo")},m(t,a){F(e,t,a),R(t,n,a),R(t,i,a),$(i,r),$(r,s),F(o,s,null),$(s,l),$(s,c),F(u,c,null),$(c,d),F(p,c,null),$(r,h),$(r,f),$(f,g),$(g,m),$(f,v),F(y,f,null),$(f,_),F(w,f,null),$(i,b),$(i,x),C=!0},p(n,[i]){t=n;e.$set({});const r={};!a&&4&i&&(a=!0,r.value=t[2],me((()=>a=!1))),o.$set(r);const s={};264&i&&(s.$$scope={dirty:i,ctx:t}),u.$set(s);const l={};256&i&&(l.$$scope={dirty:i,ctx:t}),p.$set(l),(!C||8&i)&&A!==(A=t[3].t("sendLatestImgAndMask")+"")&&Z(m,A),(!C||1&i)&&te(g,"visibility",t[0]?"visible":"hidden"),(!C||1&i)&&te(g,"opacity",t[0]?1:0);const c={};264&i&&(c.$$scope={dirty:i,ctx:t}),y.$set(c);const d={};256&i&&(d.$$scope={dirty:i,ctx:t}),w.$set(d)},i(t){C||(T(e.$$.fragment,t),T(o.$$.fragment,t),T(u.$$.fragment,t),T(p.$$.fragment,t),T(y.$$.fragment,t),T(w.$$.fragment,t),C=!0)},o(t){I(e.$$.fragment,t),I(o.$$.fragment,t),I(u.$$.fragment,t),I(p.$$.fragment,t),I(y.$$.fragment,t),I(w.$$.fragment,t),C=!1},d(r){r&&(M(n),M(i)),t[4](null),B(e,r),B(o),B(u),B(p),B(y),B(w)}}}function jm(t,e,n){let i,r;Y(t,rt,(t=>n(2,i=t))),Y(t,un,(t=>n(3,r=t)));let s,o=!1;return[o,s,i,r,function(t){Q[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){i=t,rt.set(i)},()=>n(0,o=!0),()=>n(0,o=!1)]}class qm extends $e{constructor(t){super(),we(this,t,jm,Um,be,{})}}function Wm(t){let e,n,i,r,s,o;return e=new bm({}),i=new Nm({}),s=new qm({}),{c(){V(e.$$.fragment),n=N(),V(i.$$.fragment),r=N(),V(s.$$.fragment)},m(t,a){F(e,t,a),R(t,n,a),F(i,t,a),R(t,r,a),F(s,t,a),o=!0},p:le,i(t){o||(T(e.$$.fragment,t),T(i.$$.fragment,t),T(s.$$.fragment,t),o=!0)},o(t){I(e.$$.fragment,t),I(i.$$.fragment,t),I(s.$$.fragment,t),o=!1},d(t){t&&(M(n),M(r)),B(e,t),B(i,t),B(s,t)}}}function Gm(t){return Xs.core.suppressResizeGripper({type:"panel",target:"comfyui.photoshop.plugin.panel",value:!0}),Xs.core.suppressResizeGripper({type:"panel",target:"comfyui.photoshop.plugin.settings",value:!0}),Xs.core.suppressResizeGripper({type:"panel",target:"comfyui.photoshop.plugin.web",value:!0}),[]}class Km extends $e{constructor(t){super(),we(this,t,Gm,Wm,be,{})}}new Km({target:document.getElementById("app")});
